<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uzm.Dr. Sait Ramazan Gülbay - Gelişmiş Eğitim Materyalleri & Quiz</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="icon" href="/favicon.ico" sizes="any"> 
<style>
:root {
    color-scheme: light dark;

    --hue-primary: 238;
    --hue-secondary: 212;
    --hue-tertiary: 260; /* Added tertiary accent */
    --hue-success: 150;
    --hue-error: 3;
    --hue-warning: 48;
    --hue-neutral: 225;

    --chroma-accent: 0.2;
    --chroma-secondary: 0.12;
    --chroma-tertiary: 0.15; /* Added tertiary accent */
    --chroma-vibrant: 0.25;
    --chroma-subtle: 0.07;
    --chroma-neutral: 0.02;
    --chroma-neutral-subtle: 0.01;

    --lightness-brand-light: 62%;
    --lightness-brand-dark: 66%;

    --lightness-text-strong-light: 8%;
    --lightness-text-normal-light: 18%;
    --lightness-text-soft-light: 38%;
    --lightness-text-muted-light: 55%;

    --lightness-surface-1-light: 100%;
    --lightness-surface-2-light: 98%;
    --lightness-surface-3-light: 96%;
    --lightness-surface-4-light: 93.5%;
    --lightness-surface-overlay-light: 90%; /* For modal-like backgrounds */

    --lightness-border-light: 90%;
    --lightness-border-hover-light: 84%;
    --lightness-border-focus-light: 78%;

    --lightness-text-on-accent-light: 99%;

    --bg-secondary-rgb-light: 250, 251, 253;
    --bg-tertiary-rgb-light: 245, 247, 250;

    --accent-primary-light: oklch(var(--lightness-brand-light) var(--chroma-accent) var(--hue-primary));
    --accent-primary-hover-light: oklch(calc(var(--lightness-brand-light) - 6%) var(--chroma-accent) var(--hue-primary));
    --accent-primary-active-light: oklch(calc(var(--lightness-brand-light) - 12%) var(--chroma-accent) var(--hue-primary));

    --accent-secondary-light: oklch(calc(var(--lightness-brand-light) + 6%) var(--chroma-secondary) var(--hue-secondary));
    --accent-secondary-hover-light: oklch(calc(var(--lightness-brand-light) + 1%) var(--chroma-secondary) var(--hue-secondary));
    --accent-secondary-active-light: oklch(calc(var(--lightness-brand-light) - 4%) var(--chroma-secondary) var(--hue-secondary));

    --accent-tertiary-light: oklch(calc(var(--lightness-brand-light) + 10%) var(--chroma-tertiary) var(--hue-tertiary)); /* Added tertiary accent */

    --text-1-light: oklch(var(--lightness-text-strong-light) var(--chroma-neutral) var(--hue-neutral));
    --text-2-light: oklch(var(--lightness-text-normal-light) var(--chroma-neutral-subtle) var(--hue-neutral));
    --text-3-light: oklch(var(--lightness-text-soft-light) var(--chroma-neutral-subtle) var(--hue-neutral));
    --text-muted-light: oklch(var(--lightness-text-muted-light) var(--chroma-neutral-subtle) var(--hue-neutral));
    --text-on-accent-light: oklch(var(--lightness-text-on-accent-light) var(--chroma-neutral-subtle) var(--hue-primary));

    --surface-1-light: oklch(var(--lightness-surface-1-light) var(--chroma-neutral-subtle) var(--hue-neutral));
    --surface-2-light: oklch(var(--lightness-surface-2-light) var(--chroma-neutral-subtle) var(--hue-neutral));
    --surface-3-light: oklch(var(--lightness-surface-3-light) var(--chroma-neutral-subtle) var(--hue-neutral));
    --surface-4-light: oklch(var(--lightness-surface-4-light) var(--chroma-neutral-subtle) var(--hue-neutral));
    --surface-accent-light: oklch(calc(var(--lightness-brand-light) + 28%) var(--chroma-subtle) var(--hue-primary) / 0.85);
    --surface-overlay-light: oklch(var(--lightness-surface-overlay-light) var(--chroma-neutral-subtle) var(--hue-neutral) / 0.8);

    --border-1-light: oklch(var(--lightness-border-light) var(--chroma-neutral-subtle) var(--hue-neutral) / 0.8);
    --border-2-light: oklch(calc(var(--lightness-border-light) - 6%) var(--chroma-neutral-subtle) var(--hue-neutral) / 0.9);
    --border-accent-light: oklch(var(--lightness-brand-light) var(--chroma-subtle) var(--hue-primary) / 0.7);
    --border-hover-light: oklch(var(--lightness-border-hover-light) var(--chroma-neutral) var(--hue-neutral));
    --border-focus-light: oklch(var(--lightness-border-focus-light) var(--chroma-accent) var(--hue-primary));

    --shadow-color-light: oklch(var(--lightness-text-strong-light) 0.007 0 / 8%);
    --shadow-hover-color-light: oklch(var(--lightness-text-strong-light) 0.008 0 / 14%);
    --shadow-inset-light: inset 0 1px 3px 0 oklch(var(--lightness-text-strong-light) 0.004 0 / 6%);
    --shadow-highlight-light: 0 0.5px 0.5px oklch(100% 0.005 0 / 60%) inset; /* Subtle top highlight */

    --shadow-sm-light: 0 1px 2px 0 var(--shadow-color-light), 0 2px 4px -1px var(--shadow-color-light);
    --shadow-md-light: 0 4px 8px -2px var(--shadow-color-light), 0 2px 4px -2px var(--shadow-color-light);
    --shadow-lg-light: 0 12px 16px -4px var(--shadow-color-light), 0 4px 6px -4px var(--shadow-color-light);
    --shadow-xl-light: 0 20px 25px -5px var(--shadow-color-light), 0 10px 10px -6px var(--shadow-color-light);
    --shadow-2xl-light: 0 28px 50px -12px var(--shadow-color-light);

    --success-light: oklch(62% var(--chroma-secondary) var(--hue-success));
    --error-light: oklch(67% var(--chroma-accent) var(--hue-error));
    --warning-light: oklch(80% var(--chroma-accent) var(--hue-warning));
    --success-bg-light: oklch(97.5% var(--chroma-subtle) var(--hue-success) / 0.7);
    --error-bg-light: oklch(97.5% var(--chroma-subtle) var(--hue-error) / 0.7);
    --warning-bg-light: oklch(98.5% var(--chroma-subtle) var(--hue-warning) / 0.7);
    --success-border-light: oklch(88% var(--chroma-subtle) var(--hue-success));
    --error-border-light: oklch(88% var(--chroma-subtle) var(--hue-error));
    --warning-border-light: oklch(90% var(--chroma-subtle) var(--hue-warning));


    /* Dark Mode Variables */
    --lightness-text-strong-dark: 98%;
    --lightness-text-normal-dark: 90%;
    --lightness-text-soft-dark: 78%;
    --lightness-text-muted-dark: 65%;

    --lightness-surface-1-dark: 5%;  /* Darker base */
    --lightness-surface-2-dark: 9%;
    --lightness-surface-3-dark: 14%;
    --lightness-surface-4-dark: 19%;
    --lightness-surface-overlay-dark: 25%; /* For modal-like backgrounds */

    --lightness-border-dark: 28%;
    --lightness-border-hover-dark: 34%;
    --lightness-border-focus-dark: 40%;

    --lightness-text-on-accent-dark: 8%;

    --bg-secondary-rgb-dark: 23, 26, 31;
    --bg-tertiary-rgb-dark: 36, 40, 46;

    --accent-primary-dark: oklch(var(--lightness-brand-dark) var(--chroma-accent) var(--hue-primary));
    --accent-primary-hover-dark: oklch(calc(var(--lightness-brand-dark) + 6%) var(--chroma-accent) var(--hue-primary));
    --accent-primary-active-dark: oklch(calc(var(--lightness-brand-dark) + 12%) var(--chroma-accent) var(--hue-primary));

    --accent-secondary-dark: oklch(calc(var(--lightness-brand-dark) - 7%) var(--chroma-secondary) var(--hue-secondary));
    --accent-secondary-hover-dark: oklch(calc(var(--lightness-brand-dark) - 3%) var(--chroma-secondary) var(--hue-secondary));
    --accent-secondary-active-dark: oklch(var(--lightness-brand-dark) var(--chroma-secondary) var(--hue-secondary));

    --accent-tertiary-dark: oklch(calc(var(--lightness-brand-dark) - 10%) var(--chroma-tertiary) var(--hue-tertiary)); /* Added tertiary accent */

    --text-1-dark: oklch(var(--lightness-text-strong-dark) var(--chroma-neutral-subtle) var(--hue-neutral));
    --text-2-dark: oklch(var(--lightness-text-normal-dark) var(--chroma-neutral-subtle) var(--hue-neutral));
    --text-3-dark: oklch(var(--lightness-text-soft-dark) var(--chroma-neutral-subtle) var(--hue-neutral));
    --text-muted-dark: oklch(var(--lightness-text-muted-dark) var(--chroma-neutral-subtle) var(--hue-neutral));
    --text-on-accent-dark: oklch(var(--lightness-text-on-accent-dark) var(--chroma-neutral) var(--hue-primary));

    --surface-1-dark: oklch(var(--lightness-surface-1-dark) var(--chroma-neutral-subtle) var(--hue-neutral));
    --surface-2-dark: oklch(var(--lightness-surface-2-dark) var(--chroma-neutral-subtle) var(--hue-neutral));
    --surface-3-dark: oklch(var(--lightness-surface-3-dark) var(--chroma-neutral-subtle) var(--hue-neutral));
    --surface-4-dark: oklch(var(--lightness-surface-4-dark) var(--chroma-neutral-subtle) var(--hue-neutral));
    --surface-accent-dark: oklch(calc(var(--lightness-brand-dark) - 48%) var(--chroma-subtle) var(--hue-primary) / 0.35);
    --surface-overlay-dark: oklch(var(--lightness-surface-overlay-dark) var(--chroma-neutral-subtle) var(--hue-neutral) / 0.85);

    --border-1-dark: oklch(var(--lightness-border-dark) var(--chroma-neutral-subtle) var(--hue-neutral));
    --border-2-dark: oklch(calc(var(--lightness-border-dark) + 6%) var(--chroma-neutral-subtle) var(--hue-neutral));
    --border-accent-dark: oklch(var(--lightness-brand-dark) var(--chroma-subtle) var(--hue-primary) / 0.45);
    --border-hover-dark: oklch(var(--lightness-border-hover-dark) var(--chroma-neutral) var(--hue-neutral));
    --border-focus-dark: oklch(var(--lightness-border-focus-dark) var(--chroma-accent) var(--hue-primary));

    --shadow-color-dark: oklch(2% 0.018 0 / 45%);
    --shadow-hover-color-dark: oklch(2% 0.02 0 / 55%);
    --shadow-inset-dark: inset 0 1px 2px 0 oklch(100% 0.004 0 / 8%); /* Brighter inset */
    --shadow-highlight-dark: 0 1px 0px oklch(100% 0.008 0 / 10%) inset; /* More noticeable highlight */

    --shadow-sm-dark: 0 1px 3px 0 var(--shadow-color-dark), 0 1px 2px -1px var(--shadow-color-dark);
    --shadow-md-dark: 0 4px 8px -2px var(--shadow-color-dark), 0 2px 4px -2px var(--shadow-color-dark);
    --shadow-lg-dark: 0 12px 16px -4px var(--shadow-color-dark), 0 4px 6px -4px var(--shadow-color-dark);
    --shadow-xl-dark: 0 20px 25px -5px var(--shadow-color-dark), 0 10px 10px -6px var(--shadow-color-dark);
    --shadow-2xl-dark: 0 28px 50px -12px var(--shadow-color-dark);

    --success-dark: oklch(72% var(--chroma-secondary) var(--hue-success));
    --error-dark: oklch(74% var(--chroma-accent) var(--hue-error));
    --warning-dark: oklch(82% var(--chroma-accent) var(--hue-warning));
    --success-bg-dark: oklch(18% var(--chroma-subtle) var(--hue-success) / 0.35);
    --error-bg-dark: oklch(18% var(--chroma-subtle) var(--hue-error) / 0.35);
    --warning-bg-dark: oklch(20% var(--chroma-subtle) var(--hue-warning) / 0.35);
    --success-border-dark: oklch(32% var(--chroma-subtle) var(--hue-success) / 0.5);
    --error-border-dark: oklch(32% var(--chroma-subtle) var(--hue-error) / 0.5);
    --warning-border-dark: oklch(34% var(--chroma-subtle) var(--hue-warning) / 0.5);

    /* Global Settings */
    --bg-primary: var(--surface-1-light);
    --bg-secondary: var(--surface-2-light);
    --bg-tertiary: var(--surface-3-light);
    --bg-accent: var(--surface-accent-light);
    --bg-overlay: var(--surface-overlay-light);
    --bg-secondary-rgb: var(--bg-secondary-rgb-light);
    --bg-tertiary-rgb: var(--bg-tertiary-rgb-light);
    --text-primary: var(--text-1-light);
    --text-secondary: var(--text-2-light);
    --text-muted: var(--text-muted-light);
    --text-on-accent: var(--text-on-accent-light);
    --accent-primary: var(--accent-primary-light);
    --accent-primary-hover: var(--accent-primary-hover-light);
    --accent-primary-active: var(--accent-primary-active-light);
    --accent-secondary: var(--accent-secondary-light);
    --accent-secondary-hover: var(--accent-secondary-hover-light);
    --accent-secondary-active: var(--accent-secondary-active-light);
    --accent-tertiary: var(--accent-tertiary-light);
    --border-primary: var(--border-1-light);
    --border-secondary: var(--border-2-light);
    --border-accent: var(--border-accent-light);
    --border-hover: var(--border-hover-light);
    --border-focus: var(--border-focus-light);
    --shadow-color: var(--shadow-color-light);
    --shadow-hover-color: var(--shadow-hover-color-light);
    --shadow-inset: var(--shadow-inset-light);
    --shadow-highlight: var(--shadow-highlight-light);
    --shadow-sm: var(--shadow-sm-light);
    --shadow-md: var(--shadow-md-light);
    --shadow-lg: var(--shadow-lg-light);
    --shadow-xl: var(--shadow-xl-light);
    --shadow-2xl: var(--shadow-2xl-light);
    --success: var(--success-light);
    --error: var(--error-light);
    --warning: var(--warning-light);
    --success-bg: var(--success-bg-light);
    --error-bg: var(--error-bg-light);
    --warning-bg: var(--warning-bg-light);
    --success-border: var(--success-border-light);
    --error-border: var(--error-border-light);
    --warning-border: var(--warning-border-light);

    --border-radius-sm: 0.4rem;
    --border-radius-md: 0.8rem;
    --border-radius-lg: 1.2rem;
    --border-radius-xl: 1.6rem; /* Added XL */
    --font-family: 'Poppins', 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';
    --font-size-base: clamp(1rem, 0.92rem + 0.3vw, 1.12rem);
    --line-height-base: clamp(1.65, 1.55rem + 0.4vw, 1.8);
    --font-size-sm: calc(var(--font-size-base) * 0.85);
    --font-size-lg: calc(var(--font-size-base) * 1.3);
    --font-size-xl: calc(var(--font-size-base) * 1.6);
    --font-size-xxl: calc(var(--font-size-base) * 2.1);
    --font-size-xxxl: calc(var(--font-size-base) * 2.9);

    --space-unit: 1rem;
    --space-xxs: calc(var(--space-unit) * 0.35);
    --space-xs: calc(var(--space-unit) * 0.6);
    --space-s: calc(var(--space-unit) * 0.85);
    --space-m: calc(var(--space-unit) * 1.2);
    --space-l: calc(var(--space-unit) * 1.8);
    --space-xl: calc(var(--space-unit) * 2.8);
    --space-xxl: calc(var(--space-unit) * 4.5);
    --space-xxxl: calc(var(--space-unit) * 7);

    --anim-duration-fast: 0.2s;
    --anim-duration-normal: 0.4s;
    --anim-duration-slow: 0.7s;
    --anim-duration-xslow: 1.1s;
    --anim-easing-standard: cubic-bezier(0.5, 0, 0.15, 1);
    --anim-easing-decelerate: cubic-bezier(0.1, 0.7, 0.1, 1); /* Smoother decelerate */
    --anim-easing-accelerate: cubic-bezier(0.7, 0, 0.9, 0.3); /* Smoother accelerate */
    --anim-easing-bounce: cubic-bezier(0.25, 1.8, 0.5, 0.8); /* Less aggressive bounce */
    --anim-easing-elastic: cubic-bezier(0.5, 1.5, 0.5, 0.8); /* Smooth elastic */
    --anim-easing-elegant: cubic-bezier(0.85, 0, 0.15, 1); /* Elegant S-curve */

    --transition-speed: var(--anim-duration-normal);
    --transition-easing: var(--anim-easing-elegant);
    --focus-ring-color: oklch(var(--lightness-brand-light) var(--chroma-accent) var(--hue-primary) / 0.7);
    --focus-ring-width: 3px;
    --focus-ring-offset: 2px;
    --disabled-opacity: 0.45;
}

body.dark-mode {
    --bg-primary: var(--surface-1-dark);
    --bg-secondary: var(--surface-2-dark);
    --bg-tertiary: var(--surface-3-dark);
    --bg-accent: var(--surface-accent-dark);
    --bg-overlay: var(--surface-overlay-dark);
    --bg-secondary-rgb: var(--bg-secondary-rgb-dark);
    --bg-tertiary-rgb: var(--bg-tertiary-rgb-dark);
    --text-primary: var(--text-1-dark);
    --text-secondary: var(--text-2-dark);
    --text-muted: var(--text-muted-dark);
    --text-on-accent: var(--text-on-accent-dark);
    --accent-primary: var(--accent-primary-dark);
    --accent-primary-hover: var(--accent-primary-hover-dark);
    --accent-primary-active: var(--accent-primary-active-dark);
    --accent-secondary: var(--accent-secondary-dark);
    --accent-secondary-hover: var(--accent-secondary-hover-dark);
    --accent-secondary-active: var(--accent-secondary-active-dark);
    --accent-tertiary: var(--accent-tertiary-dark);
    --border-primary: var(--border-1-dark);
    --border-secondary: var(--border-2-dark);
    --border-accent: var(--border-accent-dark);
    --border-hover: var(--border-hover-dark);
    --border-focus: var(--border-focus-dark);
    --shadow-color: var(--shadow-color-dark);
    --shadow-hover-color: var(--shadow-hover-color-dark);
    --shadow-inset: var(--shadow-inset-dark);
    --shadow-highlight: var(--shadow-highlight-dark);
    --shadow-sm: var(--shadow-sm-dark);
    --shadow-md: var(--shadow-md-dark);
    --shadow-lg: var(--shadow-lg-dark);
    --shadow-xl: var(--shadow-xl-dark);
    --shadow-2xl: var(--shadow-2xl-dark);
    --success: var(--success-dark);
    --error: var(--error-dark);
    --warning: var(--warning-dark);
    --success-bg: var(--success-bg-dark);
    --error-bg: var(--error-bg-dark);
    --warning-bg: var(--warning-bg-dark);
    --success-border: var(--success-border-dark);
    --error-border: var(--error-border-dark);
    --warning-border: var(--warning-border-dark);
    --focus-ring-color: oklch(var(--lightness-brand-dark) var(--chroma-accent) var(--hue-primary) / 0.8);
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    -webkit-tap-highlight-color: transparent;
    word-wrap: break-word;
    font-feature-settings: 'liga' 1, 'calt' 1, 'kern' 1, 'ss01' 1; /* Added stylistic set */
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-smooth: always;
    border-style: solid;
    border-width: 0;
    outline-offset: var(--focus-ring-offset);
}

*:focus {
    outline: none;
}

*:focus-visible {
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    box-shadow: 0 0 0 var(--focus-ring-width) var(--bg-secondary);
    transition: outline var(--anim-duration-fast) var(--transition-easing), box-shadow var(--anim-duration-fast) var(--transition-easing);
    border-radius: var(--border-radius-sm);
}

html {
    scroll-behavior: smooth;
    scroll-snap-type: y mandatory;
    overscroll-behavior-y: contain;
    font-size: 100%;
    scrollbar-gutter: stable both-edges;
    height: 100%;
    -webkit-text-size-adjust: 100%; /* Prevent font scaling on orientation change */
}

body {
    font-family: var(--font-family);
    background-color: var(--bg-primary);
    color: var(--text-primary);
    font-size: var(--font-size-base);
    line-height: var(--line-height-base);
    transition: background-color var(--transition-speed) var(--transition-easing), color var(--transition-speed) var(--transition-easing);
    padding-top: 0;
    overflow-x: hidden;
    min-height: 100%;
    display: flex;
    flex-direction: column;
    /* Subtle background noise/gradient */
    background-image: linear-gradient(rgba(var(--bg-secondary-rgb), 0.02), rgba(var(--bg-secondary-rgb), 0.02)),
                      radial-gradient(ellipse at top left, rgba(var(--bg-secondary-rgb), 0.1) 0%, transparent 50%),
                      radial-gradient(ellipse at bottom right, rgba(var(--bg-tertiary-rgb), 0.1) 0%, transparent 50%);

}

@media (prefers-reduced-motion: reduce) {
    html {
        scroll-behavior: auto !important;
        scroll-snap-type: none !important;
    }
    *, *::before, *::after {
        animation-duration: 1ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 1ms !important;
        scroll-behavior: auto !important;
        transition-delay: 0ms !important;
        animation-delay: 0ms !important;
    }
}

::-webkit-scrollbar {
    width: 12px; /* Slightly slimmer */
    height: 12px;
}
::-webkit-scrollbar-track {
    background-color: color-mix(in srgb, var(--bg-primary) 50%, transparent); /* Subtle track */
    margin-block: var(--space-xs);
    border-radius: 10px;
}
::-webkit-scrollbar-thumb {
    background-color: var(--border-hover); /* Use border color for thumb */
    border-radius: 10px;
    border: 3px solid transparent; /* Thinner border */
    background-clip: padding-box;
    transition: background-color var(--anim-duration-fast) ease-in-out, border-color var(--anim-duration-fast) ease-in-out;
}
::-webkit-scrollbar-thumb:hover {
    background-color: var(--accent-secondary);
}
::-webkit-scrollbar-corner {
    background: transparent;
}
body ::-webkit-scrollbar-thumb {
    border-color: var(--bg-primary); /* Match body background */
}
.container {
    width: 94%;
    max-width: 1300px; /* Slightly wider max */
    margin-left: auto;
    margin-right: auto;
    padding-left: var(--space-l);
    padding-right: var(--space-l);
}

#main-header {
    background-color: color-mix(in srgb, var(--bg-secondary) 80%, transparent);
    backdrop-filter: blur(16px) saturate(140%) brightness(1.05);
    -webkit-backdrop-filter: blur(16px) saturate(140%) brightness(1.05);
    padding: var(--space-s) 0;
    position: sticky;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 1000;
    box-shadow: var(--shadow-md), var(--shadow-highlight); /* Use highlight */
    transition: background-color var(--transition-speed) var(--transition-easing), border-color var(--transition-speed) var(--transition-easing), box-shadow var(--transition-speed) var(--transition-easing);
    border-bottom: 1px solid var(--border-primary);
}
#main-header .container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: var(--space-l);
}
#main-header h1 {
    font-size: calc(var(--font-size-base) * 1.45);
    font-weight: 800;
    margin: 0;
    background: linear-gradient(80deg, var(--accent-primary), var(--accent-primary-hover), var(--accent-tertiary));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    letter-spacing: -0.8px;
    transition: filter 0.3s ease;
}
#main-header h1:hover {
    filter: brightness(1.15);
}
#main-header nav ul {
    list-style: none;
    display: flex;
    gap: var(--space-xl); /* Increased gap */
    align-items: center;
}
#main-header nav a {
    text-decoration: none;
    color: var(--text-secondary);
    font-weight: 500;
    font-size: calc(var(--font-size-base) * 1.05); /* Slightly larger nav links */
    padding: var(--space-s) var(--space-xs);
    border-bottom: 3px solid transparent;
    transition: color var(--transition-speed) var(--transition-easing), border-color var(--transition-speed) var(--transition-easing), transform var(--transition-speed) var(--anim-easing-elegant);
    position: relative;
    letter-spacing: 0.5px;
    display: inline-block;
    overflow: hidden; /* For underline effect */
}
#main-header nav a::after {
    content: '';
    position: absolute;
    width: 100%;
    height: 3px;
    bottom: -3px;
    left: -100%; /* Start fully left */
    background-color: var(--accent-primary);
    transition: left var(--anim-duration-normal) var(--anim-easing-elegant);
    border-radius: 1px;
}
#main-header nav a:hover {
    color: var(--accent-primary-hover);
    transform: translateY(-2px);
}
#main-header nav a:hover::after {
    left: 0; /* Slide in from left */
}
#main-header nav a.active {
    color: var(--accent-primary);
    font-weight: 700;
    border-bottom-color: transparent; /* Use ::after for active underline */
}
#main-header nav a.active::after {
    left: 0; /* Ensure underline is visible */
    background-color: var(--accent-primary);
}
#main-header nav a:focus-visible {
    color: var(--accent-primary);
    border-bottom-color: var(--border-focus);
    background-color: var(--surface-accent);
    border-radius: var(--border-radius-sm);
}


#hero,
.content-section {
    scroll-snap-align: start;
    scroll-margin-top: 100px;
    min-height: 75vh;
    padding: var(--space-xxxl) 0;
    position: relative;
    overflow: hidden; /* Contain pseudo-elements */
}
#hero {
    min-height: 100vh; /* Full viewport height */
    padding: 0;
    scroll-margin-top: 0;
}

@keyframes aurora-super-enhanced {
    0% { background-position: 0% 50%; filter: hue-rotate(-5deg) brightness(1) saturate(1.1); }
    25% { background-position: 100% 0%; filter: hue-rotate(10deg) brightness(1.1) saturate(1.2); }
    50% { background-position: 50% 100%; filter: hue-rotate(0deg) brightness(1.15) saturate(1.25); }
    75% { background-position: 0% 100%; filter: hue-rotate(-10deg) brightness(1.1) saturate(1.2); }
    100% { background-position: 0% 50%; filter: hue-rotate(-5deg) brightness(1) saturate(1.1); }
}
#hero {
    color: var(--text-on-accent-light);
    text-align: center;
    position: relative;
    background: linear-gradient(130deg,
        oklch(from var(--accent-primary-light) calc(l * 0.85) calc(c * 1.3) h),
        oklch(from var(--accent-secondary-light) calc(l * 1.05) c calc(h + 20) / 0.8),
        oklch(from var(--accent-tertiary-light) l calc(c * 1.1) h / 0.7),
        oklch(from var(--accent-primary-light) l calc(c * 0.9) calc(h - 100) / 0.85)
    );
    background-size: 400% 400%;
    animation: aurora-super-enhanced 50s ease-in-out infinite alternate;
    display: flex;
    align-items: center;
    justify-content: center;
}
body.dark-mode #hero {
    color: var(--text-on-accent-dark);
    background: linear-gradient(130deg,
        oklch(from var(--accent-primary-dark) calc(l * 0.8) calc(c * 1.2) h / 0.9),
        oklch(from var(--accent-secondary-dark) calc(l * 1.1) c calc(h + 20) / 0.7),
        oklch(from var(--accent-tertiary-dark) calc(l * 0.95) calc(c * 1.1) h / 0.65),
        oklch(from var(--accent-primary-dark) calc(l * 0.85) calc(c * 0.9) calc(h - 100) / 0.8)
    );
    background-size: 400% 400%;
    animation: aurora-super-enhanced 50s ease-in-out infinite alternate;
}

/* Optional: Add subtle grain overlay */
/*
#hero::after {
    content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.7" numOctaves="3" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity="0.03"/></svg>');
    z-index: 0; pointer-events: none; mix-blend-mode: overlay;
}
*/

#hero .container {
    position: relative;
    z-index: 2;
    max-width: 1000px;
}
#hero h2 {
    font-size: clamp(2.8rem, 1.4rem + 6.5vw, 5.5rem); /* Larger max size */
    margin-bottom: var(--space-l); font-weight: 800; letter-spacing: -3.5px;
    text-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
    color: #fff;
    line-height: 1.05; /* Tighter line height for large text */
    animation: slideDown 1s var(--anim-easing-elegant) both;
    animation-delay: 0.3s;
}
#hero p {
    font-size: clamp(1.2rem, 1rem + 1.5vw, 1.8rem); /* Larger max size */
    margin-bottom: var(--space-xl); opacity: 0.98;
    text-shadow: 0 3px 8px rgba(0, 0, 0, 0.4);
    color: #f5f5f5;
    max-width: 820px;
    margin-left: auto; margin-right: auto;
    line-height: 1.8;
    animation: slideUp 1s var(--anim-easing-elegant) both;
    animation-delay: 0.5s;
}
#hero .btn {
    animation: popIn 0.8s var(--anim-easing-bounce) both;
}
#hero .btn:nth-of-type(1) { animation-delay: 0.8s; }
#hero .btn:nth-of-type(2) { animation-delay: 0.95s; }

@keyframes slideDown { from { opacity: 0; transform: translateY(-50px); filter: blur(5px); } to { opacity: 1; transform: translateY(0); filter: blur(0px);} }
@keyframes slideUp { from { opacity: 0; transform: translateY(50px); filter: blur(5px); } to { opacity: 1; transform: translateY(0); filter: blur(0px); } }
@keyframes popIn { from { opacity: 0; transform: scale(0.6) translateY(10px); filter: blur(3px); } to { opacity: 1; transform: scale(1) translateY(0); filter: blur(0px); } }


.content-section {
    border-bottom: 1px solid var(--border-primary);
    transition: border-color var(--transition-speed) var(--transition-easing), background-color var(--transition-speed) var(--transition-easing);
    position: relative;
    /* Subtle gradient background for sections */
    background: linear-gradient(180deg, transparent 0%, color-mix(in srgb, var(--bg-secondary) 30%, transparent) 100%);
}
.content-section::before {
    content: '';
    position: absolute;
    top: -1px;
    left: 50%;
    transform: translateX(-50%);
    width: 50%; height: 3px; /* Thicker line */
    background: linear-gradient(90deg, transparent, var(--accent-secondary), transparent);
    opacity: 0.4;
    transition: opacity var(--transition-speed) var(--transition-easing), width 0.4s ease;
    filter: blur(0.5px);
}
.content-section:hover::before {
    width: 70%;
    opacity: 0.6;
}
.content-section:last-of-type { border-bottom: none; background: none; }
.content-section:last-of-type::before { display: none; }

.content-section h2 {
    text-align: center;
    font-size: clamp(2.3rem, 1.4rem + 3.5vw, 3.4rem);
    margin-bottom: var(--space-xxl);
    color: var(--text-primary);
    font-weight: 700;
    position: relative;
    padding-bottom: var(--space-l);
    letter-spacing: -2.5px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-l);
    transition: color var(--transition-speed) var(--transition-easing);
}
.content-section h2::after {
    content: '';
    position: absolute;
    bottom: 0; left: 50%;
    transform: translateX(-50%);
    width: 80px; height: 7px; /* Thicker underline */
    background: linear-gradient(90deg,
        oklch(from var(--accent-primary) l calc(c * 0.6) h / 0.1),
        var(--accent-primary),
        oklch(from var(--accent-secondary) l calc(c * 0.8) calc(h - 30) / 0.5), /* Add secondary color blend */
        oklch(from var(--accent-primary) l calc(c * 0.6) h / 0.1)
    );
    border-radius: 4px;
    transition: background var(--transition-speed) var(--transition-easing), width var(--transition-speed) var(--anim-easing-elegant);
    opacity: 1;
    filter: blur(1.5px);
}
.content-section:hover h2::after {
    width: 160px; /* Wider on hover */
}
.content-section h2 i.fas {
    font-size: 1em;
    transition: color var(--transition-speed) var(--transition-easing), transform 0.6s var(--anim-easing-elastic);
    background: linear-gradient(70deg, var(--accent-primary), var(--accent-secondary-hover));
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    filter: drop-shadow(0 2px 3px rgba(0,0,0,0.1));
}
.content-section:hover h2 i.fas {
    transform: scale(1.4) rotate(-12deg) translateY(-4px);
    filter: drop-shadow(0 4px 6px color-mix(in oklch, var(--accent-primary) l c h / 0.2));
}


#main-footer {
    background-color: var(--bg-tertiary);
    color: var(--text-muted);
    text-align: center;
    padding: var(--space-xl) 0;
    margin-top: auto; /* Push footer to bottom */
    font-size: var(--font-size-sm);
    border-top: 1px solid var(--border-primary);
    transition: background-color var(--transition-speed) var(--transition-easing), color var(--transition-speed) var(--transition-easing), border-color var(--transition-speed) var(--transition-easing);
    position: relative;
}
#main-footer::before { /* Subtle top gradient */
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 5px;
    background: linear-gradient(180deg, color-mix(in srgb, var(--border-primary) 50%, transparent), transparent);
    opacity: 0.7;
    pointer-events: none;
}
#main-footer p {
    line-height: 1.7;
}
.btn {
    padding: calc(var(--space-s) + 5px) calc(var(--space-xl) + 5px); /* Increased padding */
    font-size: var(--font-size-sm);
    font-weight: 700; /* Bolder */
    text-decoration: none;
    border-radius: var(--border-radius-md);
    cursor: pointer;
    display: inline-block;
    margin: var(--space-s);
    border: 1px solid transparent;
    box-shadow: var(--shadow-lg), var(--shadow-highlight), 0 0 0 0 color-mix(in oklch, var(--accent-primary) l c h / 0); /* Added highlight */
    vertical-align: middle;
    position: relative;
    overflow: hidden;
    transition: transform var(--transition-speed) var(--anim-easing-elegant), box-shadow var(--transition-speed) var(--anim-easing-elegant), background-position var(--transition-speed) var(--anim-easing-elegant), border-color var(--transition-speed) var(--anim-easing-elegant), color var(--transition-speed) var(--anim-easing-elegant);
    z-index: 1;
    background-size: 250% auto; /* Larger size for smoother gradient shift */
    letter-spacing: 1px; /* Increased spacing */
    text-transform: uppercase;
    will-change: transform, box-shadow;
    -webkit-mask-image: radial-gradient(white, black); /* Fix potential jagged edges on overflow:hidden */
}

/* Refined shine effect */
.btn::before {
    content: '';
    position: absolute;
    top: -10%; left: -200%;
    width: 150%; height: 120%;
    background: linear-gradient(100deg, transparent 35%, color-mix(in srgb, white 35%, transparent) 50%, transparent 65%);
    transition: left var(--anim-duration-slow) var(--anim-easing-elegant);
    z-index: 1; /* Above background, below text */
    transform: skewX(-20deg);
    opacity: 0.6;
    pointer-events: none; /* Allow clicks through */
}

body.dark-mode .btn::before {
     background: linear-gradient(100deg, transparent 35%, color-mix(in srgb, white 20%, transparent) 50%, transparent 65%);
     opacity: 0.4;
}


.btn:hover::before {
    left: 150%;
    transition-duration: var(--anim-duration-xslow); /* Slower shine */
}

.btn-primary {
    background-image: linear-gradient(120deg, var(--accent-primary-active) 0%, var(--accent-primary) 40%, var(--accent-primary-hover) 100%);
    color: var(--text-on-accent);
    border-color: color-mix(in srgb, var(--accent-primary-active) 40%, black 50%);
}
.btn-secondary {
    background-image: linear-gradient(120deg, var(--accent-secondary-active) 0%, var(--accent-secondary) 40%, var(--accent-secondary-hover) 100%);
    color: var(--text-on-accent);
    border-color: color-mix(in srgb, var(--accent-secondary-active) 40%, black 50%);
}
.btn:hover {
    background-position: 100% center; /* Complete gradient shift */
    transform: translateY(-6px) scale(1.05); /* More lift */
    box-shadow: var(--shadow-2xl), var(--shadow-highlight), 0 0 35px 8px color-mix(in oklch, var(--accent-primary) l c h / 0.3); /* Stronger glow */
    color: var(--text-on-accent);
    border-color: transparent;
}
.btn:active {
    transform: translateY(-1px) scale(0.98); /* More noticeable press */
    box-shadow: var(--shadow-md), var(--shadow-inset);
    background-position: left center;
    transition-duration: var(--anim-duration-fast);
}
.btn:focus-visible {
    background-position: 100% center;
    border-color: var(--border-focus);
    box-shadow: 0 0 0 var(--focus-ring-offset) var(--bg-secondary), 0 0 0 calc(var(--focus-ring-offset) + var(--focus-ring-width)) var(--focus-ring-color), var(--shadow-lg);
}
#hero .btn {
    color: #fff;
    text-shadow: 1px 1px 5px oklch(0 0 0 / 0.6);
    box-shadow: var(--shadow-xl), 0 8px 22px -8px oklch(0 0 0 / 0.4);
}
body.dark-mode #hero .btn {
    color: var(--text-on-accent-dark);
    text-shadow: 1px 1px 5px oklch(0 0 0 / 0.7);
     box-shadow: var(--shadow-xl-dark), 0 8px 22px -8px oklch(0 0 0 / 0.5);
}
#hero .btn:hover {
    color: #fff;
    box-shadow: var(--shadow-2xl), 0 12px 35px -12px var(--accent-primary), 0 0 40px 12px color-mix(in oklch, var(--accent-primary) l c h / 0.35);
}
body.dark-mode #hero .btn:hover {
    color: var(--text-on-accent-dark);
    box-shadow: var(--shadow-2xl-dark), 0 12px 35px -12px var(--accent-primary-dark), 0 0 40px 12px color-mix(in oklch, var(--accent-primary-dark) l c h / 0.4);
}
#hero .btn:focus-visible {
    box-shadow: 0 0 0 var(--focus-ring-offset) rgba(255,255,255,0.7), 0 0 0 calc(var(--focus-ring-offset) + var(--focus-ring-width)) var(--accent-primary-light), var(--shadow-xl);
}
body.dark-mode #hero .btn:focus-visible {
    box-shadow: 0 0 0 var(--focus-ring-offset) rgba(0,0,0,0.7), 0 0 0 calc(var(--focus-ring-offset) + var(--focus-ring-width)) var(--accent-primary-dark), var(--shadow-xl-dark);
}

.card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(min(100%, 330px), 1fr)); /* Slightly larger min */
    gap: var(--space-xl) var(--space-l); /* Row and column gap */
}
.card {
    background: linear-gradient(155deg, var(--surface-2), var(--surface-3));
    border-radius: var(--border-radius-xl); /* Larger radius */
    box-shadow: var(--shadow-lg), var(--shadow-highlight);
    padding: var(--space-xl);
    display: flex; flex-direction: column; align-items: center; text-align: center;
    border: 1px solid var(--border-2);
    transition: transform var(--anim-duration-slow) var(--anim-easing-elegant),
                box-shadow var(--anim-duration-slow) var(--anim-easing-elegant),
                border-color var(--anim-duration-slow) var(--anim-easing-elegant),
                opacity var(--anim-duration-slow) ease,
                filter var(--anim-duration-slow) ease,
                background var(--transition-speed) var(--transition-easing);
    position: relative;
    overflow: hidden;
    transform-style: preserve-3d;
    will-change: transform, box-shadow, border-color;
    animation: fadeInUp 1s var(--anim-easing-elegant) both;
    backface-visibility: hidden;
}

/* Enhanced card lighting/border effect on hover */
.card::after {
    content: "";
    position: absolute;
    inset: -1px; /* Cover border */
    border-radius: inherit;
    background: conic-gradient(from var(--angle, 0deg),
        transparent 0%,
        color-mix(in oklch, var(--accent-primary) l c h / 0.5) 10%,
        transparent 35%);
    animation: card-border-spin 4s linear infinite paused;
    opacity: 0;
    transition: opacity 0.4s ease-in-out;
    z-index: 0;
}
@property --angle { syntax: '<angle>'; initial-value: 0deg; inherits: false; }
@keyframes card-border-spin { to { --angle: 360deg; } }

.card:hover::after {
    opacity: 1;
    animation-play-state: running;
}

.card:hover {
    transform: perspective(2000px) rotateX(4deg) rotateY(-5deg) scale(1.05) translateY(-10px); /* Enhanced tilt */
    box-shadow: 0 40px 60px -25px var(--shadow-hover-color), var(--shadow-2xl), var(--shadow-highlight);
    border-color: transparent; /* Hide base border, rely on ::after */
    z-index: 10;
    background: linear-gradient(155deg, var(--surface-3), var(--surface-4));
}
.card-grid:has(.card:hover) .card:not(:hover) {
    opacity: 0.4;
    filter: blur(3px) saturate(70%);
    transform: scale(0.96);
    transition-duration: var(--anim-duration-normal);
}

/* Content needs higher z-index than border effect */
.card > * { position: relative; z-index: 1;}

.card-icon {
    width: 85px; height: 85px; /* Larger icon */
    border-radius: 50%;
    background: linear-gradient(140deg, var(--surface-4), var(--surface-3));
    display: flex; justify-content: center; align-items: center;
    margin-bottom: var(--space-l);
    transition: background 0.4s ease, transform 0.5s var(--anim-easing-elastic), box-shadow 0.4s ease;
    border: none;
    box-shadow: var(--shadow-lg), var(--shadow-inset);
    z-index: 2; /* Ensure icon is above border */
}
.card:hover .card-icon {
    background: linear-gradient(140deg, var(--surface-accent), color-mix(in srgb, var(--accent-primary) 30%, var(--surface-4)));
    transform: scale(1.3) translateY(-12px) rotate(10deg);
    box-shadow: var(--shadow-xl), 0 0 20px 5px color-mix(in oklch, var(--accent-primary) l c h / 0.25);
}
.card-icon i.fas {
    font-size: 2.8rem;
    color: var(--accent-primary);
    transition: color 0.4s ease, transform 0.6s var(--anim-easing-elastic);
    filter: drop-shadow(0 1px 2px rgba(0,0,0,0.1));
}
.card:hover .card-icon i.fas {
    transform: rotate(-20deg) scale(1.2);
    color: var(--accent-primary-hover);
    filter: drop-shadow(0 3px 4px color-mix(in oklch, var(--accent-primary) l c h / 0.2));
}
.card h3 {
    font-size: calc(var(--font-size-lg) * 1.1); /* Larger title */
    font-weight: 700; color: var(--text-primary);
    margin-bottom: var(--space-m);
    transition: color var(--transition-speed) var(--transition-easing);
    z-index: 2; position: relative;
    line-height: 1.35;
}
.card p {
    font-size: var(--font-size-base); color: var(--text-secondary);
    margin-bottom: var(--space-l); flex-grow: 1;
    transition: color var(--transition-speed) var(--transition-easing);
    line-height: 1.75;
    z-index: 2; position: relative;
}
.audience-tags {
    margin-bottom: var(--space-l); display: flex; gap: var(--space-s); flex-wrap: wrap; justify-content: center; z-index: 2; position: relative;
}
.audience-tag {
    display: inline-block;
    font-size: calc(var(--font-size-sm) * 0.9);
    font-weight: 700;
    text-transform: uppercase;
    padding: calc(var(--space-xxs) + 1px) calc(var(--space-s) + 2px);
    border-radius: var(--border-radius-sm);
    background: linear-gradient(145deg, var(--surface-4), var(--surface-3)); /* Subtle gradient */
    color: var(--text-muted);
    border: 1px solid var(--border-secondary);
    transition: all var(--anim-duration-fast) ease;
    letter-spacing: 0.7px;
    box-shadow: var(--shadow-inset);
}
.card:hover .audience-tag {
    transform: scale(1.04);
}
.audience-tag:hover {
    background: linear-gradient(145deg, var(--accent-primary-hover), var(--accent-primary)); /* Gradient background */
    color: var(--text-on-accent);
    border-color: transparent;
    transform: scale(1.12) !important; /* More pop */
    box-shadow: var(--shadow-md);
}
.audience-tag.tıp { border-color: #64b5f6; color: #1976d2; background: #e3f2fd;}
.audience-tag.diş { border-color: #81c784; color: #388e3c; background: #e8f5e9;}
body.dark-mode .audience-tag.tıp { border-color: #2196f3; color: #90caf9; background: rgba(33, 150, 243, 0.25);}
body.dark-mode .audience-tag.diş { border-color: #4caf50; color: #a5d6a7; background: rgba(76, 175, 80, 0.25);}

.card-link { /* Style like a button but adapted for card */
    display: inline-block; text-decoration: none;
    color: var(--text-on-accent);
    background-image: linear-gradient(120deg, var(--accent-primary-active) 0%, var(--accent-primary) 40%, var(--accent-primary-hover) 100%);
    font-weight: 600; margin-top: auto;
    padding: var(--space-s) var(--space-l);
    border: 1px solid color-mix(in srgb, var(--accent-primary-active) 40%, black 50%);
    border-radius: var(--border-radius-md);
    transition: all var(--transition-speed) var(--anim-easing-elegant), opacity var(--anim-duration-normal) ease, transform var(--anim-duration-normal) var(--anim-easing-elegant);
    cursor: pointer;
    font-size: var(--font-size-sm);
    opacity: 0; transform: translateY(30px) scale(0.9); /* Start further down and smaller */
    will-change: opacity, transform, box-shadow;
    z-index: 2; position: relative;
    box-shadow: var(--shadow-md), var(--shadow-highlight);
    background-size: 250% auto;
    letter-spacing: 0.8px;
    text-transform: uppercase;
}
.card:hover .card-link {
    opacity: 1;
    transform: translateY(0) scale(1);
    transition-delay: 0.15s; /* Slight delay */
}
.card-link:hover {
    background-position: 100% center;
    transform: scale(1.06) translateY(0) !important; /* Hover scale on link itself */
    box-shadow: var(--shadow-lg), var(--shadow-highlight), 0 0 15px 4px color-mix(in oklch, var(--accent-primary) l c h / 0.2);
    border-color: transparent;
}
.card-link.disabled {
    pointer-events: none; color: var(--text-muted);
    background-image: none;
    background-color: var(--surface-3);
    border-color: var(--border-secondary);
    opacity: var(--disabled-opacity) !important;
    transform: translateY(0) scale(1) !important; /* Ensure correct final position */
    box-shadow: var(--shadow-inset);
}
.card-link:focus-visible {
    opacity: 1; transform: translateY(0) scale(1);
    border-color: var(--border-focus);
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    box-shadow: 0 0 0 var(--focus-ring-offset) var(--bg-secondary), var(--shadow-lg);
}
.card-link.disabled:focus-visible { outline: none; box-shadow: var(--shadow-inset); }


#construction-message {
    animation: popIn 1.2s ease-out both;
    animation-delay: 0.6s;
}
#construction-message p {
    text-align: center; font-style: italic; color: var(--text-muted);
    padding: var(--space-xl) var(--space-l);
    background-color: var(--surface-3);
    border-radius: var(--border-radius-lg); /* Match card radius */
    border: 1px dashed var(--warning-border); /* Use warning color */
    transition: background-color var(--transition-speed) var(--transition-easing), color var(--transition-speed) var(--transition-easing), border-color var(--transition-speed) var(--transition-easing), box-shadow var(--transition-speed) ease;
    display: flex; align-items: center; justify-content: center; gap: var(--space-m);
    box-shadow: var(--shadow-md), var(--shadow-inset);
}
#construction-message:hover {
    box-shadow: var(--shadow-lg), var(--shadow-inset);
    border-color: var(--warning);
}
#construction-message i.fas {
    font-size: 1.7em; color: var(--warning);
    transition: color var(--transition-speed) var(--transition-easing), transform 0.5s var(--anim-easing-bounce);
}
#construction-message:hover i.fas {
    transform: rotate(-18deg) scale(1.15);
}

@keyframes fadeInUp { from { opacity: 0; transform: translateY(40px); filter: blur(2px); } to { opacity: 1; transform: translateY(0); filter: blur(0px); } }
#stats-container, .quiz-main-content {
    display: none;
}
body.quiz-active #stats-container { display: flex; }
body.quiz-active .quiz-main-content { display: block; }
body.quiz-active #homepage-content { display: none; }
body.quiz-active { padding-top: 85px; } /* Re-adjust based on final stats bar height */
@media (max-width: 992px) { body.quiz-active { padding-top: 100px; } }
@media (max-width: 768px) { body.quiz-active { padding-top: 120px; } }
@media (max-width: 480px) { body.quiz-active { padding-top: 150px; } }

#stats-container {
    background-color: color-mix(in srgb, var(--bg-overlay) 90%, transparent); /* Use overlay variable */
    backdrop-filter: blur(18px) saturate(150%) brightness(1.1);
    -webkit-backdrop-filter: blur(18px) saturate(150%) brightness(1.1);
    border-bottom: 1px solid var(--border-1);
    padding: var(--space-s) 5%;
    width: 100%; box-sizing: border-box;
    position: fixed; top: 0; left: 0; z-index: 999;
    justify-content: center; align-items: center; flex-wrap: wrap;
    gap: var(--space-m) var(--space-xl); /* Increased gap */
    box-shadow: var(--shadow-lg); /* Stronger shadow */
    transition: background-color var(--transition-speed) var(--transition-easing), border-color var(--transition-speed) var(--transition-easing), box-shadow var(--transition-speed) var(--transition-easing);
    min-height: 75px;
}
.stat-item {
    font-size: var(--font-size-sm); color: var(--text-muted); text-align: center;
    display: flex; flex-direction: column; align-items: center;
    line-height: 1.35; transition: color var(--transition-speed) var(--transition-easing);
    white-space: nowrap;
}
.stat-item span:not(.score-value) {
    font-weight: 600; color: var(--accent-primary); font-size: 1.15em; /* Slightly larger */
    min-width: 32px; display: inline-block; margin-top: var(--space-xxs);
    transition: color var(--transition-speed) var(--transition-easing), transform 0.3s ease;
}
.stat-item:hover span:not(.score-value) {
    transform: scale(1.05); /* Subtle hover */
}
.score-value {
    font-weight: 700; min-width: 60px; display: inline-block; text-align: center;
    transition: color var(--anim-duration-slow) var(--anim-easing-elegant), transform 0.4s var(--anim-easing-elastic);
    font-size: 1.25em; padding: 2px 5px; border-radius: var(--border-radius-sm);
    will-change: color, transform; /* Optimize animation */
}
#stats-status-message {
    font-weight: 600;
    transition: all var(--transition-speed) var(--anim-easing-elegant);
    font-size: var(--font-size-sm);
    padding: calc(var(--space-xs) + 2px) calc(var(--space-m) + 2px); /* Slightly more padding */
    border-radius: var(--border-radius-md);
    color: var(--text-primary); background-color: var(--surface-accent);
    border: 1px solid var(--border-accent); text-align: center;
    flex-basis: 100%; margin-top: var(--space-s); order: 100;
    box-shadow: var(--shadow-sm), var(--shadow-inset);
}
@media (min-width: 769px) {
     #stats-status-message { flex-basis: auto; margin-top: 0; }
}

/* More distinct status messages */
.success-message { color: var(--success) !important; background-color: var(--success-bg) !important; border-color: var(--success-border) !important; box-shadow: 0 0 10px 2px color-mix(in oklch, var(--success) l c h / 0.2), var(--shadow-inset); }
.improvement-message { color: var(--warning) !important; background-color: var(--warning-bg) !important; border-color: var(--warning-border) !important; box-shadow: 0 0 10px 2px color-mix(in oklch, var(--warning) l c h / 0.15), var(--shadow-inset); }
.final-review-message { color: var(--text-secondary) !important; background-color: var(--surface-3) !important; border-color: var(--border-secondary) !important; box-shadow: var(--shadow-sm), var(--shadow-inset); }

.progress-stat-container {
    width: 200px; /* Wider */
    text-align: center; font-size: var(--font-size-sm); color: var(--text-muted);
    line-height: 1.25; transition: color var(--transition-speed) var(--transition-easing);
}
#stats-round-progress {
    font-weight: 600; color: var(--accent-primary); display: block;
    margin-top: var(--space-xxs); min-height: 1.25em;
    transition: color var(--transition-speed) var(--transition-easing), opacity var(--transition-speed) var(--transition-easing);
    font-size: 1.15em; opacity: 0;
    animation: fadeIn 0.6s var(--anim-easing-elegant) forwards;
}
#progress-bar-track {
    background-color: var(--surface-4); border-radius: 12px; /* More rounded */
    height: 12px; /* Thicker */
    width: 100%; margin-top: var(--space-xs); overflow: hidden; position: relative;
    transition: background-color var(--transition-speed) var(--transition-easing);
    box-shadow: var(--shadow-inset);
}
@keyframes progress-stripes-super-enhanced { 0% { background-position: 1.8rem 0; opacity: 0.8; } 50% { opacity: 1; } 100% { background-position: 0 0; opacity: 0.8;} }

#progress-bar-fill {
    background-color: var(--accent-primary);
    background-image: linear-gradient(45deg, color-mix(in srgb, white 18%, transparent) 25%, transparent 25%, transparent 50%, color-mix(in srgb, white 18%, transparent) 50%, color-mix(in srgb, white 18%, transparent) 75%, transparent 75%, transparent);
    background-size: 1.8rem 1.8rem; /* Larger stripes */
    height: 100%; width: 0%; border-radius: 12px;
    transition: width var(--anim-duration-slow) var(--anim-easing-decelerate), background-color var(--transition-speed) var(--transition-easing);
    accent-color: var(--accent-primary);
    animation: progress-stripes-super-enhanced 1.2s linear infinite;
    will-change: width;
    box-shadow: inset 0 -1px 1px rgba(0,0,0,0.1), inset 0 1px 1px rgba(255,255,255,0.1); /* Subtle inner shadow */
}
body.dark-mode #progress-bar-fill {
     background-image: linear-gradient(45deg, color-mix(in srgb, black 15%, transparent) 25%, transparent 25%, transparent 50%, color-mix(in srgb, black 15%, transparent) 50%, color-mix(in srgb, black 15%, transparent) 75%, transparent 75%, transparent);
     box-shadow: inset 0 -1px 1px rgba(0,0,0,0.2), inset 0 1px 1px rgba(255,255,255,0.05);
}

.quiz-main-content {
    width: 94%; max-width: 900px; /* Wider quiz area */
    margin: var(--space-xxl) auto var(--space-xl) auto; flex-grow: 1;
}
#quiz-container,
#result-container,
#learning-offer-container,
#learning-round-container,
#final-review-container {
    background-color: color-mix(in srgb, var(--bg-overlay) 95%, transparent);
    backdrop-filter: blur(12px) saturate(110%);
    -webkit-backdrop-filter: blur(12px) saturate(110%);
    padding: var(--space-xl) var(--space-xxl);
    border-radius: var(--border-radius-xl); /* Larger radius */
    box-shadow: var(--shadow-xl); /* Stronger shadow */
    margin-bottom: var(--space-xl); display: none; text-align: center;
    animation: popIn 0.8s var(--anim-easing-elegant) both;
    transition: background-color var(--transition-speed) var(--transition-easing), box-shadow var(--transition-speed) var(--transition-easing), border-color var(--transition-speed) var(--transition-easing);
    border: 1px solid var(--border-1);
}
#quiz-container { display: block; }

#quiz-container h2, #result-container h2, #learning-offer-container h3, #learning-round-container h3, #final-review-container h3 {
    color: var(--text-primary); margin-bottom: var(--space-xl); font-weight: 700;
    line-height: 1.35; letter-spacing: -1.2px;
    transition: color var(--transition-speed) var(--transition-easing);
    text-align: center; font-size: var(--font-size-xl); position: relative;
    padding-bottom: var(--space-l);
}
#quiz-container h2::after, #result-container h2::after, #learning-offer-container h3::after, #learning-round-container h3::after, #final-review-container h3::after {
    content: ''; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 90px; height: 6px;
    background: linear-gradient(90deg, color-mix(in oklch, var(--accent-primary) l c h / 0.15), var(--accent-primary), color-mix(in oklch, var(--accent-primary) l c h / 0.15));
    border-radius: 3px; transition: background var(--transition-speed) var(--transition-easing), width 0.5s var(--anim-easing-elegant); opacity: 1; filter: blur(1px);
}
#quiz-container:hover h2::after, #result-container:hover h2::after, #learning-offer-container:hover h3::after, #learning-round-container:hover h3::after, #final-review-container:hover h3::after {
    width: 140px;
}

#question {
    font-size: calc(var(--font-size-lg) * 1.05); /* Larger question text */
    margin-bottom: var(--space-xl); min-height: 60px; color: var(--text-primary);
    text-align: left; line-height: 1.75; font-weight: 500;
    transition: color var(--transition-speed) var(--transition-easing), background-color var(--transition-speed) var(--transition-easing);
    padding: var(--space-m) var(--space-l); background-color: var(--surface-3);
    border-radius: var(--border-radius-lg); box-shadow: var(--shadow-inset), var(--shadow-highlight);
    border-left: 4px solid var(--accent-secondary); /* Accent border */
}

@keyframes checked-pulse-super-enhanced {
    0% { transform: scale(1); box-shadow: var(--shadow-md), var(--shadow-inset); border-color: var(--accent-primary);}
    50% { transform: scale(1.02); box-shadow: var(--shadow-lg), var(--shadow-inset), 0 0 15px 3px color-mix(in oklch, var(--accent-primary) l c h / 0.2); border-color: var(--accent-primary-hover);}
    100% { transform: scale(1); box-shadow: var(--shadow-md), var(--shadow-inset); border-color: var(--accent-primary);}
}
@keyframes scaleRotateIn-super-enhanced {
    from { opacity: 0; transform: translateY(-50%) scale(0.2) rotate(-90deg); filter: blur(3px); }
    to { opacity: 1; transform: translateY(-50%) scale(1) rotate(0deg); filter: blur(0px); }
}

#options { display: flex; flex-direction: column; gap: calc(var(--space-m) + 2px); }
.option-label {
    display: flex; align-items: center;
    padding: calc(var(--space-m) + 2px) calc(var(--space-l) + var(--space-l)) calc(var(--space-m) + 2px) calc(var(--space-l) + 2px); /* More padding */
    background-color: var(--surface-3); border: 1px solid var(--border-2);
    border-radius: var(--border-radius-lg); cursor: pointer;
    transition: all var(--transition-speed) var(--anim-easing-elegant);
    text-align: left; position: relative; overflow: hidden;
    will-change: transform, box-shadow, border-color, background-color;
    box-shadow: var(--shadow-md), var(--shadow-inset), var(--shadow-highlight);
}
.option-label:hover {
    border-color: var(--border-hover); background-color: var(--surface-4);
    box-shadow: 0 0 0 4px color-mix(in oklch, var(--accent-secondary) l c h / 0.25), var(--shadow-lg), var(--shadow-inset), var(--shadow-highlight); /* Enhanced focus ring */
    transform: translateX(10px) scale(1.015); /* More pronounced hover */
}
.option-label:has(input:checked) {
    border-color: var(--accent-primary); background-color: var(--surface-accent);
    box-shadow: var(--shadow-lg), var(--shadow-inset), var(--shadow-highlight);
    transform: translateX(0) scale(1);
    animation: checked-pulse-super-enhanced 1.2s var(--anim-easing-elegant);
}
.option-label input[type="radio"] {
    margin-right: calc(var(--space-m) + 2px); flex-shrink: 0; transform: scale(1.35);
    cursor: pointer; accent-color: var(--accent-primary);
    transition: transform 0.3s var(--anim-easing-elastic);
    filter: drop-shadow(0 1px 1px rgba(0,0,0,0.1));
}
.option-label:hover input[type="radio"] { transform: scale(1.45); }
.option-label span:not(.feedback-icon) {
    color: var(--text-secondary); flex-grow: 1; line-height: 1.65;
    transition: color var(--transition-speed) var(--transition-easing);
}
.option-label:has(input:checked) span:not(.feedback-icon) { color: var(--text-primary); font-weight: 600; }

.option-label.correct-option { background-color: var(--success-bg) !important; border-color: var(--success) !important; animation: none !important; box-shadow: 0 5px 12px color-mix(in oklch, var(--success) l c h / 0.3), var(--shadow-inset), var(--shadow-highlight) !important; transform: scale(1.015) !important; }
.option-label.correct-option span:not(.feedback-icon) { color: var(--success); font-weight: 700;}
.option-label.correct-option:hover { background-color: color-mix(in srgb, var(--success-bg) 75%, black 6%) !important; }

.option-label.incorrect-option { background-color: var(--error-bg) !important; border-color: var(--error) !important; opacity: 0.9; animation: none !important; box-shadow: 0 5px 12px color-mix(in oklch, var(--error) l c h / 0.3), var(--shadow-inset), var(--shadow-highlight) !important; transform: scale(1.015) !important; }
.option-label.incorrect-option span:not(.feedback-icon) { color: var(--error); }
.option-label.incorrect-option:hover { background-color: color-mix(in srgb, var(--error-bg) 75%, black 6%) !important;}
.option-label.incorrect-option.user-selected { opacity: 1.0; }
.option-label.incorrect-option.user-selected span:not(.feedback-icon) { font-weight: 600; }

.options-disabled .option-label { pointer-events: none; opacity: var(--disabled-opacity); filter: saturate(30%); }
.options-disabled .option-label:hover { transform: none; box-shadow: var(--shadow-md), var(--shadow-inset), var(--shadow-highlight); background-color: var(--surface-3); border-color: var(--border-2); }
.options-disabled .option-label.correct-option, .options-disabled .option-label.user-selected.incorrect-option { opacity: 1; filter: none;}

.feedback-icon {
    position: absolute; right: var(--space-l); top: 50%;
    transform: translateY(-50%) scale(0.8); font-size: 1.8em; /* Larger icon */
    font-weight: bold; opacity: 0; will-change: transform, opacity;
    transition: color 0.3s ease; filter: drop-shadow(1px 1px 2px rgba(0,0,0,0.2));
}
.option-label.correct-option .feedback-icon.correct,
.option-label.incorrect-option.user-selected .feedback-icon.incorrect {
    animation: scaleRotateIn-super-enhanced 0.7s var(--anim-easing-elastic) forwards;
}
.feedback-icon.correct { color: var(--success); }
.feedback-icon.incorrect { color: var(--error); }
.option-label:focus-visible {
    border-color: var(--border-focus);
    box-shadow: 0 0 0 var(--focus-ring-offset) var(--bg-secondary), 0 0 0 calc(var(--focus-ring-offset) + var(--focus-ring-width)) var(--focus-ring-color), var(--shadow-lg), var(--shadow-inset), var(--shadow-highlight);
}

/* Ensure quiz buttons match the enhanced .btn style */
.quiz-main-content button:not(.explanation-toggle),
#stats-container button:not(.explanation-toggle) {
    padding: calc(var(--space-s) + 5px) calc(var(--space-xl) + 5px);
    font-size: var(--font-size-sm); font-weight: 700; border: none;
    border-radius: var(--border-radius-md); cursor: pointer;
    margin-top: var(--space-xl); margin-right: var(--space-m);
    transition: all var(--transition-speed) var(--anim-easing-elegant);
    box-shadow: var(--shadow-lg), var(--shadow-highlight);
    vertical-align: middle; line-height: 1.5; position: relative; overflow: hidden;
    z-index: 1; background-size: 250% auto; letter-spacing: 1px;
    text-transform: uppercase; will-change: transform, box-shadow;
}
.quiz-main-content button:not(.explanation-toggle):last-child { margin-right: 0; }
.quiz-main-content button:not(.explanation-toggle) { background-image: linear-gradient(120deg, var(--accent-primary-active) 0%, var(--accent-primary) 40%, var(--accent-primary-hover) 100%); color: var(--text-on-accent); border: 1px solid color-mix(in srgb, var(--accent-primary-active) 40%, black 50%); }
.quiz-main-content button:not(.explanation-toggle).secondary { background-image: linear-gradient(120deg, var(--accent-secondary-active) 0%, var(--accent-secondary) 40%, var(--accent-secondary-hover) 100%); color: var(--text-on-accent); border: 1px solid color-mix(in srgb, var(--accent-secondary-active) 40%, black 50%); }

.quiz-main-content button:not(.explanation-toggle):hover {
    background-position: 100% center; transform: translateY(-6px) scale(1.05);
    box-shadow: var(--shadow-2xl), var(--shadow-highlight), 0 0 30px 7px color-mix(in oklch, var(--accent-primary) l c h / 0.25);
    color: var(--text-on-accent); border-color: transparent;
}
.quiz-main-content button:not(.explanation-toggle):active { transform: translateY(-1px) scale(0.98); box-shadow: var(--shadow-md), var(--shadow-inset); background-position: left center; transition-duration: var(--anim-duration-fast); }
.quiz-main-content button:not(.explanation-toggle):disabled { background-image: none !important; background-color: color-mix(in oklch, var(--accent-primary) 20%, transparent) !important; color: color-mix(in oklch, var(--text-on-accent) 30%, transparent) !important; cursor: not-allowed; box-shadow: none !important; transform: none !important; opacity: var(--disabled-opacity); border-color: transparent !important; }
.quiz-main-content button:not(.explanation-toggle).secondary:disabled { background-color: color-mix(in oklch, var(--accent-secondary) 25%, transparent) !important; }
.quiz-main-content button:not(.explanation-toggle):focus-visible {
    background-position: 100% center; border-color: var(--border-focus);
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    box-shadow: 0 0 0 var(--focus-ring-offset) var(--bg-secondary), var(--shadow-lg);
}

/* Enhanced Explanation Toggle */
button.explanation-toggle {
    font-size: calc(var(--font-size-sm) * 0.95);
    padding: var(--space-xs) var(--space-s);
    margin-left: var(--space-m); margin-top: -2px; vertical-align: middle;
    background-color: var(--surface-4); color: var(--accent-secondary);
    border: 1px solid var(--border-secondary); box-shadow: var(--shadow-sm), var(--shadow-inset);
    transition: all var(--transition-speed) var(--anim-easing-elegant);
    border-radius: var(--border-radius-sm); font-weight: 600; /* Bolder */
    cursor: pointer; letter-spacing: 0.5px;
}
button.explanation-toggle:hover {
    background-color: var(--surface-accent); border-color: var(--border-hover);
    transform: scale(1.06); color: var(--accent-primary-hover); box-shadow: var(--shadow-md);
}
button.explanation-toggle:active { transform: scale(0.96); }
button.explanation-toggle:focus-visible {
    border-color: var(--border-focus);
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    box-shadow: 0 0 0 var(--focus-ring-offset) var(--bg-secondary), var(--shadow-sm);
}

#feedback { display: none; margin-top: var(--space-l); font-weight: 600; /* Bolder feedback */ font-size: calc(var(--font-size-base) * 1.1); padding: var(--space-m); border-radius: var(--border-radius-md); text-align: center; box-shadow: var(--shadow-md); }
/* Feedback styling will depend on context (warning, error, success) */

#result-container p, #learning-offer-container p, #final-review-container > p {
    font-size: calc(var(--font-size-lg)*1.05); line-height: 1.75; margin-bottom: var(--space-l);
    text-align: left; color: var(--text-secondary);
    transition: color var(--transition-speed) ease-in-out;
}
#score-info {
    font-weight: 500; font-size: var(--font-size-lg); color: var(--text-primary);
    text-align: center; margin-bottom: var(--space-xl); line-height: 1.8;
    background-color: var(--surface-3); padding: var(--space-l);
    border-radius: var(--border-radius-lg); border: 1px solid var(--border-secondary);
    transition: color var(--transition-speed) ease-in-out, background-color var(--transition-speed) ease-in-out, border-color var(--transition-speed) ease-in-out;
    box-shadow: var(--shadow-inset), var(--shadow-highlight);
}
#learning-round-container, #final-review-container {
    text-align: left;
    background-color: color-mix(in srgb, var(--bg-tertiary) 97%, transparent);
    backdrop-filter: blur(10px) saturate(100%);
    -webkit-backdrop-filter: blur(10px) saturate(100%);
    border-radius: var(--border-radius-xl);
}
#learning-round-container > p, #final-review-container > p {
    text-align: center; margin-bottom: var(--space-xl); font-style: italic;
    color: var(--text-muted); font-size: var(--font-size-base);
    transition: color var(--transition-speed) ease-in-out;
    padding: 0 var(--space-m); /* Add horizontal padding */
}
.learning-item {
    margin-bottom: var(--space-xl); padding: var(--space-l); /* Add padding around item */
    border-bottom: 1px solid var(--border-secondary);
    transition: border-color var(--transition-speed) ease-in-out, background-color 0.3s ease;
    border-radius: var(--border-radius-md); /* Rounded corners for items */
    background-color: var(--surface-2); /* Slight background */
}
.learning-item:hover {
     background-color: var(--surface-3);
}
.learning-item:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: var(--space-l); }
.learning-item h4 {
    font-size: calc(var(--font-size-base) * 1.25); color: var(--text-primary);
    margin-bottom: var(--space-m); line-height: 1.5; font-weight: 700; /* Bolder */
    transition: color var(--transition-speed) ease-in-out;
}
.learning-item .answer-line {
    margin-bottom: var(--space-m); font-size: calc(var(--font-size-base)*1.1);
    color: var(--text-secondary); display: flex; align-items: center; flex-wrap: wrap;
    gap: var(--space-s) var(--space-m);
    transition: color var(--transition-speed) ease-in-out;
}
/* Enhanced answer display */
.learning-item .correct-answer, .learning-item .user-answer-incorrect {
    padding: calc(var(--space-xxs) + 1px) calc(var(--space-s) + 1px);
    border-radius: var(--border-radius-sm);
    font-weight: 600; display: inline-flex; align-items: center; gap: var(--space-xs);
    transition: background-color var(--transition-speed) ease-in-out, color var(--transition-speed) ease-in-out, border-color var(--transition-speed) ease-in-out;
    box-shadow: var(--shadow-sm);
}
.learning-item .correct-answer::before { content: '✔'; margin-right: var(--space-xs); }
.learning-item .user-answer-incorrect::before { content: '✘'; margin-right: var(--space-xs); }

.learning-item .correct-answer { color: var(--success); background-color: var(--success-bg); border: 1px solid var(--success-border); }
.learning-item .user-answer-incorrect { color: var(--error); background-color: var(--error-bg); border: 1px solid var(--error-border); font-style: normal; }

.learning-item .explanation {
    font-size: var(--font-size-base); color: var(--text-secondary); margin-top: var(--space-m);
    font-style: normal; line-height: 1.75; padding: var(--space-l);
    background-color: var(--surface-3); /* Slightly darker explanation bg */
    border-radius: var(--border-radius-md); border: 1px solid var(--border-primary);
    display: none; animation: fadeInExplanation-super-enhanced 0.7s var(--anim-easing-elegant);
    transition: all var(--transition-speed) ease-in-out;
    box-shadow: var(--shadow-inset), var(--shadow-highlight);
}
@keyframes fadeInExplanation-super-enhanced {
    from { opacity: 0; transform: translateY(15px) scale(0.97); filter: blur(2px); }
    to { opacity: 1; transform: translateY(0) scale(1); filter: blur(0px); }
}
#learning-round-container button:not(.explanation-toggle),
#final-review-container button:not(.explanation-toggle) {
    display: block; margin: var(--space-xl) auto 0 auto;
}
@keyframes pulseGlow-super-enhanced {
    0%, 100% { box-shadow: var(--shadow-xl), 0 0 20px 6px color-mix(in oklch, var(--accent-primary) l c h / 0.2); transform: scale(1) rotate(0deg); filter: brightness(1); }
    50% { box-shadow: var(--shadow-2xl), 0 0 35px 14px color-mix(in oklch, var(--accent-primary) l c h / 0.3); transform: scale(1.1) rotate(-5deg); filter: brightness(1.1); }
}
#theme-toggle-btn {
    position: fixed; bottom: var(--space-l); right: var(--space-l); z-index: 1001;
    background: linear-gradient(150deg, var(--surface-3), var(--surface-4));
    color: var(--text-secondary);
    border: 1px solid var(--border-primary);
    border-radius: 50%;
    width: 64px; height: 64px; /* Slightly larger */
    font-size: 2rem; /* Larger icon */
    cursor: pointer;
    box-shadow: var(--shadow-xl);
    transition: all var(--transition-speed) var(--anim-easing-elegant), background 0.4s ease;
    display: flex; justify-content: center; align-items: center;
    padding: 0; margin: 0;
    animation: pulseGlow-super-enhanced 6s infinite ease-in-out;
    will-change: transform, box-shadow, filter;
    overflow: hidden;
}
#theme-toggle-btn:hover {
    background: linear-gradient(150deg, var(--surface-accent), color-mix(in srgb, var(--accent-primary) 15%, var(--surface-4)));
    color: var(--accent-primary-hover);
    box-shadow: var(--shadow-2xl); /* Use 2XL shadow */
    transform: scale(1.2) rotate(-35deg); /* More rotation */
    animation-play-state: paused;
    border-color: var(--border-hover);
    filter: brightness(1.1);
}
#theme-toggle-btn:active {
    transform: scale(1.1) rotate(0deg); /* Slightly larger press */
    box-shadow: var(--shadow-lg), var(--shadow-inset);
    animation-play-state: paused;
    transition-duration: var(--anim-duration-fast);
    filter: brightness(1);
}
#theme-toggle-btn:focus-visible {
    animation-play-state: paused;
    border-color: var(--border-focus);
    outline: var(--focus-ring-width) solid var(--focus-ring-color);
    box-shadow: 0 0 0 var(--focus-ring-offset) var(--bg-secondary), var(--shadow-xl);
    filter: brightness(1);
}
#theme-toggle-btn span {
    display: inline-block;
    transition: transform 0.5s var(--anim-easing-elastic);
}
#theme-toggle-btn:hover span {
     transform: scale(1.15) rotate(15deg); /* Rotate icon slightly on hover */
}

/* --- Responsive Styles (Iteration 2) --- */

@media (max-width: 1200px) { /* Added breakpoint for larger adjustments */
    .container { width: 95%; }
    .card-grid { grid-template-columns: repeat(auto-fit, minmax(min(100%, 310px), 1fr)); }
}

@media (max-width: 992px) {
    html { scroll-snap-type: y proximity; }
    .container { padding-left: var(--space-m); padding-right: var(--space-m); }
    #main-header .container { flex-direction: column; gap: var(--space-m); }
    #main-header nav { margin-top: var(--space-s); }
    #main-header nav ul { gap: var(--space-l); }
    #hero h2 { font-size: clamp(2.6rem, 1.4rem + 5vw, 4.5rem); letter-spacing: -2.5px;}
    #hero p { font-size: clamp(1.15rem, 1rem + 1.4vw, 1.6rem); }
    .content-section h2 { font-size: clamp(2.2rem, 1.5rem + 3vw, 3rem); letter-spacing: -2px;}
    .card-grid { grid-template-columns: repeat(auto-fit, minmax(min(100%, 300px), 1fr)); }
    /* Simplify card hover on medium screens */
    .card:hover { transform: perspective(1500px) rotateX(3deg) rotateY(-4deg) scale(1.04) translateY(-8px); }
    .card-grid:has(.card:hover) .card:not(:hover) { opacity: 0.5; filter: blur(2px) saturate(50%); transform: scale(0.97); }
    #stats-container { justify-content: space-around; gap: var(--space-m); padding: var(--space-s) 4%; min-height: 90px;}
    .progress-stat-container { width: 180px; }
    #quiz-container, #result-container, #learning-offer-container, #learning-round-container, #final-review-container { padding: var(--space-l) var(--space-xl); }
}

@media (max-width: 768px) {
    html { scroll-snap-type: none; }
    body:not(.quiz-active) { padding-top: 0; }
    #main-header {
        position: static; background-color: var(--bg-secondary);
        backdrop-filter: none; -webkit-backdrop-filter: none;
        box-shadow: var(--shadow-md), var(--shadow-highlight);
        padding-top: var(--space-m); padding-bottom: var(--space-m);
    }
    #hero { margin-top: 0; min-height: 75vh;}
    #hero, .content-section { scroll-margin-top: 25px; min-height: auto; padding: var(--space-xxl) 0; }
    #hero h2 { font-size: clamp(2.2rem, 1.5rem + 4.5vw, 3.2rem); }
    #hero p { font-size: clamp(1.1rem, 1rem + 1.6vw, 1.5rem); }
    .card-grid { grid-template-columns: 1fr; gap: var(--space-l);}
    /* Very simple card hover for touch */
    .card:hover { transform: translateY(-8px) scale(1.03); box-shadow: var(--shadow-xl), var(--shadow-highlight); }
    .card::after { display: none; } /* Hide animated border */
    .card-grid:has(.card:hover) .card:not(:hover) { opacity: 1; filter: none; transform: scale(1); }
    .card::before { display: none; }
    .card-link { opacity: 1; transform: translateY(0) scale(1); transition-delay: 0s !important;}
    #main-header h1 { text-align: center; font-size: calc(var(--font-size-base) * 1.35); }
    #main-header nav ul { gap: var(--space-m); justify-content: center; flex-wrap: wrap; }
    .content-section { padding: var(--space-xl) 0; }
    .content-section h2 { font-size: calc(var(--font-size-xl) * 1.1); letter-spacing: -1.5px;}
    .content-section h2::after { width: 70px; height: 6px; }
    .content-section:hover h2::after { width: 110px; }
    .content-section:hover h2 i.fas { transform: scale(1.3) rotate(-10deg) translateY(-3px); } /* Slightly reduce icon hover */
    #quiz-container h2, #result-container h2, #learning-offer-container h3, #learning-round-container h3, #final-review-container h3 { font-size: var(--font-size-lg); margin-bottom: var(--space-l); padding-bottom: var(--space-m);}
    #stats-container { padding: var(--space-s); gap: var(--space-xs) var(--space-m); background-color: color-mix(in srgb, var(--bg-overlay) 92%, transparent); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); min-height: 110px;}
    .stat-item { flex-basis: 31%; font-size: var(--font-size-sm); margin: var(--space-xxs); }
    .progress-stat-container { flex-basis: 100%; width: 90%; margin: var(--space-s) auto; order: 99; }
    #stats-status-message { flex-basis: 100%; margin-top: var(--space-m); order: 100; }
    #quiz-container, #result-container, #learning-offer-container, #learning-round-container, #final-review-container { padding: var(--space-l); backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px); border-radius: var(--border-radius-lg);}
    #question { font-size: var(--font-size-base); border-left-width: 3px; }
    #options label { padding: var(--space-m) calc(var(--space-l) + var(--space-xs)) var(--space-m) var(--space-m); }
    .quiz-main-content button:not(.explanation-toggle) { width: 100%; margin: var(--space-l) 0 0 0; padding: var(--space-m); font-size: var(--font-size-sm);}
    .learning-item h4 { font-size: var(--font-size-base); font-weight: 600;}
    .learning-item .answer-line { flex-direction: column; align-items: flex-start; gap: var(--space-s); }
    button.explanation-toggle { margin-left: 0; margin-top: var(--space-m); }
    #theme-toggle-btn { bottom: var(--space-m); right: var(--space-m); width: 56px; height: 56px; font-size: 1.8rem; }
}

@media (max-width: 480px) {
    .container { width: 95%; padding-left: var(--space-m); padding-right: var(--space-m); }
    body.quiz-active { padding-top: 140px; }
    #hero h2 { font-size: var(--font-size-xl); letter-spacing: -1.5px; }
    #hero p { font-size: var(--font-size-base); }
    .btn { width: calc(100% - var(--space-l)); margin: var(--space-m) auto; display: block; padding: var(--space-m); font-size: calc(var(--font-size-sm)*0.9); letter-spacing: 0.8px;}
    #main-header h1 { font-size: calc(var(--font-size-base) * 1.25); }
    #main-header nav a { font-size: calc(var(--font-size-base) * 0.95); padding: var(--space-s) var(--space-xs);}
    #main-header nav ul { gap: var(--space-m); }
    .content-section h2 { font-size: var(--font-size-lg); letter-spacing: -1px;}
    .card { padding: var(--space-l); border-radius: var(--border-radius-lg);}
    .card h3 { font-size: var(--font-size-lg); }
    .card-icon { width: 75px; height: 75px; font-size: 2.5rem;}
    #stats-container { gap: var(--space-xs); min-height: 140px; }
    .stat-item { flex-basis: 46%; font-size: calc(var(--font-size-sm)*0.92); }
    .score-value { font-size: 1.1em; min-width: 48px; }
    .progress-stat-container { width: 95%; }
    #quiz-container, #result-container, #learning-offer-container, #learning-round-container, #final-review-container { padding: var(--space-m); border-radius: var(--border-radius-md);}
    #quiz-container h2, #result-container h2, #learning-offer-container h3, #learning-round-container h3, #final-review-container h3 { font-size: calc(var(--font-size-lg) * 0.9); padding-bottom: var(--space-m);}
    #question { font-size: var(--font-size-base); }
    #options label { padding: var(--space-m) var(--space-l) var(--space-m) var(--space-m); }
    .option-label input[type="radio"] { transform: scale(1.3); margin-right: var(--space-m); }
    .feedback-icon { right: var(--space-m); font-size: 1.5em; }
    #theme-toggle-btn { width: 52px; height: 52px; font-size: 1.7rem; bottom: var(--space-m); right: var(--space-m);}
}
    </style>
</head>
<body>

    <header id="main-header">
        <div class="container">
            <div class="logo-container"> <h1>Uzm.Dr. Sait Ramazan Gülbay</h1>
            </div>
            <nav aria-label="Ana Gezinti">
                <ul>
                    <li><a href="#hero" id="nav-home" class="active" aria-current="page">Ana Sayfa</a></li>
                    <li><a href="#konular" id="nav-konular">Konu Anlatımları</a></li>
                    <li><a href="#quizler" id="nav-quizler">Quizler</a></li>
                    <li><a href="#hakkinda" id="nav-hakkinda">Hakkında</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div id="homepage-content">
        <section id="hero" aria-labelledby="hero-heading">
            <div class="container">
                <h2 id="hero-heading">Tıp ve Diş Hekimliği Öğrencileri İçin Gelişmiş Eğitim Kaynakları</h2>
                <p>Güncel, interaktif ders materyalleri, sunumlar ve akıllı quizlerle öğrenme deneyiminizi zenginleştirin.</p>
                <a href="#konular" class="btn btn-secondary">Konu Anlatımları (Geliştiriliyor)</a>
                <a href="#quizler" class="btn btn-primary">İnteraktif Quizler</a>
            </div>
        </section>

        <main class="container">
            <section id="konular" class="content-section" aria-labelledby="konular-heading">
                <h2 id="konular-heading"><i class="fas fa-book-open" aria-hidden="true"></i> Konu Anlatımları</h2>
                <div id="construction-message" role="alert">
                    <p><i class="fas fa-wrench" aria-hidden="true"></i> Bu bölüm geliştirme aşamasındadır. Yakında kapsamlı ders notları ve sunumlar eklenecektir. Anlayışınız için teşekkürler!</p>
                </div>
            </section>

<section id="quizler" class="content-section" aria-labelledby="quizler-heading">
                <h2 id="quizler-heading"><i class="fas fa-question-circle" aria-hidden="true"></i> İnteraktif Quizler</h2>
                <div class="card-grid">
                    <article class="card quiz-card" aria-labelledby="quiz-title-immunoloji_giris_hucreler">
                        <div class="card-icon"><i class="fas fa-shield-alt" aria-hidden="true"></i></div>
                        <h3 id="quiz-title-immunoloji_giris_hucreler">İmmünolojiye Giriş ve İmmün Sistem Hücreleri</h3>
                        <p>İmmünolojinin temelleri ve immün sistemin hücresel elemanları hakkında bilginizi test edin.</p>
                        <div class="audience-tags"><span class="audience-tag diş">Diş</span></div>
                        <a href="#" onclick="event.preventDefault(); startQuiz('immunoloji_giris_hucreler');" class="card-link">Quizi Başlat</a>
                    </article>
                    <article class="card quiz-card" aria-labelledby="quiz-title-antikorlar">
                        <div class="card-icon"><i class="fas fa-shield-virus" aria-hidden="true"></i></div>
                        <h3 id="quiz-title-antikorlar">Antikorlar</h3>
                        <p>İmmünoglobulinlerin yapısı, sınıfları ve fonksiyonları üzerine odaklanın.</p>
                        <div class="audience-tags"><span class="audience-tag diş">Diş</span></div>
                        <a href="#" onclick="event.preventDefault(); startQuiz('antikorlar');" class="card-link">Quizi Başlat</a>
                    </article>
                    <article class="card quiz-card" aria-labelledby="quiz-title-dogal_immun_yanit">
                         <div class="card-icon"><i class="fas fa-fire" aria-hidden="true"></i></div>
                         <h3 id="quiz-title-dogal_immun_yanit">Doğal İmmün Yanıt</h3>
                         <p>Doğuştan gelen bağışıklık mekanizmalarını, reseptörlerini ve kompleman sistemini test edin.</p>
                         <div class="audience-tags"><span class="audience-tag diş">Diş</span></div>
                         <a href="#" onclick="event.preventDefault(); startQuiz('dogal_immun_yanit');" class="card-link">Quizi Başlat</a>
                    </article>
                    <article class="card quiz-card" aria-labelledby="quiz-title-kazanilmis_immun_yanit">
                         <div class="card-icon"><i class="fas fa-bullseye" aria-hidden="true"></i></div>
                         <h3 id="quiz-title-kazanilmis_immun_yanit">Kazanılmış İmmün Yanıt</h3>
                         <p>Lenfosit olgunlaşması, aktivasyonu, MHC molekülleri ve aşırı duyarlılık reaksiyonları bilginizi ölçün.</p>
                         <div class="audience-tags"><span class="audience-tag diş">Diş</span></div>
                         <a href="#" onclick="event.preventDefault(); startQuiz('kazanilmis_immun_yanit');" class="card-link">Quizi Başlat</a>
                    </article>
                    <article class="card quiz-card" aria-labelledby="quiz-title-anaeroblar">
                        <div class="card-icon"><i class="fas fa-lungs-virus" aria-hidden="true"></i></div>
                        <h3 id="quiz-title-anaeroblar">Anaeroblar</h3>
                        <p>Oksijensiz ortamda yaşayan bakteriler ve neden oldukları enfeksiyonlar.</p>
                       <div class="audience-tags"><span class="audience-tag diş">Diş</span></div>
                        <a href="#" onclick="event.preventDefault(); startQuiz('anaeroblar');" class="card-link">Quizi Başlat</a>
                    </article>
                    <article class="card quiz-card" aria-labelledby="quiz-title-spiroketler">
                        <div class="card-icon"><i class="fas fa-bacteria" aria-hidden="true"></i></div>
                        <h3 id="quiz-title-spiroketler">Spiroketler</h3>
                        <p>Treponema, Borrelia ve Leptospira gibi önemli spiroketler ve ilişkili hastalıklar.</p>
                       <div class="audience-tags"><span class="audience-tag diş">Diş</span></div>
                        <a href="#" onclick="event.preventDefault(); startQuiz('spiroketler');" class="card-link">Quizi Başlat</a>
                    </article>
                    <article class="card quiz-card" aria-labelledby="quiz-title-gram_negatif_non_fermenter_basiller">
                         <div class="card-icon"><i class="fas fa-vial" aria-hidden="true"></i></div>
                         <h3 id="quiz-title-gram_negatif_non_fermenter_basiller">Gram Negatif Non-fermenter Basiller</h3>
                         <p>Pseudomonas, Burkholderia, Acinetobacter ve Stenotrophomonas türleri.</p>
                        <div class="audience-tags"><span class="audience-tag diş">Diş</span></div>
                         <a href="#" onclick="event.preventDefault(); startQuiz('gram_negatif_non_fermenter_basiller');" class="card-link">Quizi Başlat</a>
                    </article>
                     <article class="card quiz-card" aria-labelledby="quiz-title-gram_negatif_koklar">
                         <div class="card-icon"><i class="fas fa-dot-circle" aria-hidden="true"></i></div>
                         <h3 id="quiz-title-gram_negatif_koklar">Gram Negatif Koklar</h3>
                         <p>Neisseria (Meningokok, Gonokok) ve Moraxella türleri hakkında bilgiler.</p>
                         <div class="audience-tags"><span class="audience-tag diş">Diş</span></div>
                         <a href="#" onclick="event.preventDefault(); startQuiz('gram_negatif_koklar');" class="card-link">Quizi Başlat</a>
                     </article>
                    <article class="card quiz-card" aria-labelledby="quiz-title-mikobakteriler">
                        <div class="card-icon"><i class="fas fa-microscope" aria-hidden="true"></i></div>
                        <h3 id="quiz-title-mikobakteriler">Mikobakteriler</h3>
                        <p>Tüberküloz, lepra etkenleri ve atipik mikobakteriler.</p>
                       <div class="audience-tags"><span class="audience-tag diş">Diş</span></div>
                        <a href="#" onclick="event.preventDefault(); startQuiz('mikobakteriler');" class="card-link">Quizi Başlat</a>
                    </article>
                     <article class="card quiz-card" aria-labelledby="quiz-title-gram_pozitif_basiller">
                         <div class="card-icon"><i class="fas fa-bacterium" aria-hidden="true"></i></div>
                         <h3 id="quiz-title-gram_pozitif_basiller">Gram Pozitif Basiller</h3>
                         <p>Bacillus, Clostridium, Listeria, Corynebacterium ve diğerleri.</p>
                         <div class="audience-tags"><span class="audience-tag diş">Diş</span></div>
                         <a href="#" onclick="event.preventDefault(); startQuiz('gram_pozitif_basiller');" class="card-link">Quizi Başlat</a>
                     </article>
                </div>
            </section>

            <section id="hakkinda" class="content-section" aria-labelledby="hakkinda-heading">
                 <h2 id="hakkinda-heading"><i class="fas fa-info-circle" aria-hidden="true"></i> Hakkında</h2>
                 <p style="text-align: center; max-width: 650px; margin: 0 auto; line-height: 1.8;">Mikrobiyoloji eğitim materyalleri geliştirerek öğretime katkıda bulunmak, mikrobiyoloji öğretimini bir adım daha ileriye taşımak için çalışıyoruz. Bilgiyi interaktif ve erişilebilir kılma hedefiyle... İşimiz vaktimizden çok.</p>
            </section>
        </main> </div> <div id="stats-container" style="display: none;" aria-live="polite" role="status">
        <div class="stat-item"><span>Tur:</span> <span id="stats-current-round">-</span></div>
        <div class="progress-stat-container">
            <span>Tur İlerleme:</span> <span id="stats-round-progress">-</span>
            <div id="progress-bar-track" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" aria-labelledby="stats-round-progress"><div id="progress-bar-fill" style="width: 0%;"></div></div>
        </div>
        <div class="stat-item"><span>Doğru:</span> <span id="stats-round-correct">0</span></div>
        <div class="stat-item"><span>Yanlış:</span> <span id="stats-round-incorrect">0</span></div>
        <div class="stat-item"><span>1. Tur:</span> <span id="stats-round1-score" class="score-value">-</span></div>
        <div class="stat-item"><span>2. Tur:</span> <span id="stats-round2-score" class="score-value">-</span></div>
        <div class="stat-item"><span>Final Tur:</span> <span id="stats-round3-score" class="score-value">-</span></div>
        <div id="stats-status-message" class="stat-item">Durum: Başlatılıyor...</div>
    </div>

    <div class="quiz-main-content" style="display: none;" role="region" aria-label="Quiz Alanı">
        <div id="quiz-container" style="display: none;">
             <h2 id="quiz-title" aria-live="assertive">Quiz Başlığı Yükleniyor...</h2> <div id="question" aria-live="assertive">Soru yükleniyor...</div>
             <div id="options" role="radiogroup" aria-labelledby="question"></div>
             <button id="submit-btn">Cevabı Kontrol Et</button>
             <div id="feedback" style="display: none;" aria-live="assertive"></div>
        </div>

        <div id="learning-offer-container" style="display: none;" aria-labelledby="offer-title">
            <h3 id="offer-title">Tur Değerlendirmesi</h3>
            <p id="offer-message">Öğrenme fırsatı mesajı burada görünecek.</p>
            <button id="start-learning-btn">Öğretim Turunu Başlat</button>
            <button id="start-next-test-btn" class="secondary">Sonraki Tur Sorularını Çöz</button>
        </div>

        <div id="learning-round-container" style="display: none;" aria-labelledby="learning-title">
            <h3 id="learning-title">Öğrenme Turu</h3>
            <p>Bu turda yanlış yanıtladığınız soruların doğru cevapları ve açıklamaları aşağıdadır.</p>
            <div id="learning-content">
                </div>
            <button id="continue-to-next-test-btn">Sonraki Tur Sorularını Çöz</button>
        </div>

        <div id="result-container" style="display: none;" aria-labelledby="result-heading">
            <h2 id="result-heading">Test Tamamlandı!</h2>
            <p id="score-info">Skor bilgisi yükleniyor...</p>
            <p id="final-message">Sonuç mesajı burada görünecek.</p>
            <button id="show-final-review-btn">Tüm Soruları ve Cevapları İncele</button>
            <button onclick="goHome();" class="secondary">Ana Sayfaya Dön</button>
        </div>

        <div id="final-review-container" style="display: none;" aria-labelledby="final-review-heading">
             <h3 id="final-review-heading">Tüm Sorular ve Cevaplar</h3>
             <p>Testteki tüm soruların doğru cevaplarını ve açıklamalarını aşağıda bulabilirsiniz.</p>
             <div id="final-review-content">
                 </div>
             <button onclick="goHome();">Ana Sayfaya Dön</button>
        </div>
    </div> <footer id="main-footer">
        <div class="container">
            <p><small>&copy; <span id="copyright-year">2025</span> Uzm.Dr. Sait Ramazan Gülbay. Tüm hakları saklıdır.</small></p>
            </div>
    </footer>

    <button id="theme-toggle-btn" aria-label="Temayı Değiştir">
        <span>🌓</span> </button>

    <script>
        // --- Combined and Adapted JavaScript ---

// --- Quiz Questions Data (Updated Structure for Multiple Quizzes) ---
 const quizData = {
     'immunoloji_giris_hucreler': { // From 17-İmmünolojiye Giriş ve İmmün Sistem Hücreleri v2.pptx
         title: "İmmünolojiye Giriş ve İmmün Sistem Hücreleri",
         questions: [
             { id: 1701, question: "1. Patojenle İlişkili Moleküler Kalıplar (PAMP) için hangisi örnek değildir?", options: ["Lipopolisakkarit (LPS)", "Peptidoglikan", "Çift iplikli RNA", "Monosodyum ürat kristalleri", "Fungal glikanlar"], correctAnswer: "Monosodyum ürat kristalleri", explanation: "Monosodyum ürat kristalleri, hücre hasarı sonucu ortaya çıkan DAMP'lara (Hasarla İlişkili Moleküler Kalıplar) örnektir. Diğerleri PAMP'tır." },
             // Replaced question id: 1702 with New Question 2
             { id: 1702, question: "2. Doğal immün yanıt ve kazanılmış immün yanıt arasındaki farklardan hangisi yanlıştır?", options: ["Kazanılmış immün yanıtta izotip değişimi ve antikor üretimi vardır", "Doğal immün yanıtta doğuştan gelen bellek hücreleri sayesinde bakterilere karşı spesifik yanıt vardır", "Kazanılmış yanıtın ana hücre grubu lenfositlerdir", "Doğal yanıt ilk karşılaşmada gelişen ama daha etkisiz olan yanıttır", "Bir yaratılış mucizesi olarak kazanılmış yanıttaki bellek hücreleri çok fazla sayıda etkene karşı özelleşebilecek kabiliyettedir"], correctAnswer: "Doğal immün yanıtta doğuştan gelen bellek hücreleri sayesinde bakterilere karşı spesifik yanıt vardır", explanation: "Doğal immün yanıtın hafızası yoktur ve her karşılaşmada aynı şekilde yanıt verir; spesifik bellek kazanılmış yanıta özgüdür." },
             { id: 1703, question: "3. Hümoral immüniteden sorumlu temel hücre tipi hangisidir?", options: ["T helper lenfosit", "Sitotoksik T lenfosit", "NK hücresi", "B lenfosit", "Makrofaj"], correctAnswer: "B lenfosit", explanation: "B lenfositler ve onların ürünü olan antikorlar hümoral immüniteden sorumludur ve genellikle hücre dışı mikroorganizmalara karşı etkilidir." },
             { id: 1704, question: "4. Hücresel immüniteden sorumlu temel hücre tipi hangisidir?", options: ["B lenfosit", "Plazma hücresi", "T lenfosit", "Mast hücresi", "Bazofil"], correctAnswer: "T lenfosit", explanation: "T lenfositler (hem Helper hem Sitotoksik) hücresel immüniteden sorumludur ve özellikle hücre içi mikroorganizmalara ve tümör hücrelerine karşı etkilidir." },
             // Replaced question id: 1705 with New Question 3
             { id: 1705, question: "5. Hangisinin özelliği yanlış verilmiştir?", options: ["B lenfositler - antijen sunumu", "Plazma hücreleri - antikor üretimi", "T lenfositler - sitokin üretimi", "Makrofajlar - fagositoz", "Dendritik hücreler - Histamin salınımı"], correctAnswer: "Dendritik hücreler - Histamin salınımı", explanation: "Dendritik hücreler profesyonel antijen sunan hücrelerdir; histamin salınımı ise primer olarak mast hücreleri ve bazofillerin görevidir." },
             { id: 1706, question: "6. Kanda dolaşan ve dokulara geçince makrofajlara farklılaşan hücre hangisidir?", options: ["Lenfosit", "Nötrofil", "Eozinofil", "Monosit", "Bazofil"], correctAnswer: "Monosit", explanation: "Monositler kanda dolaşır ve dokulara girdiklerinde makrofajlara dönüşürler." },
             { id: 1707, question: "7. Tip I aşırı duyarlılık reaksiyonlarında erken dönemde rol alan ve granüllerinde histamin/heparin bulunan hücre hangisidir?", options: ["Nötrofil", "Makrofaj", "Mast hücresi", "NK hücresi", "T lenfosit"], correctAnswer: "Mast hücresi", explanation: "Bağ dokusu mast hücreleri, histamin ve heparin içeren granülleriyle Tip I aşırı duyarlılık reaksiyonlarının erken fazında anahtar rol oynar." },
             { id: 1708, question: "8. İmmünoglobulin E (IgE) reseptörü taşıyan ve alerjik reaksiyonlar ile parazit savunmasında görev alan hücreler hangileridir?", options: ["Nötrofil ve Makrofaj", "Mast hücresi ve Bazofil", "T lenfosit ve B lenfosit", "NK hücresi ve Dendritik hücre", "Sadece Eozinofil"], correctAnswer: "Mast hücresi ve Bazofil", explanation: "Mast hücreleri ve bazofiller yüzeylerinde IgE için yüksek afiniteli reseptörler (FcεRI) taşır ve alerjik yanıtlarda önemlidirler. Eozinofiller de IgE ile ilişkili görev yapar." },
             { id: 1709, question: "9. Doğal Katil (NK) hücrelerinin temel hedefi olmayan hangisidir?", options: ["Virüsle enfekte hücreler", "Tümör hücreleri", "MHC-I ekspresyonu azalmış hücreler", "Bakterilerle enfekte makrofajlar", "Antikorla kaplı hedef hücreler (ADCC)"], correctAnswer: "Bakterilerle enfekte makrofajlar", explanation: "NK hücreleri öncelikle MHC-I ekspresyonu azalmış veya stres ligandları taşıyan hücreleri (viral enfekte, tümör) veya ADCC ile antikor kaplı hücreleri hedefler. Bakterilerle enfekte makrofajlar daha çok T hücreleri tarafından yönetilir." },
             { id: 1710, question: "10. Tek başına immün yanıt oluşturamayan ancak taşıyıcı bir proteine bağlandığında immünojenik hale gelen küçük moleküllere ne ad verilir?", options: ["Epitop", "Paratop", "Adjuvan", "Hapten", "İmmünojen"], correctAnswer: "Hapten", explanation: "Haptenler, immün yanıtı tek başlarına tetikleyemeyen ancak taşıyıcı bir moleküle (genellikle protein) bağlandıklarında immünojenik özellik kazanan küçük moleküllerdir." },
             { id: 1711, question: "11. Foliküler dendritik hücrelerin (FDC) temel görevi nedir?", options: ["Antijenleri fagosite etmek", "Antijenleri MHC-II ile CD4 T hücrelerine sunmak", "Antijenleri MHC-I ile CD8 T hücrelerine sunmak", "Antijenleri B lenfositlere sunmak ve germinal merkez reaksiyonunu desteklemek", "Sitokin salgılayarak inflamasyonu başlatmak"], correctAnswer: "Antijenleri B lenfositlere sunmak ve germinal merkez reaksiyonunu desteklemek", explanation: "FDC'ler, MHC-II taşımazlar ancak antijenleri yüzeylerinde uzun süre tutarak germinal merkezlerdeki B hücrelerinin aktivasyonu, afinite olgunlaşması ve izotip değişimi için kritik rol oynarlar." },
             { id: 1712, question: "12. Primer immün yanıtta üretilen ilk antikor sınıfı nedir?", options: ["IgG", "IgA", "IgM", "IgE", "IgD"], correctAnswer: "IgM", explanation: "Bir antijenle ilk karşılaşıldığında, B lenfositleri tarafından ilk olarak IgM sınıfı antikorlar üretilir." },
             { id: 1713, question: "13. IgG antikorlarının antijene olan bağlanma gücünün (afinitesinin) IgM'e göre genellikle daha yüksek olmasının temel nedeni nedir?", options: ["IgG'nin daha büyük olması", "IgG'nin pentamerik olması", "Somatik hipermutasyon ve afinite olgunlaşması", "IgG'nin komplemanı daha iyi aktive etmesi", "IgG'nin plasentadan geçebilmesi"], correctAnswer: "Somatik hipermutasyon ve afinite olgunlaşması", explanation: "Kazanılmış yanıt sırasında germinal merkezlerde meydana gelen somatik hipermutasyon ve afinite olgunlaşması süreçleri, daha yüksek antijen ilgisine (afinite) sahip IgG üreten B hücrelerinin seçilmesini sağlar." },
             { id: 1714, question: "14. Virüsle enfekte hücrelere ve tümör hücrelerine karşı hücresel immün yanıtta ana rolü oynayan T lenfosit alt tipi hangisidir?", options: ["Th1", "Th2", "Th17", "Treg", "CD8+ Sitotoksik T Lenfosit"], correctAnswer: "CD8+ Sitotoksik T Lenfosit", explanation: "CD8+ T lenfositler, MHC Sınıf I molekülleri ile sunulan endojen antijenleri tanıyarak hedef hücreleri (örn. virüsle enfekte, tümör) doğrudan öldürürler." },
             { id: 1715, question: "15. Makrofajları aktive ederek hücre içi patojenlere karşı savunmayı güçlendiren T helper alt tipi hangisidir?", options: ["Th1", "Th2", "Th17", "Treg", "Tfh"], correctAnswer: "Th1", explanation: "Th1 hücreleri, özellikle IFN-gama salgılayarak makrofajları aktive eder ve hücre içi patojenlere karşı hücresel immün yanıtı yönetir." }
         ]
     },
     'antikorlar': { // From 18-Antikorlar.pptx
         title: "Antikorlar",
         questions: [
             { id: 1801, question: "1. İmmünglobulinlerin ağır zincir (H) farklılıklarına göre sınıflandırılmasına ne ad verilir?", options: ["İdiyotip", "Allotip", "İzotip", "Haplotip", "Serotip"], correctAnswer: "İzotip", explanation: "İzotip, ağır zincir sabit (C) bölgelerindeki farklılıklara göre belirlenen ana immünoglobulin sınıflarını (IgG, IgM, IgA, IgD, IgE) ve alt sınıflarını ifade eder." },
             { id: 1802, question: "2. Hangi IgG alt sınıfı komplemanı aktive etmez?", options: ["IgG1", "IgG2", "IgG3", "IgG4", "Hiçbiri"], correctAnswer: "IgG4", explanation: "IgG1 ve IgG3 komplemanı en iyi aktive eden IgG alt sınıflarıdır. IgG2 daha zayıf aktive ederken, IgG4 komplemanı klasik yoldan aktive etmez." },
             { id: 1803, question: "3. Salgısal IgA'nın (sIgA) dimerik yapısını stabilize eden ve transportunu sağlayan komponentler hangileridir?", options: ["Sadece J zinciri", "Sadece Sekretuvar komponent", "J zinciri ve Sekretuvar komponent", "Kappa ve Lambda zincirleri", "FcRn reseptörü"], correctAnswer: "J zinciri ve Sekretuvar komponent", explanation: "İki IgA monomeri J zinciri ile birleşir. Epitel hücresinden lümene transport sırasında eklenen sekretuvar komponent ise dimerik yapıyı proteolizise karşı korur." },
             { id: 1804, question: "4. IgA proteaz üreterek mukozal savunmadan kaçabilen bakterilere örnek olmayan hangisidir?", options: ["Streptococcus pneumoniae", "Neisseria meningitidis", "Haemophilus influenzae", "Staphylococcus aureus", "Neisseria gonorrhoeae"], correctAnswer: "Staphylococcus aureus", explanation: "Pnömokok, Meningokok, H. influenzae ve Gonokok gibi mukozal patojenler IgA proteaz üreterek sIgA'yı parçalayabilir. S. aureus bu mekanizmayı kullanmaz." },
             { id: 1805, question: "5. Hangi immünoglobulin hem B hücre reseptörü (BCR) olarak monomerik formda bulunur hem de plazma hücreleri tarafından pentamerik formda salgılanır?", options: ["IgG", "IgA", "IgM", "IgD", "IgE"], correctAnswer: "IgM", explanation: "IgM, B hücre yüzeyinde monomerik BCR olarak bulunur, aktivasyon sonrası plazma hücreleri tarafından J zinciri ile birleşmiş pentamerik formda salgılanır." },
             { id: 1806, question: "6. Aşağıdaki immünoglobulin fonksiyonlarından hangisi özellikle IgM'in pentamerik yapısı sayesinde çok etkilidir?", options: ["Opsonizasyon", "Plasentadan geçiş", "Alerjik reaksiyon tetikleme", "Aglütinasyon ve Kompleman fiksasyonu", "Mukozal immünite"], correctAnswer: "Aglütinasyon ve Kompleman fiksasyonu", explanation: "IgM'in 10 adet antijen bağlanma bölgesi (Fab) olması aglütinasyonu, çoklu Fc bölgeleri de kompleman (C1q) bağlanmasını çok etkili kılar." },
             { id: 1807, question: "7. Sadece matür B lenfosit yüzeyinde bulunan ve hücre dışına salgılanmayan immünoglobulin hangisidir?", options: ["IgM", "IgD", "IgG", "IgA", "IgE"], correctAnswer: "IgD", explanation: "IgD, esas olarak matür B lenfosit yüzeyinde IgM ile birlikte BCR kompleksi içinde yer alır ve serumda çok düşük düzeydedir, salgılanmaz." },
             { id: 1808, question: "8. Antikor Bağımlı Hücresel Sitotoksisite (ADCC) mekanizmasında, NK hücreleri hangi immünoglobulin sınıfı ile kaplı hedef hücrelere bağlanır?", options: ["IgA", "IgM", "IgE", "IgG", "IgD"], correctAnswer: "IgG", explanation: "NK hücreleri, yüzeylerindeki FcγRIII (CD16) reseptörü ile IgG kaplı hedef hücrelerin Fc kısmına bağlanarak ADCC'yi başlatır." },
             { id: 1809, question: "9. Helmintlere (parazit solucanlar) karşı gelişen ADCC'de eozinofiller hangi immünoglobulin sınıfı ile kaplı parazite bağlanır?", options: ["IgA", "IgM", "IgE", "IgG", "IgD"], correctAnswer: "IgE", explanation: "Eozinofiller yüzeylerinde Fcε reseptörleri taşır ve IgE ile opsonize olmuş helmintlere bağlanarak toksik granüllerini salgılarlar." },
             // Replaced question id: 1810 with New Question 4
             { id: 1810, question: "10. Antikor molekülünün antijen bağlayan kısmı aşağıdakilerden hangisidir?", options: ["Fc bölgesi", "Ağır zincir sabit bölgesi", "Fab bölgesi", "J zinciri", "Menteşe bölgesi"], correctAnswer: "Fab bölgesi", explanation: "Fab (Fragment antigen-binding) bölgesi, antikorun değişken bölgelerini içerir ve antijene spesifik olarak bağlanır." },
             { id: 1811, question: "11. Antikorların mikroorganizmaları veya toksinleri doğrudan bağlayarak konak hücreye girişini veya etkisini engelleme mekanizmasına ne ad verilir?", options: ["Opsonizasyon", "Kompleman aktivasyonu", "Aglütinasyon", "Nötralizasyon", "ADCC"], correctAnswer: "Nötralizasyon", explanation: "Nötralizasyon, antikorların (özellikle IgG, IgM, IgA) patojen yüzeyindeki kritik moleküllere veya toksinlere bağlanarak onları etkisiz hale getirmesidir." },
             { id: 1812, question: "12. Yenidoğanın bağırsaklarında mukozal korumayı sağlayan ve anne sütünde bol bulunan antikor hangisidir?", options: ["IgG", "IgM", "Sekretuvar IgA", "IgD", "IgE"], correctAnswer: "Sekretuvar IgA", explanation: "Anne sütü, yenidoğanın GİS mukozasını enfeksiyonlardan koruyan sekretuvar IgA açısından çok zengindir." },
             // Replaced question id: 1813 with New Question 5
             { id: 1813, question: "13. Plasentadan geçerek fetüsü koruyan ve kanda en bol bulunan antikor sınıfı hangisidir?", options: ["IgA", "IgD", "IgE", "IgG", "IgM"], correctAnswer: "IgG", explanation: "IgG, serumdaki immünoglobulinlerin yaklaşık %75-80'ini oluşturur ve plasentadan geçerek fetüse pasif bağışıklık sağlayan tek antikordur." },
             { id: 1814, question: "14. Allerjenle ikinci kez karşılaşmada mast hücresi degranülasyonunu tetikleyen olay nedir?", options: ["Alerjenin IgG ile bağlanması", "Alerjenin IgM ile bağlanması", "Mast hücresi yüzeyindeki IgE'lerin alerjenle çapraz bağlanması", "Kompleman aktivasyonu", "NK hücre aktivasyonu"], correctAnswer: "Mast hücresi yüzeyindeki IgE'lerin alerjenle çapraz bağlanması", explanation: "Duyarlı kişide mast hücresi yüzeyine bağlı IgE antikorlarının, tekrar giren alerjen tarafından çapraz bağlanması (cross-linking) hücre içi sinyali tetikler ve degranülasyona yol açar." },
             { id: 1815, question: "15. Süperantijenlerin neden olduğu aşırı T hücre aktivasyonu ve sitokin fırtınası hangi klinik tabloya yol açabilir?", options: ["Anafilaksi", "Serum hastalığı", "Toksik şok sendromu", "Otoimmün hemolitik anemi", "Kontakt dermatit"], correctAnswer: "Toksik şok sendromu", explanation: "Staphylococcus aureus (TSST-1) ve Streptococcus pyogenes gibi bakterilerin ürettiği süperantijenler, masif T hücre aktivasyonu ve sitokin salınımına neden olarak Toksik Şok Sendromu gibi hayatı tehdit eden durumlara yol açabilir." }
         ]
     },
     'dogal_immun_yanit': { // From 19-Doğal İmmün Yanıt.pptx
         title: "Doğal İmmün Yanıt",
         questions: [
             { id: 1901, question: "1. PAMP'ları tanıyarak doğal immün yanıtı başlatan reseptörlere genel olarak ne ad verilir?", options: ["Antikorlar", "T Hücre Reseptörleri (TCR)", "Patern Tanıma Reseptörleri (PRR)", "B Hücre Reseptörleri (BCR)", "MHC Molekülleri"], correctAnswer: "Patern Tanıma Reseptörleri (PRR)", explanation: "PRR'ler (TLR, NLR, RLR vb.), mikroorganizmalara özgü korunmuş yapılar olan PAMP'ları veya hasarlı hücrelerden salınan DAMP'ları tanır." },
             { id: 1902, question: "2. Aşağıdakilerden hangisi hücre ilişkili bir PRR değildir?", options: ["TLR (Toll-like receptor)", "NLR (NOD-like receptor)", "Pentraksinler", "RIG-I-like receptor (RLR)", "C-tipi lektin reseptörü"], correctAnswer: "Pentraksinler", explanation: "Pentraksinler (örn: CRP), kollektinler, fikolinler ve kompleman çözünür PRR örnekleridir. TLR, NLR, RLR ve CLR hücre ilişkili PRR'lerdir." },
             { id: 1903, question: "3. Bakteriyel CpG DNA'yı tanıyan ve endozomlarda bulunan TLR hangisidir?", options: ["TLR3", "TLR4", "TLR5", "TLR7", "TLR9"], correctAnswer: "TLR9", explanation: "TLR9, endozomlarda metillenmemiş CpG oligonükleotidlerini (bakteriyel ve bazı viral DNA'larda bulunur) tanır." },
             { id: 1904, question: "4. Viral tek iplikli RNA'yı (ssRNA) tanıyan endozomal TLR'ler hangileridir?", options: ["TLR2 ve TLR6", "TLR3 ve TLR9", "TLR4 ve TLR5", "TLR7 ve TLR8", "TLR1 ve TLR10"], correctAnswer: "TLR7 ve TLR8", explanation: "TLR7 ve TLR8, endozomlarda viral ssRNA'yı tanıyarak interferon yanıtını tetikler." },
             { id: 1905, question: "5. NOD-Like Reseptörler (NLR) aktive olduğunda hangi transkripsiyon faktörünü aktive ederek pro-inflamatuar gen ekspresyonunu uyarır?", options: ["STAT3", "NF-κB", "AP-1", "IRF3", "CREB"], correctAnswer: "NF-κB", explanation: "NLR aktivasyonu, genellikle NF-κB transkripsiyon faktörünü aktive ederek sitokinler, kemokinler ve adhezyon molekülleri gibi inflamatuar genlerin ekspresyonunu artırır." },
             { id: 1906, question: "6. Çeşitli PAMP ve DAMP'ları algılayarak kaspaz-1'i aktive eden ve IL-1β/IL-18 salınımına yol açan sitozolik protein kompleksine ne ad verilir?", options: ["Fagozom", "Lizozom", "Proteazom", "İnflamazom", "Spliceozom"], correctAnswer: "İnflamazom", explanation: "İnflamazomlar (genellikle NLRP proteinleri içerir), sitozolde PAMP/DAMP'ları tanıyarak kaspaz-1'i aktive eder, bu da pro-IL-1β ve pro-IL-18'i olgunlaştırır." },
             { id: 1907, question: "7. Lökositlerin damar lümeninden dokuya geçiş sürecine ne ad verilir?", options: ["Marjinasyon", "Rolling (Yuvarlanma)", "Adezyon (Yapışma)", "Transmigrasyon (Diapedez)", "Kemotaksis"], correctAnswer: "Transmigrasyon (Diapedez)", explanation: "Transmigrasyon, lökositlerin endotel hücreleri arasından veya içinden geçerek damar dışına, inflamasyon bölgesine göç etmesidir." },
             { id: 1908, question: "8. Aşağıdakilerden hangisi güçlü bir nötrofil kemotaktik ajanıdır?", options: ["C3b", "Histamin", "IL-1", "C5a", "TNF-alfa"], correctAnswer: "C5a", explanation: "C5a, kompleman sisteminin bir ürünüdür ve nötrofiller ile makrofajlar için güçlü bir kemotaktik faktördür. IL-8 (CXCL8) de önemli bir nötrofil kemokinidir." },
             { id: 1909, question: "9. Kompleman sisteminin hangi aktivasyon yolu mikrobiyal yüzeylerdeki mannoz kalıntılarına bağlanarak başlar?", options: ["Klasik yolak", "Lektin yolağı", "Alternatif yolak", "Terminal yolak", "Hiçbiri"], correctAnswer: "Lektin yolağı", explanation: "Lektin yolağı, mannoz bağlayan lektin (MBL) veya fikolinlerin mikrop yüzeyindeki karbonhidratlara (mannoz gibi) bağlanmasıyla aktive olur." },
             { id: 1910, question: "10. Alternatif kompleman yolunu pozitif yönde düzenleyerek C3 konvertazı stabilize eden protein hangisidir?", options: ["Faktör H", "Faktör I", "Properdin", "DAF (CD55)", "CD59"], correctAnswer: "Properdin", explanation: "Properdin, mikrobiyal yüzeylerde oluşan alternatif yol C3 konvertazını (C3bBb) stabilize ederek kompleman aktivasyonunu artırır." },
             { id: 1911, question: "11. Makrofajlardan salınan ve hipotalamusta ateş oluşumunu tetikleyen, aynı zamanda kaşeksiye neden olabilen sitokin hangisidir?", options: ["IL-10", "IL-4", "IFN-gama", "TNF-alfa", "IL-8"], correctAnswer: "TNF-alfa", explanation: "TNF-alfa, endotel aktivasyonu, nötrofil aktivasyonu, ateş ve kaşeksi gibi çok çeşitli sistemik etkileri olan pro-inflamatuar bir sitokindir." },
             { id: 1912, question: "12. Makrofajlar ve nötrofiller tarafından üretilen ve güçlü antimikrobiyal etkiye sahip reaktif nitrojen türü hangisidir?", options: ["Süperoksit anyonu (O2⁻)", "Hidrojen peroksit (H2O2)", "Hipokloröz asit (HOCl)", "Nitrik oksit (NO)", "Ozon (O3)"], correctAnswer: "Nitrik oksit (NO)", explanation: "İndüklenebilir nitrik oksit sentaz (iNOS) enzimi aracılığıyla L-argininden üretilen NO, mikroorganizmalar için toksiktir ve vazodilatasyon gibi başka rolleri de vardır." },
             { id: 1913, question: "13. Nötrofil granüllerinde bulunan ve demiri bağlayarak bakterilerin demir kullanımını engelleyen protein hangisidir?", options: ["Lizozim", "Defensin", "Katellisidin", "Laktoferrin", "Elastaz"], correctAnswer: "Laktoferrin", explanation: "Laktoferrin, demiri yüksek afiniteyle bağlayarak birçok bakterinin çoğalması için esansiyel olan demiri ortamdan uzaklaştırır." },
             { id: 1914, question: "14. İnflamazom aktivasyonu ile tetiklenen programlanmış hücre ölümü şekline ne ad verilir?", options: ["Apoptoz", "Nekroz", "Otofaji", "Piropitoz", "Nekroptoz"], correctAnswer: "Piropitoz", explanation: "Piropitoz, inflamazom aktivasyonu ve kaspaz-1 aracılığıyla gerçekleşen, hücre şişmesi, zar yırtılması ve IL-1β/IL-18 salınımı ile karakterize pro-inflamatuar bir hücre ölümü şeklidir." },
             { id: 1915, question: "15. Klasik makrofaj aktivasyonunu (M1) indükleyen ve NK hücreleri ile Th1 hücreleri tarafından salgılanan temel sitokin hangisidir?", options: ["IL-4", "IL-10", "TGF-beta", "IFN-gama", "IL-5"], correctAnswer: "IFN-gama", explanation: "IFN-gama, makrofajların mikropları öldürme kapasitesini (örn: ROS, NO üretimi) ve MHC-II ekspresyonunu artırarak klasik M1 aktivasyonunu sağlar." }
         ]
     },
     'kazanilmis_immun_yanit': { // From 20-Kazanılmış İmmün Yanıt.pptx
         title: "Kazanılmış İmmün Yanıt",
         questions: [
             { id: 2001, question: "1. T lenfositlerin timusta negatif seçilimi nerede gerçekleşir ve hangi hücreler elimine edilir?", options: ["Korteks / MHC tanıyamayanlar", "Medulla / Self-antijene yüksek afiniteli olanlar", "Korteks / Self-antijene yüksek afiniteli olanlar", "Medulla / MHC tanıyamayanlar", "Kortiko-medüller bileşke / CD4 veya CD8 kaybetmiş olanlar"], correctAnswer: "Medulla / Self-antijene yüksek afiniteli olanlar", explanation: "Negatif seçilim timus medullasında gerçekleşir ve TCR'leri ile vücudun öz antijenlerine yüksek afinite ile bağlanan potansiyel otoreaktif T lenfositler apoptozla elimine edilir." },
             { id: 2002, question: "2. Timusta hem CD4 hem de CD8 ko-reseptörlerini eksprese eden T lenfosit aşaması hangisidir ve nerede bulunur?", options: ["Double negatif / Korteks üst kısım", "Double pozitif / Korteks", "Single pozitif (CD4+) / Medulla", "Single pozitif (CD8+) / Medulla", "Naif T hücre / Perifer"], correctAnswer: "Double pozitif / Korteks", explanation: "Timositler kortekste ilerlerken double negatiften double pozitif (CD4+CD8+) aşamaya geçerler. Pozitif seçilim bu aşamada gerçekleşir." },
             { id: 2003, question: "3. Lenf düğümünde B lenfositlerin T lenfosit zonuna (parakorteks) göç etmesini sağlayan kemokin reseptörü hangisidir?", options: ["CXCR5", "CCR7", "CXCR4", "CCR5", "CXCR3"], correctAnswer: "CCR7", explanation: "Antijenle aktive olan B lenfositlerin yüzeyindeki CCR7 ekspresyonu artar. Parakorteksteki T hücre zonunda salgılanan CCR7 ligandları (CCL19, CCL21) B hücrelerini bu bölgeye çeker." },
             { id: 2004, question: "4. T lenfosit aktivasyonu için gerekli olan sinyal 2 (ko-stimülasyon), APC'deki B7 (CD80/86) molekülünün T hücresindeki hangi molekülle etkileşimiyle oluşur?", options: ["CD4", "CD8", "TCR", "CD28", "CD40L"], correctAnswer: "CD28", explanation: "B7-CD28 etkileşimi, T hücre aktivasyonu için kritik olan ko-stimülatör sinyali sağlar. Bu sinyal olmadan T hücreleri anarjik hale gelebilir." },
             { id: 2005, question: "5. Aktive olmuş CD4+ T lenfositlerin, B lenfosit aktivasyonu ve izotip değişimi için B hücresindeki CD40 ile etkileşen yüzey molekülü hangisidir?", options: ["CD28", "TCR", "CD3", "CD40L", "LFA-1"], correctAnswer: "CD40L", explanation: "T helper hücre yüzeyindeki CD40 Ligandı (CD154), B hücresindeki CD40'a bağlanarak T-bağımlı B hücre yanıtının önemli bir sinyalini oluşturur." },
             { id: 2006, question: "6. B lenfositlerde immünoglobulin izotip değişimi ve somatik hipermutasyonun gerçekleştiği lenfoid yapı hangisidir?", options: ["Timus medullası", "Kemik iliği", "Dalak kırmızı pulpa", "Lenf düğümü germinal merkezi", "Peyer plakları T hücre alanı"], correctAnswer: "Lenf düğümü germinal merkezi", explanation: "Aktive B lenfositler foliküllere göç ederek hızla çoğalır ve germinal merkezleri oluşturur. Somatik hipermutasyon ve izotip değişimi bu merkezlerde meydana gelir." },
             { id: 2007, question: "7. Aşağıdaki sitokinlerden hangisi B lenfositlerde IgE izotipine dönüşümü uyarır?", options: ["IFN-gama", "IL-2", "IL-4", "IL-12", "TGF-beta"], correctAnswer: "IL-4", explanation: "Th2 hücrelerinden salgılanan IL-4, B lenfositlerin IgE sınıfı antikor üretimine yönlenmesini (izotip değişimi) sağlar." },
             // Replaced question id: 2008 with New Question 1
             { id: 2008, question: "8. Hücresel immün cevapta görevli hücreleri (makrofaj, sitotoksik T lenfosit) aktifleştiren hücreler hangileridir?", options: ["Makrofajlar", "T helper 2 lenfositler", "B lenfositleri", "Nötrofiller", "T helper 1 lenfositler"], correctAnswer: "T helper 1 lenfositler", explanation: "Th1 hücreleri, salgıladıkları IFN-gama gibi sitokinlerle makrofajları ve sitotoksik T lenfositleri aktive ederek hücresel bağışıklığı yönetir." },
             { id: 2009, question: "9. Hümoral immün yanıtı (antikor üretimi) ve parazitlere karşı savunmayı destekleyen T helper alt tipi hangisidir?", options: ["Th1", "Th2", "Th17", "Treg", "Tfh"], correctAnswer: "Th2", explanation: "Th2 hücreleri, IL-4, IL-5 ve IL-13 gibi sitokinlerle B hücre aktivasyonunu, IgE üretimini ve eozinofil yanıtını destekleyerek hümoral ve anti-parazit yanıtlarda rol alır." },
             { id: 2010, question: "10. MHC Sınıf I molekülleri (HLA-A, B, C) hangi T hücre alt tipine antijen sunar?", options: ["CD4+ T helper", "CD8+ Sitotoksik T lenfosit", "Regülatör T hücresi", "Gama-delta T hücresi", "B lenfosit"], correctAnswer: "CD8+ Sitotoksik T lenfosit", explanation: "MHC Sınıf I molekülleri, endojen (hücre içi) antijenleri CD8+ T lenfositlere sunar." },
             { id: 2011, question: "11. MHC Sınıf II molekülleri (HLA-DP, DQ, DR) hangi T hücre alt tipine antijen sunar?", options: ["CD4+ T helper", "CD8+ Sitotoksik T lenfosit", "NK hücresi", "Nötrofil", "Mast hücresi"], correctAnswer: "CD4+ T helper", explanation: "MHC Sınıf II molekülleri, ekzojen (hücre dışı) antijenleri CD4+ T helper lenfositlere sunar." },
             { id: 2012, question: "12. Aşağıdakilerden hangisi Tip II aşırı duyarlılık reaksiyonu mekanizması ile gelişen bir duruma örnektir?", options: ["Anafilaksi", "Serum hastalığı", "Kontakt dermatit", "Otoimmün hemolitik anemi", "Astım"], correctAnswer: "Otoimmün hemolitik anemi", explanation: "Tip II reaksiyonlarda IgG veya IgM antikorları hücre yüzeyindeki antijenlere bağlanarak kompleman aktivasyonu veya ADCC yoluyla hücre yıkımına neden olur. Hemolitik anemi buna örnektir." },
             { id: 2013, question: "13. Dolaşımda çözünür antijen-antikor komplekslerinin dokularda birikmesi ve kompleman aktivasyonu ile karakterize aşırı duyarlılık tipi hangisidir?", options: ["Tip I", "Tip II", "Tip III", "Tip IV", "Tip V"], correctAnswer: "Tip III", explanation: "Tip III (İmmün Kompleks) reaksiyonlarda, oluşan antijen-antikor kompleksleri küçük damarlarda birikerek vaskülit ve doku hasarına yol açar (örn. Serum hastalığı, SLE nefriti)." },
             { id: 2014, question: "14. Gecikmiş tip hücresel yanıt olarak da bilinen ve T lenfosit aracılı aşırı duyarlılık reaksiyonu hangisidir?", options: ["Tip I", "Tip II", "Tip III", "Tip IV", "Tip V"], correctAnswer: "Tip IV", explanation: "Tip IV reaksiyonlar antikor aracılı değildir; duyarlı T lenfositlerin (CD4+ veya CD8+) antijenle tekrar karşılaşması sonucu aktive olması ve sitokin salınımı veya sitotoksisite ile doku hasarı oluşturmasıdır." },
             { id: 2015, question: "15. B lenfositlerin yüzeyinde bulunan ve antijen tanıma sonrası hücre içi sinyal iletiminde rol alan immünoglobulinler hangileridir?", options: ["Sadece IgG", "Sadece IgA", "IgM ve IgD", "Sadece IgE", "IgG ve IgM"], correctAnswer: "IgM ve IgD", explanation: "Naif matür B lenfositler yüzeylerinde antijen reseptörü olarak hem IgM hem de IgD taşırlar." }
         ]
     },
     'gram_negatif_koklar': { // From 9-Gram negatif koklar.pptx
         title: "Gram Negatif Koklar",
         questions: [
             { id: 901, question: "1. Neisseria meningitidis ve Neisseria gonorrhoeae için ortak olmayan özellik hangisidir?", options: ["Gram negatif diplokok olmaları", "Oksidaz pozitif olmaları", "IgA proteaz üretmeleri", "Kapsül varlığı", "İnsan patojeni olmaları"], correctAnswer: "Kapsül varlığı", explanation: "N. meningitidis kapsüllüdür (önemli virülans faktörü), ancak N. gonorrhoeae kapsülsüzdür." },
             { id: 902, question: "2. Hangi Neisseria türü hem glukozu hem de maltozu fermente eder?", options: ["N. gonorrhoeae", "N. meningitidis", "N. lactamica", "N. cinerea", "Moraxella catarrhalis"], correctAnswer: "N. meningitidis", explanation: "Meningokok glukoz ve maltoz pozitif iken, Gonokok sadece glukoz pozitiftir. Bu ayrım tanıda önemlidir." },
             { id: 903, question: "3. N. gonorrhoeae'nin neden olduğu pelvik inflamatuar hastalığın (PID) karaciğer kapsülünü etkileyen komplikasyonuna ne ad verilir?", options: ["Waterhouse-Friderichsen sendromu", "Reiter sendromu", "Fitz-Hugh-Curtis sendromu", "Guillain-Barré sendromu", "Toxic Shock Syndrome"], correctAnswer: "Fitz-Hugh-Curtis sendromu", explanation: "PID'in bir komplikasyonu olan Fitz-Hugh-Curtis sendromu, karaciğer kapsülü çevresinde inflamasyon ve yapışıklıklarla karakterize perihepatit tablosudur." },
             { id: 904, question: "4. Meningokok menenjiti profilaksisi için aşağıdaki ilaçlardan hangisi öncelikli olarak tercih edilir?", options: ["Penisilin G", "Seftriakson", "Vankomisin", "Rifampin", "Eritromisin"], correctAnswer: "Rifampin", explanation: "Meningokok taşıyıcılığını eradike etmek ve yakın temaslılarda hastalığı önlemek için Rifampin (veya Siprofloksasin, Seftriakson) profilaktik olarak kullanılır." },
             { id: 905, question: "5. Hangi Gram negatif kok, sıklıkla beta-laktamaz üreterek penisilinlere direnç gösterir ve otitis media/sinüzit etkenidir?", options: ["N. meningitidis", "N. gonorrhoeae", "N. lactamica", "Moraxella catarrhalis", "Veillonella parvula"], correctAnswer: "Moraxella catarrhalis", explanation: "M. catarrhalis sıklıkla beta-laktamaz üretir, bu nedenle penisilinlere dirençlidir. Çocuklarda otitis media ve sinüzitin, yetişkinlerde KOAH alevlenmelerinin önemli etkenlerindendir." },
             { id: 906, question: "6. Neisseria türlerinin virülansında rol oynayan ve endotoksik aktivite gösteren yapı hangisidir?", options: ["Kapsül", "Pili", "Lipooligosakkarit (LOS)", "IgA Proteaz", "Opa proteinleri"], correctAnswer: "Lipooligosakkarit (LOS)", explanation: "Neisseria türleri, tipik LPS yerine daha kısa zincirli olan LOS yapısına sahiptir. LOS, endotoksin gibi davranarak septik şok ve inflamasyonda rol oynar." },
             { id: 907, question: "7. Aşağıdaki klinik durumlardan hangisi tipik olarak Neisseria gonorrhoeae ile ilişkilendirilmez?", options: ["Üretrit", "Servisit / PID", "Septik artrit", "Menenjit", "Neonatal konjonktivit"], correctAnswer: "Menenjit", explanation: "Menenjit, Neisseria meningitidis'in en karakteristik klinik tablosudur. Gonokok enfeksiyonları genellikle ürogenital sistem, eklemler ve yenidoğan gözü ile sınırlıdır, menenjit nadirdir." },
             { id: 908, question: "8. Meningokoksemi sırasında görülen yaygın deri döküntülerine ve adrenal kanamaya bağlı akut adrenal yetmezliğe ne ad verilir?", options: ["Ektima gangrenozum", "Eritema multiforme", "Purpura fulminans / Waterhouse-Friderichsen", "Stevens-Johnson sendromu", "Eritema nodozum"], correctAnswer: "Purpura fulminans / Waterhouse-Friderichsen", explanation: "Meningokoksemiye bağlı yaygın purpura (purpura fulminans) ve buna eşlik eden adrenal kanama ve yetmezlik Waterhouse-Friderichsen sendromu olarak adlandırılır." },
             { id: 909, question: "9. Gonokokların konak hücre yüzeylerine tutunmasında ve antijenik çeşitlilik göstermesinde rol oynayan ana yapı hangisidir?", options: ["Kapsül", "Flagella", "Lipooligosakkarit (LOS)", "Pili", "Hücre duvarı"], correctAnswer: "Pili", explanation: "Pili (Fimbria), gonokokların epitel hücrelerine tutunmasını sağlayan ve sıkça antijenik yapı değiştirerek immün sistemden kaçmasına yardımcı olan önemli virülans faktörüdür." },
             { id: 910, question: "10. Hangi laboratuvar özelliği Moraxella catarrhalis'i Neisseria türlerinden ayırmada kullanılır?", options: ["Gram boyanma özelliği", "Oksidaz testi sonucu", "Şeker fermentasyon yeteneği", "Kapsül varlığı", "IgA proteaz üretimi"], correctAnswer: "Şeker fermentasyon yeteneği", explanation: "Neisseria türleri genellikle glukoz ve/veya maltozu fermente ederken, Moraxella catarrhalis sakkarolitik değildir (şekerleri fermente etmez)." },
             { id: 911, question: "11. Nazofarenks florasında bulunabilen ve hem glukoz hem de maltoz negatif olan, ancak laktaz aktivitesi gösteren Neisseria türü hangisidir?", options: ["N. meningitidis", "N. gonorrhoeae", "N. lactamica", "N. cinerea", "M. catarrhalis"], correctAnswer: "N. lactamica", explanation: "N. lactamica, laktozu fermente etmesiyle diğerlerinden ayrılır ve genellikle patojenik değildir." },
             { id: 912, question: "12. Membran Atak Kompleksi (C5-C9) eksikliği olan bireylerde hangi enfeksiyon riski belirgin olarak artar?", options: ["Stafilokok enfeksiyonları", "Streptokok enfeksiyonları", "Tekrarlayan Neisseria enfeksiyonları", "Anaerobik enfeksiyonlar", "Mantar enfeksiyonları"], correctAnswer: "Tekrarlayan Neisseria enfeksiyonları", explanation: "MAC, Neisseria türleri gibi ince duvarlı Gram negatif kokların lizisinde önemlidir. Eksikliğinde özellikle tekrarlayan meningokok enfeksiyonları görülür." },
             { id: 913, question: "13. Gonokok enfeksiyonlarında görülen septik artrit genellikle hangi özellikte seyreder?", options: ["Poliartiküler, simetrik, büyük eklemleri tutan", "Monoartiküler, asimetrik, küçük eklemleri tutan", "Genellikle gezici tarzda poliartralji veya tenosinovitle başlar, sonra monoartiküler pürülan artrite dönüşebilir", "Sadece sakroiliak eklemi tutan", "Vertebraları tutan spondilodiskit şeklinde"], correctAnswer: "Genellikle gezici tarzda poliartralji veya tenosinovitle başlar, sonra monoartiküler pürülan artrite dönüşebilir", explanation: "Dissemine gonokok enfeksiyonunda artrit sık görülür ve tipik olarak başlangıçta gezici poliartralji/tenosinovit ile başlar, ardından bir veya birkaç eklemde (diz, el bileği, ayak bileği) pürülan artrit gelişebilir." },
             { id: 914, question: "14. Kültürde 'kayan koloni' özelliği gösterebilen Gram negatif diplokok hangisidir?", options: ["N. meningitidis", "N. gonorrhoeae", "N. lactamica", "N. sicca", "Moraxella catarrhalis"], correctAnswer: "Moraxella catarrhalis", explanation: "Moraxella catarrhalis kolonileri besiyerinde öze ile itildiğinde 'buz hokeyi diski' gibi bütün olarak kayma eğilimindedir." },
             { id: 915, question: "15. Neisseria meningitidis'in insandan insana primer bulaş yolu nedir?", options: ["Cinsel temas", "Fekal-oral yol", "Vektör (kene, bit)", "Solunum yolu damlacıkları", "Kontamine su"], correctAnswer: "Solunum yolu damlacıkları", explanation: "Meningokok, enfekte kişilerin nazofarenks sekresyonlarının damlacık yoluyla solunması ile bulaşır." }
         ]
     },
     'gram_pozitif_basiller': { // From 7-Gram Pozitif Basiller.pptx
         title: "Gram Pozitif Basiller",
         questions: [
             { id: 701, question: "1. Aşağıdaki Gram pozitif basillerden hangisi spor oluşturur?", options: ["Listeria monocytogenes", "Corynebacterium diphtheriae", "Bacillus anthracis", "Erysipelothrix rhusiopathiae", "Actinomyces israelii"], correctAnswer: "Bacillus anthracis", explanation: "Bacillus ve Clostridium cinsleri spor oluşturan önemli Gram pozitif basillerdir. Diğerleri sporsuzdur." },
             { id: 702, question: "2. Bacillus anthracis'in kapsülü hangi yapıdadır ve hangi reaksiyonla gösterilir?", options: ["Polisakkarit / Quellung", "Polipeptid (Poli-D-glutamik asit) / M'Fadyan", "Lipopolisakkarit / Gümüşleme", "Peptidoglikan / Gram", "Mikolik asit / Ziehl-Neelsen"], correctAnswer: "Polipeptid (Poli-D-glutamik asit) / M'Fadyan", explanation: "B. anthracis kapsülü protein yapısındadır (Poli-D-glutamik asit) ve metilen mavisi ile pembe/mor renkte boyanır (M'Fadyan reaksiyonu)." },
             { id: 703, question: "3. Şarbon toksinini oluşturan üç komponent hangileridir?", options: ["Toksin A, Toksin B, Toksin C", "Alfa toksin, Beta toksin, Gama toksin", "Protektif Antijen (PA), Ödem Faktörü (EF), Letal Faktör (LF)", "Hemolizin, Lesitinaz, Nörotoksin", "Enterotoksin, Sitotoksin, Nöraminidaz"], correctAnswer: "Protektif Antijen (PA), Ödem Faktörü (EF), Letal Faktör (LF)", explanation: "Şarbon toksini üç ayrı proteinden oluşur: PA hücreye bağlanmayı sağlar, EF adenilat siklaz aktivitesiyle ödeme, LF ise MAP kinazı parçalayarak hücre ölümüne yol açar." },
             { id: 704, question: "4. En sık görülen şarbon formu hangisidir ve tipik lezyonu nedir?", options: ["Akciğer şarbonu / Hemorajik mediastinit", "Gastrointestinal şarbon / Kanlı ishal", "Deri şarbonu / Ağrısız siyah eskar", "Menenjit şarbonu / Hemorajik menenjit", "Sistemik şarbon / Sepsis"], correctAnswer: "Deri şarbonu / Ağrısız siyah eskar", explanation: "Deri şarbonu vakaların %95'ini oluşturur ve tipik olarak ortasında siyah nekrotik bir kabuk (eskar) bulunan, etrafı ödemli, ağrısız bir lezyonla karakterizedir." },
             { id: 705, question: "5. Bacillus cereus'un neden olduğu 'kısa inkübasyonlu' besin zehirlenmesi (kusma tipi) hangi toksinle ilişkilidir ve hangi besinle sık görülür?", options: ["HLET / Et ürünleri", "HSET (Serülid) / Pirinç", "Alfa Toksin / Konserve", "Enterotoksin / Süt ürünleri", "Nekrotik Toksin / Sebzeler"], correctAnswer: "HSET (Serülid) / Pirinç", explanation: "Isıya dayanıklı HSET toksini (serülid), özellikle pişirilip bekletilmiş pirinçli yiyeceklerde bulunur ve 1-6 saat gibi kısa sürede kusma ile seyreden besin zehirlenmesine neden olur." },
             { id: 706, question: "6. Clostridium botulinum toksini hangi nörotransmitterin salınımını engelleyerek flask paraliziye neden olur?", options: ["Asetilkolin", "GABA", "Glisin", "Dopamin", "Serotonin"], correctAnswer: "Asetilkolin", explanation: "Botulinum nörotoksini, nöromusküler kavşakta asetilkolin salınımını bloke ederek kasların kasılamamasına ve gevşek (flask) paraliziye yol açar." },
             { id: 707, question: "7. Clostridium tetani toksini (tetanospazmin) hangi nörotransmitterlerin salınımını engelleyerek spastik paraliziye neden olur?", options: ["Asetilkolin ve Noradrenalin", "GABA ve Glisin", "Dopamin ve Serotonin", "Glutamat ve Aspartat", "Sadece Asetilkolin"], correctAnswer: "GABA ve Glisin", explanation: "Tetanospazmin, spinal korddaki inhibitör nöronlardan GABA ve glisin gibi inhibitör nörotransmitterlerin salınımını engelleyerek motor nöronların aşırı uyarılmasına ve spastik paraliziye yol açar." },
             { id: 708, question: "8. Gazlı gangrenin en sık etkeni olan Clostridium türü hangisidir ve en önemli virülans faktörü nedir?", options: ["C. difficile / Toksin B", "C. botulinum / Nörotoksin", "C. tetani / Tetanospazmin", "C. perfringens / Alfa Toksin (Lesitinaz)", "C. septicum / Beta Toksin"], correctAnswer: "C. perfringens / Alfa Toksin (Lesitinaz)", explanation: "C. perfringens, gazlı gangrenin en sık etkenidir. Alfa toksini (fosfolipaz C/lesitinaz) hücre membranlarını parçalayarak masif doku nekrozu ve hemolize neden olur." },
             { id: 709, question: "9. Antibiyotik kullanımı sonrası gelişen psödomembranöz enterokolitin en önemli etkeni hangisidir?", options: ["Bacillus cereus", "Clostridium perfringens", "Clostridioides difficile", "Listeria monocytogenes", "Staphylococcus aureus (MRSA)"], correctAnswer: "Clostridioides difficile", explanation: "Antibiyotik kullanımı (özellikle Klindamisin, Sefalosporinler, Florokinolonlar) normal bağırsak florasını bozarak C. difficile'nin aşırı çoğalmasına ve toksinleri (A ve B) ile psödomembranöz kolite neden olmasına yol açar." },
             { id: 710, question: "10. Listeria monocytogenes için karakteristik olmayan özellik hangisidir?", options: ["Gram pozitif basil", "Fakültatif intraselüler", "Oda sıcaklığında takla atar gibi hareketli", "Soğukta (+4°C) üreyebilme", "Zorunlu anaerob olması"], correctAnswer: "Zorunlu anaerob olması", explanation: "Listeria monocytogenes fakültatif anaerobdur (hem oksijenli hem oksijensiz ortamda üreyebilir), zorunlu anaerob değildir. Diğer özellikler karakteristiktir." },
             { id: 711, question: "11. Listeria monocytogenes'in fagozomdan sitoplazmaya kaçmasını sağlayan temel virülans faktörü nedir?", options: ["Internalin A/B", "Listeriolizin O (LLO)", "ActA", "Fosfolipaz C", "Sideroforlar"], correctAnswer: "Listeriolizin O (LLO)", explanation: "LLO, kolesterol bağımlı bir sitolizindir ve fagozomun asidik pH'ında aktive olarak fagozom zarını deler, bakterinin sitoplazmaya kaçışını ve hücre içinde çoğalmasını sağlar." },
             { id: 712, question: "12. Balıkçılarda veya kasaplarda travma sonrası elde gelişen, mor renkli, kenarları kabarık, ağrılı ve kaşıntılı deri lezyonuna (erizipeloid) neden olan bakteri hangisidir?", options: ["Bacillus anthracis", "Clostridium perfringens", "Listeria monocytogenes", "Erysipelothrix rhusiopathiae", "Corynebacterium diphtheriae"], correctAnswer: "Erysipelothrix rhusiopathiae", explanation: "Erizipeloid, E. rhusiopathiae'nin neden olduğu karakteristik bir deri enfeksiyonudur ve genellikle hayvan ürünleriyle (özellikle balık, domuz) temas sonrası travma bölgesinde gelişir." },
             { id: 713, question: "13. Corynebacterium diphtheriae'nin toksin üretimi hangi faktör tarafından düzenlenir?", options: ["Ortamdaki glukoz miktarı", "Ortamdaki oksijen seviyesi", "Bakterinin spor oluşturması", "Lizojenik faj varlığı ve ortamdaki demir miktarı", "Bakterinin kapsül varlığı"], correctAnswer: "Lizojenik faj varlığı ve ortamdaki demir miktarı", explanation: "Difteri toksin geni (tox) bir bakteriyofaj tarafından taşınır (lizojenik konversiyon) ve üretimi kromozomal DTxR geni tarafından ortamdaki demir miktarına göre negatif olarak düzenlenir (düşük demirde üretim artar)." },
             { id: 714, question: "14. Difteri toksini, hücrelerde hangi mekanizmayla protein sentezini inhibe eder?", options: ["Ribozomun 50S alt birimine bağlanarak", "mRNA translasyonunu bloke ederek", "Elongasyon Faktör-2'yi (EF-2) ADP-ribozilleyerek", "DNA girazı inhibe ederek", "Aminoasil-tRNA'nın ribozoma bağlanmasını engelleyerek"], correctAnswer: "Elongasyon Faktör-2'yi (EF-2) ADP-ribozilleyerek", explanation: "Difteri toksininin A parçası, EF-2'yi ADP-ribozilasyon ile inaktive eder, bu da protein sentezinin durmasına ve hücre ölümüne yol açar. Pseudomonas ekzotoksin A da aynı mekanizmayla çalışır." },
             { id: 715, question: "15. Aktinomikozun en sık görülen klinik formu hangisidir ve lezyonlardan alınan drenaj materyalinde tipik olarak ne görülür?", options: ["Torasik / Kazeifiye nekroz", "Abdominal / Psödomembran", "Pelvik / Mantar topu", "Servikofasiyal / Sülfür granülleri", "Kutanöz / Siyah eskar"], correctAnswer: "Servikofasiyal / Sülfür granülleri", explanation: "Aktinomikozun en sık formu servikofasiyal tiptir ve genellikle diş çekimi gibi travmalar sonrası gelişir. Drenaj yapan sinüs yollarından çıkan materyalde makroskopik olarak görülebilen sarı renkli sülfür granülleri (bakteri kümeleri) karakteristiktir." }
         ]
     },
     'mikobakteriler': { // From 8-Mikobakteriler v2.pptx
         title: "Mikobakteriler",
         questions: [
              { id: 801, question: "1. Mikobakterilerin aside dirençli boyanmasını sağlayan hücre duvarı bileşeni hangisidir?", options: ["Peptidoglikan", "Lipopolisakkarit", "Mikolik asit", "Arabinogalaktan", "Kord faktör"], correctAnswer: "Mikolik asit", explanation: "Mikobakterilerin hücre duvarındaki yüksek oranda bulunan uzun zincirli yağ asitleri olan mikolik asitler, Ziehl-Neelsen veya Kinyoun gibi boyama yöntemlerinde asitle yıkamaya karşı direnç gösterir." },
              { id: 802, question: "2. Mycobacterium tuberculosis'in virülansında rol oynayan, yılan benzeri kordonlar oluşturmasını sağlayan ve lökosit göçünü inhibe eden glikolipid hangisidir?", options: ["Mikolik asit", "Arabinogalaktan", "Lipoarabinomannan (LAM)", "Kord faktör (Trehaloz dimikolat)", "Fosfatidilinozitol mannozid (PIM)"], correctAnswer: "Kord faktör (Trehaloz dimikolat)", explanation: "Kord faktör, M. tuberculosis'in kültürde karakteristik kordonlar oluşturmasından, granülom oluşumundan ve virülansından sorumlu önemli bir glikolipiddir." },
              { id: 803, question: "3. Primer tüberküloz enfeksiyonunda akciğerdeki parankimal lezyon (Ghon odağı) ile bölgesel hiler lenf nodu tutulumunun birlikte oluşturduğu yapıya ne ad verilir?", options: ["Granülom", "Kavite", "Tüberkülom", "Ghon kompleksi", "Miliyer lezyon"], correctAnswer: "Ghon kompleksi", explanation: "Primer tüberkülozda akciğerdeki ilk lezyon odağı (Ghon odağı) ve drene olan lenf nodlarındaki tutulum birlikte Ghon kompleksini oluşturur." },
              { id: 804, question: "4. Tüberküloz granülomunun histolojik incelemesinde tipik olarak bulunan dev hücre tipi hangisidir?", options: ["Touton dev hücresi", "Yabancı cisim dev hücresi", "Langhans dev hücresi", "Osteoklast", "Megakaryosit"], correctAnswer: "Langhans dev hücresi", explanation: "Tüberküloz granülomlarında, makrofajların füzyonu ile oluşan ve nükleusları periferde at nalı şeklinde dizilmiş Langhans tipi dev hücreler karakteristiktir." },
              { id: 805, question: "5. Reaktivasyon (sekonder) tüberkülozu genellikle akciğerin hangi bölümünde kavite oluşumu ile karakterizedir?", options: ["Alt lobların bazali", "Orta lob", "Lingula", "Apeks (üst loblar)", "Hilus bölgesi"], correctAnswer: "Apeks (üst loblar)", explanation: "M. tuberculosis zorunlu aerob olduğu için oksijen konsantrasyonunun yüksek olduğu akciğer apkeslerinde reaktive olma ve kavite oluşturma eğilimindedir." },
              { id: 806, question: "6. Ekstrapulmoner tüberkülozun en sık görüldüğü yer neresidir?", options: ["Vertebralar (Pott hastalığı)", "Böbrekler", "Menenksler", "Perikard", "Servikal lenf bezleri (Skrofula)"], correctAnswer: "Servikal lenf bezleri (Skrofula)", explanation: "Ekstrapulmoner tüberküloz olgularında en sık tutulum yeri servikal lenf nodlarıdır (skrofula)." },
              { id: 807, question: "7. Tüberküloz menenjitinde beyin omurilik sıvısı (BOS) bulgularından hangisi tipik değildir?", options: ["Protein artışı", "Şeker düşüklüğü", "Klor düşüklüğü", "Lenfositik pleositoz", "Nötrofilik pleositoz"], correctAnswer: "Nötrofilik pleositoz", explanation: "Tüberküloz menenjitinde BOS'ta genellikle protein artar, şeker ve klor düşer, hücre sayımı artmıştır ve bu artış ağırlıklı olarak lenfositlerden oluşur (lenfositik pleositoz). Nötrofil hakimiyeti bakteriyel menenjitlerde daha sıktır." },
              { id: 808, question: "8. M. tuberculosis kültürü için kullanılan yumurta bazlı besiyeri hangisidir ve hangi madde diğer bakterilerin üremesini inhibe eder?", options: ["Middlebrook 7H10 / Albumin", "Löwenstein-Jensen / Maleşit yeşili", "Tiyoglikolat buyyon / Sodyum tiyoglikolat", "Çikolata agar / Vankomisin", "MacConkey agar / Safra tuzları"], correctAnswer: "Löwenstein-Jensen / Maleşit yeşili", explanation: "Löwenstein-Jensen, yumurta bazlı bir besiyeridir ve içerdiği maleşit yeşili boyası kontaminant bakterilerin üremesini baskılar." },
              { id: 809, question: "9. Mycobacterium bovis'i, Mycobacterium tuberculosis'ten ayıran temel özelliklerden biri nedir?", options: ["Aside dirençli boyanmaması", "Niasin testinin pozitif olması", "Gliserollü besiyerinde üreyememesi", "Kord faktör oluşturmaması", "Zorunlu anaerob olması"], correctAnswer: "Gliserollü besiyerinde üreyememesi", explanation: "M. bovis, M. tuberculosis'ten farklı olarak gliserolü karbon kaynağı olarak kullanamaz ve niasin testi negatiftir. Üremesi için pirüvat eklenmesi gerekir." },
              { id: 810, question: "10. Tüberkülin deri testinin (PPD) pozitifliği hangi tip immün yanıtın varlığını gösterir?", options: ["Humoral immünite (Antikor)", "Doğal immünite", "Tip I aşırı duyarlılık", "Tip IV gecikmiş tip hücresel immünite", "Tip III immün kompleks"], correctAnswer: "Tip IV gecikmiş tip hücresel immünite", explanation: "PPD testi, M. tuberculosis antijenlerine karşı gelişmiş olan T hücre aracılı (Tip IV) gecikmiş tip aşırı duyarlılık yanıtını ölçer." },
              { id: 811, question: "11. Aşağıdaki anti-tüberküloz ilaçlardan hangisi mikolik asit sentezini inhibe ederek etki gösterir?", options: ["Rifampin", "İzoniazid", "Pirazinamid", "Etambutol", "Streptomisin"], correctAnswer: "İzoniazid", explanation: "İzoniazid, mikobakterilerin hücre duvarının temel bileşeni olan mikolik asitlerin sentezini inhibe eden bakterisidal bir ilaçtır." },
              { id: 812, question: "12. Hangi anti-tüberküloz ilacın en önemli yan etkisi reversibl optik nöropatidir?", options: ["İzoniazid", "Rifampin", "Pirazinamid", "Etambutol", "Streptomisin"], correctAnswer: "Etambutol", explanation: "Etambutol, arabinogalaktan sentezini inhibe eder ve en önemli doza bağımlı yan etkisi geri dönüşümlü optik nöropatidir (renk görme bozukluğu, görme keskinliğinde azalma)." },
              { id: 813, question: "13. Hem İzoniazid hem de Rifampin'e dirençli tüberküloz suşları nasıl adlandırılır?", options: ["Primer dirençli TB (PDR-TB)", "Sekonder dirençli TB (SDR-TB)", "Çok ilaca dirençli TB (MDR-TB)", "Yaygın ilaca dirençli TB (XDR-TB)", "Total ilaca dirençli TB (TDR-TB)"], correctAnswer: "Çok ilaca dirençli TB (MDR-TB)", explanation: "MDR-TB, en etkili iki birinci kuşak anti-tüberküloz ilaç olan İzoniazid ve Rifampin'e karşı direnç olarak tanımlanır." },
              { id: 814, question: "14. Lepra (Cüzzam) hastalığının etkeni olan mikobakteri hangisidir ve in vitro üretilebilir mi?", options: ["M. tuberculosis / Evet", "M. bovis / Evet", "M. leprae / Hayır", "M. kansasii / Evet", "M. avium complex / Hayır"], correctAnswer: "M. leprae / Hayır", explanation: "Lepra etkeni M. leprae, zorunlu intraselüler bir patojendir ve yapay besiyerlerinde üretilemez; sadece canlı dokularda (örn. armadillo) çoğaltılabilir." },
              { id: 815, question: "15. Lepramin deri testi pozitif olan, granülomların görüldüğü ve az sayıda basil içeren lepra formu hangisidir?", options: ["Lepromatöz Lepra", "Sınırda Lepromatöz Lepra", "Sınırda Tüberküloid Lepra", "Tüberküloid Lepra", "İndetermine Lepra"], correctAnswer: "Tüberküloid Lepra", explanation: "Tüberküloid leprada (paucibasiller) hücresel immün yanıt güçlüdür, bu nedenle lepramin testi pozitiftir, lezyonlarda granülomlar oluşur ve basil sayısı azdır." }
          ]
      },
     'gram_negatif_non_fermenter_basiller': { // From 11-Gram Negatif non-fermenter basiller v2.pptx
         title: "Gram Negatif Non-fermenter Basiller",
         questions: [
              { id: 1101, question: "1. Aşağıdaki bakterilerden hangisi oksidaz pozitif, non-fermenter Gram negatif bir basildir?", options: ["Escherichia coli", "Klebsiella pneumoniae", "Pseudomonas aeruginosa", "Acinetobacter baumannii", "Stenotrophomonas maltophilia"], correctAnswer: "Pseudomonas aeruginosa", explanation: "P. aeruginosa ve Burkholderia türleri oksidaz pozitif non-fermenterlerdir. Acinetobacter ve Stenotrophomonas oksidaz negatiftir. E. coli ve Klebsiella fermenterdir." },
              { id: 1102, question: "2. Pseudomonas aeruginosa'nın ürettiği ve kültürde mavi-yeşil renk veren karakteristik pigment hangisidir?", options: ["Piyoverdin", "Piyorubin", "Piyomelanin", "Piyosiyanin", "İndigo"], correctAnswer: "Piyosiyanin", explanation: "Piyosiyanin, sadece P. aeruginosa tarafından üretilen, mavi renkli, suda çözünebilen bir pigmenttir ve virülansa katkıda bulunur. Piyoverdin yeşil ve floresandır." },
              { id: 1103, question: "3. Pseudomonas aeruginosa'nın EF-2'yi inhibe ederek protein sentezini durduran ve doku nekrozuna yol açan en önemli ekzotoksini hangisidir?", options: ["Elastaz (LasB)", "Ekzotoksin A", "Fosfolipaz C", "Alginat", "Lipopolisakkarit (LPS)"], correctAnswer: "Ekzotoksin A", explanation: "Ekzotoksin A, difteri toksinine benzer şekilde EF-2'yi ADP-ribozilleyerek protein sentezini inhibe eder ve ciddi doku hasarına neden olur." },
              { id: 1104, question: "4. Özellikle yanık hastaları ve nötropenik hastalarda görülen, P. aeruginosa'ya bağlı hemorajik ve nekrotik cilt lezyonlarına ne ad verilir?", options: ["Eritema migrans", "Ektima gangrenozum", "Pyoderma gangrenozum", "Selülit", "Erizipel"], correctAnswer: "Ektima gangrenozum", explanation: "Ektima gangrenozum, genellikle P. aeruginosa bakteriyemisi sırasında damar invazyonu ve tromboz sonucu gelişen, ortası nekrotik, etrafı eritemli karakteristik cilt lezyonlarıdır." },
              { id: 1105, question: "5. Kistik fibrozisli hastalarda kronik akciğer enfeksiyonlarına neden olan ve mukoid (alginat üreten) koloniler oluşturan bakteri hangisidir?", options: ["Burkholderia cepacia", "Stenotrophomonas maltophilia", "Acinetobacter baumannii", "Pseudomonas aeruginosa", "Haemophilus influenzae"], correctAnswer: "Pseudomonas aeruginosa", explanation: "P. aeruginosa, özellikle kistik fibrozisli hastaların akciğerlerinde alginat (bir tür biyofilm) üreterek mukoid koloniler oluşturur ve kronikleşerek eradikasyonu zorlaştırır." },
              { id: 1106, question: "6. Kistik fibrozisli veya Kronik Granülomatoz Hastalığı (KGH) olan hastalarda ciddi pnömoni ve 'cepacia sendromu'na neden olabilen bakteri hangisidir?", options: ["Pseudomonas aeruginosa", "Burkholderia cepacia", "Burkholderia pseudomallei", "Acinetobacter baumannii", "Stenotrophomonas maltophilia"], correctAnswer: "Burkholderia cepacia", explanation: "B. cepacia kompleksi, özellikle KF ve KGH hastalarında fırsatçı enfeksiyonlara, bazen de hızla kötüleşen fatal 'cepacia sendromu'na yol açabilir." },
              { id: 1107, question: "7. Güneydoğu Asya ve Kuzey Avustralya'da endemik olan, toprak ve sudan bulaşarak 'Melioidozis' (Whitmore Hastalığı) adı verilen ciddi enfeksiyona neden olan bakteri hangisidir?", options: ["Burkholderia cepacia", "Burkholderia mallei", "Burkholderia pseudomallei", "Pseudomonas aeruginosa", "Acinetobacter baumannii"], correctAnswer: "Burkholderia pseudomallei", explanation: "B. pseudomallei, kontamine toprak veya suyla temas sonucu melioidozis hastalığına neden olur. Bu hastalık akut sepsis veya kronik granülomatöz enfeksiyon şeklinde görülebilir." },
              { id: 1108, question: "8. Esas olarak atlarda 'Ruam' hastalığına neden olan, insanlara enfekte hayvanlardan bulaşabilen ve biyoterörizm ajanı olarak kabul edilen bakteri hangisidir?", options: ["Burkholderia cepacia", "Burkholderia mallei", "Burkholderia pseudomallei", "Francisella tularensis", "Yersinia pestis"], correctAnswer: "Burkholderia mallei", explanation: "B. mallei, atlarda ruam etkenidir, insanlara nadiren bulaşır ve akut veya kronik enfeksiyona yol açabilir. Hareketsiz olmasıyla B. pseudomallei'den ayrılır." },
              { id: 1109, question: "9. Hastane ortamında, özellikle yoğun bakım ünitelerinde ventilatör ilişkili pnömoni (VİP) ve kateter enfeksiyonlarının sık etkenlerinden olan, oksidaz negatif, non-fermenter kokobasil hangisidir?", options: ["Pseudomonas aeruginosa", "Burkholderia cepacia", "Stenotrophomonas maltophilia", "Acinetobacter baumannii", "Klebsiella pneumoniae"], correctAnswer: "Acinetobacter baumannii", explanation: "A. baumannii, hastane ortamına oldukça dayanıklı, çoklu ilaç direnci gösterebilen, oksidaz negatif bir non-fermenterdir ve özellikle VİP başta olmak üzere nozokomiyal enfeksiyonların önemli bir etkenidir." },
              { id: 1110, question: "10. Acinetobacter baumannii'nin Gram boyamada Neisseria türleri ile karışabilmesinin nedeni nedir?", options: ["Oksidaz pozitif olması", "Kokobasil veya kok şeklinde görülebilmesi", "Hareketli olması", "Spor oluşturması", "Kapsüllü olması"], correctAnswer: "Kokobasil veya kok şeklinde görülebilmesi", explanation: "Acinetobacter türleri pleomorfik olup bazen kokoid formlar oluşturabilir, bu da Gram boyamada Neisseria gibi diplokoklarla karışmasına neden olabilir. Ancak oksidaz negatif olmasıyla Neisseria'dan ayrılır." },
              { id: 1111, question: "11. Çoklu ilaç direnci gösteren Acinetobacter baumannii enfeksiyonlarının tedavisinde sıklıkla son çare olarak kullanılan antibiyotik hangisidir?", options: ["Penisilin G", "Seftriakson", "Azitromisin", "Vankomisin", "Kolistin"], correctAnswer: "Kolistin", explanation: "A. baumannii suşları genellikle karbapenemler dahil birçok antibiyotiğe dirençlidir. Bu nedenle polimiksin grubu bir antibiyotik olan Kolistin, sıklıkla MDR Acinetobacter enfeksiyonlarında kullanılan son seçeneklerden biridir." },
              { id: 1112, question: "12. Kültürde lavanta yeşili pigmentasyon ve amonyak benzeri koku oluşturabilen, oksidaz negatif, non-fermenter basil hangisidir?", options: ["Pseudomonas aeruginosa", "Burkholderia cepacia", "Acinetobacter baumannii", "Stenotrophomonas maltophilia", "Escherichia coli"], correctAnswer: "Stenotrophomonas maltophilia", explanation: "S. maltophilia, kanlı agarda genellikle lavanta yeşili-gri koloniler ve karakteristik amonyak kokusu oluşturur. Oksidaz negatiftir." },
              { id: 1113, question: "13. Stenotrophomonas maltophilia enfeksiyonlarının tedavisinde genellikle ilk tercih edilen antibiyotik hangisidir?", options: ["Meropenem", "Seftazidim", "Piperasilin-Tazobaktam", "Trimetoprim-Sülfametoksazol (TMP-SXT)", "Gentamisin"], correctAnswer: "Trimetoprim-Sülfametoksazol (TMP-SXT)", explanation: "S. maltophilia, karbapenemler dahil birçok beta-laktama doğal dirençlidir. Tedavisinde genellikle TMP-SXT ilk seçenektir." },
              { id: 1114, question: "14. Pseudomonas aeruginosa'nın özellikle kistik fibrozisli hastalarda akciğerde oluşturduğu ve antibiyotik penetrasyonunu zorlaştıran yapının adı nedir?", options: ["Kapsül", "Spor", "Biyofilm (Alginat)", "Granülom", "Abse"], correctAnswer: "Biyofilm (Alginat)", explanation: "P. aeruginosa'nın ürettiği alginat, mukoid bir ekzopolisakkarittir ve akciğerlerde biyofilm oluşturarak bakteriyi fagositozdan ve antibiyotik etkisinden korur." },
              { id: 1115, question: "15. Aşağıdaki non-fermenter Gram negatif basillerden hangisi 42°C'de üreyemez?", options: ["Pseudomonas aeruginosa", "Burkholderia pseudomallei", "Acinetobacter baumannii", "Burkholderia cepacia", "Stenotrophomonas maltophilia"], correctAnswer: "Burkholderia cepacia", explanation: "P. aeruginosa, B. pseudomallei ve A. baumannii 42°C'de üreyebilirken, B. cepacia genellikle bu sıcaklıkta üreyemez. Bu özellik ayrımda kullanılabilir." }
         ]
     },
     'spiroketler': { // From 15-Spiroketler.pptx
         title: "Spiroketler",
         questions: [
              { id: 1501, question: "1. Spiroketlerin karakteristik hareketini sağlayan yapı hangisidir?", options: ["Flagella (Ekzoflagella)", "Pili", "Kapsül", "Endoflagella (Aksiyal filaman)", "Fimbria"], correctAnswer: "Endoflagella (Aksiyal filaman)", explanation: "Spiroketler, periplazmik boşlukta yer alan ve hücre gövdesine sarılı olan endoflagellaları (aksiyal filamanlar) sayesinde burgu şeklinde hareket ederler." },
              { id: 1502, question: "2. Sifiliz (Frengi) etkeni olan spiroket hangisidir?", options: ["Borrelia burgdorferi", "Leptospira interrogans", "Treponema pallidum", "Borrelia recurrentis", "Treponema denticola"], correctAnswer: "Treponema pallidum", explanation: "Treponema pallidum subspecies pallidum, cinsel yolla bulaşan sifiliz hastalığının etkenidir." },
              { id: 1503, question: "3. Primer sifiliz lezyonu olan 'şankr'ın tipik özelliği nedir?", options: ["Ağrılı, yumuşak, pürülan ülser", "Ağrısız, sert tabanlı, temiz ülser", "Veziküler döküntü", "Nekrotik siyah eskar", "Kaşıntılı papül"], correctAnswer: "Ağrısız, sert tabanlı, temiz ülser", explanation: "Primer sifilizde enfeksiyon yerinde oluşan şankr, genellikle tek, ağrısız, endüre (sert) tabanlı ve kenarları belirgin bir ülserdir." },
              { id: 1504, question: "4. Sekonder sifilizin en karakteristik bulgusu nedir?", options: ["Şankr", "Gumma", "Yaygın makülopapüler döküntü (el ve ayak tabanları dahil)", "Aortit", "Tabes dorsalis"], correctAnswer: "Yaygın makülopapüler döküntü (el ve ayak tabanları dahil)", explanation: "Sekonder sifiliz, genellikle primer şankrdan haftalar sonra ortaya çıkar ve en belirgin bulgusu avuç içi ve ayak tabanlarını da tutabilen yaygın, non-pruritik (kaşıntısız) makülopapüler döküntüdür." },
              { id: 1505, question: "5. Tersiyer sifilizde görülen granülomatöz lezyonlara ne ad verilir?", options: ["Şankr", "Kondiloma lata", "Gumma", "Eritema migrans", "Tüberkülom"], correctAnswer: "Gumma", explanation: "Gumma, tersiyer sifilizde deri, kemik ve iç organlarda görülebilen, merkezinde nekroz bulunan granülomatöz, yıkıcı lezyonlardır." },
              { id: 1506, question: "6. Sifiliz tanısında kullanılan non-treponemal testler (VDRL, RPR) neyi ölçer ve ne için kullanılır?", options: ["Spesifik Treponema antikorlarını / Doğrulama", "Kardiyolipine karşı antikorları (Reagin) / Tarama ve takip", "Treponema DNA'sını / Erken tanı", "Canlı spiroketleri / Kültür", "IgM antikorlarını / Konjenital sifiliz tanısı"], correctAnswer: "Kardiyolipine karşı antikorları (Reagin) / Tarama ve takip", explanation: "Non-treponemal testler, sifiliz enfeksiyonu sırasında hasarlanan hücrelerden açığa çıkan lipitlere (kardiyolipin) karşı oluşan antikorları (reagin) saptar. Tarama ve tedavi takibinde kullanılırlar, ancak spesifik değillerdir." },
              { id: 1507, question: "7. Sifiliz tanısında kullanılan treponemal testler (FTA-ABS, TPHA) neyi ölçer ve ne için kullanılır?", options: ["Reagin antikorlarını / Tarama", "Spesifik Treponema pallidum antikorlarını / Doğrulama", "Treponema RNA'sını / Tedavi takibi", "Komplemanı / Hastalık aktivitesi", "IgE antikorlarını / Alerji tespiti"], correctAnswer: "Spesifik Treponema pallidum antikorlarını / Doğrulama", explanation: "Treponemal testler, T. pallidum'a özgü antikorları saptar ve non-treponemal test pozitifliğini doğrulamak için kullanılırlar. Genellikle ömür boyu pozitif kalırlar." },
              { id: 1508, question: "8. Konjenital sifilizin geç dönem bulgularından olan Hutchinson triadı hangi üç bulguyu içerir?", options: ["Sarılık, Hepatosplenomegali, Döküntü", "Keratit, Sağırlık, Diş anomalisi (Hutchinson dişleri)", "Şankr, Alopesi, Lenfadenopati", "Artrit, Kardit, Nörit", "Saddle nose, Sabre shin, Frontal bossing"], correctAnswer: "Keratit, Sağırlık, Diş anomalisi (Hutchinson dişleri)", explanation: "Geç konjenital sifilizin karakteristik bulgularından biri olan Hutchinson triadı; interstisyel keratit (göz), 8. sinir tutulumuna bağlı sağırlık ve üst kesici dişlerde çentikleşmeyi (Hutchinson dişleri) içerir." },
              { id: 1509, question: "9. Lyme hastalığının etkeni olan spiroket hangisidir ve hangi vektörle bulaşır?", options: ["Treponema pallidum / Sivrisinek", "Leptospira interrogans / Fare idrarı", "Borrelia recurrentis / Bit", "Borrelia burgdorferi / Ixodes kenesi", "Treponema pertenue / Deri teması"], correctAnswer: "Borrelia burgdorferi / Ixodes kenesi", explanation: "Lyme hastalığının etkeni Borrelia burgdorferi'dir ve Ixodes cinsi sert kenelerin ısırmasıyla bulaşır." },
              { id: 1510, question: "10. Erken lokalize Lyme hastalığının en karakteristik deri bulgusu nedir?", options: ["Şankr", "Vezikül", "Eritema migrans (Boğa gözü döküntü)", "Peteşi", "Gumma"], correctAnswer: "Eritema migrans (Boğa gözü döküntü)", explanation: "Eritema migrans, kene ısırığı yerinde ortaya çıkan, ortası soluk, kenarları kırmızı, halka şeklinde genişleyen karakteristik Lyme döküntüsüdür." },
              { id: 1511, question: "11. Lyme hastalığının geç döneminde en sık görülen komplikasyon hangisidir?", options: ["Menenjit", "Kardit (AV blok)", "Yüz felci", "Kronik artrit (özellikle diz)", "Eritema migrans"], correctAnswer: "Kronik artrit (özellikle diz)", explanation: "Tedavi edilmeyen Lyme hastalığının geç döneminde (aylar-yıllar sonra) en sık görülen bulgu, genellikle büyük eklemleri (özellikle diz) tutan kronik veya tekrarlayan artrittir." },
              { id: 1512, question: "12. Tekrarlayan ateş (Rekürren ateş) hastalığının etkeni nedir ve hangi vektörle bulaşır?", options: ["Borrelia burgdorferi / Kene", "Borrelia recurrentis / Bit", "Leptospira interrogans / Fare idrarı", "Treponema pallidum / Cinsel temas", "Rickettsia prowazekii / Bit"], correctAnswer: "Borrelia recurrentis / Bit", explanation: "Epidemik rekürren ateşin etkeni B. recurrentis'tir ve insan vücut biti (Pediculus humanus corporis) ile bulaşır. Endemik formlar kenelerle bulaşan farklı Borrelia türlerinden kaynaklanır." },
              { id: 1513, question: "13. Rekürren ateşteki tekrarlayan ateş ataklarının nedeni nedir?", options: ["Bakterinin toksin salgılaması", "Konak immün sisteminin zayıflaması", "Borrelia'nın yüzey antijenlerini değiştirmesi", "Bakterinin spor oluşturması", "Kompleman sisteminin aşırı aktivasyonu"], correctAnswer: "Borrelia'nın yüzey antijenlerini değiştirmesi", explanation: "Borrelia türleri, yüzeylerindeki ana proteinleri (VMP veya VIsE gibi) genetik mekanizmalarla değiştirerek konak antikor yanıtından kaçar ve bu durum tekrarlayan ateş ve bakteriyemi ataklarına neden olur." },
              { id: 1514, question: "14. Leptospiroz etkeni olan Leptospira interrogans'ın ana rezervuarı ve bulaş yolu nedir?", options: ["İnsanlar / Solunum yolu", "Keneler / Kene ısırığı", "Sivrisinekler / Sivrisinek ısırığı", "Enfekte hayvanlar (özellikle kemirgenler) / Kontamine su veya toprak", "Kuşlar / Fekal-oral yol"], correctAnswer: "Enfekte hayvanlar (özellikle kemirgenler) / Kontamine su veya toprak", explanation: "Leptospira'nın ana rezervuarı enfekte hayvanlardır (özellikle fareler). Bakteri hayvan idrarıyla kontamine olmuş su veya topraktan, derideki sıyrıklar veya mukozalar yoluyla insanlara bulaşır." },
              { id: 1515, question: "15. Leptospirozun sarılık, böbrek yetmezliği ve kanama ile seyreden ağır formuna ne ad verilir?", options: ["Lyme Karditi", "Rekürren Ateş", "Weil Hastalığı", "Nörosifiliz", "Eritema Migrans"], correctAnswer: "Weil Hastalığı", explanation: "Weil hastalığı, leptospirozun ikter (sarılık), böbrek yetmezliği, hemorajik diyatez (kanama eğilimi) ve bazen pulmoner tutulum ile seyreden ciddi ve potansiyel olarak ölümcül formudur." }
          ]
      },
     'anaeroblar': { // From 16-Anaeroblar.pptx
         title: "Anaeroblar",
         questions: [
              { id: 1601, question: "1. Oksijenin varlığında üremesi engellenen veya ölen bakterilere ne ad verilir?", options: ["Zorunlu aerob", "Fakültatif anaerob", "Mikroaerofil", "Anaerob", "Kapnofil"], correctAnswer: "Anaerob", explanation: "Anaerob bakteriler, oksijenli solunum için gerekli enzimleri (sitokromlar, SOD, katalaz vb.) içermediklerinden oksijen onlar için toksiktir ve oksijensiz ortamda ürerler." },
              { id: 1602, question: "2. Hem aerobik hem de anaerobik koşullarda üreyebilen bakterilere ne ad verilir?", options: ["Zorunlu aerob", "Fakültatif anaerob", "Mikroaerofil", "Zorunlu anaerob", "Aerotoleran anaerob"], correctAnswer: "Fakültatif anaerob", explanation: "Fakültatif anaeroblar, oksijen varlığında aerobik solunum, oksijen yokluğunda ise fermantasyon veya anaerobik solunum yapabilirler (örn. E.coli, S.aureus)." },
              { id: 1603, question: "3. Anaerob bakterilerin oksijene tolerans gösterememesinin temel nedeni nedir?", options: ["Hücre duvarlarının ince olması", "Kapsül oluşturamamaları", "Sitokrom sistemi, SOD, katalaz gibi enzimleri içermemeleri", "Flagellalarının olmaması", "Endotoksin üretmeleri"], correctAnswer: "Sitokrom sistemi, SOD, katalaz gibi enzimleri içermemeleri", explanation: "Aerobik solunum sırasında oluşan toksik oksijen radikallerini (süperoksit, hidrojen peroksit) detoksifiye eden süperoksit dismutaz (SOD) ve katalaz/peroksidaz gibi enzimlerin yokluğu, anaerobları oksijenin toksik etkisine maruz bırakır." },
              { id: 1604, question: "4. Aşağıdakilerden hangisi insan kalın bağırsağında en bol bulunan anaerob bakteri grubudur?", options: ["Clostridium türleri", "Actinomyces türleri", "Bacteroides fragilis grubu", "Peptostreptococcus türleri", "Fusobacterium türleri"], correctAnswer: "Bacteroides fragilis grubu", explanation: "Kalın bağırsak florasının büyük çoğunluğunu (%99'dan fazlasını) anaerob bakteriler oluşturur ve bunlar içinde Bacteroides fragilis grubu en baskın olanıdır." },
              { id: 1605, question: "5. Ağız florasında sıkça bulunan ve periodontal hastalıklar ile baş-boyun enfeksiyonlarında rol oynayan pigmentli anaerob bakteri cinsi hangisidir?", options: ["Bacteroides", "Prevotella (pigmentli)", "Fusobacterium", "Actinomyces", "Veillonella"], correctAnswer: "Prevotella (pigmentli)", explanation: "Pigmentli Prevotella türleri (örn. P. intermedia, P. melaninogenica) ve Porphyromonas türleri ağız florasında bulunur ve diş eti hastalıkları, dental apseler ve diğer baş-boyun enfeksiyonlarında sıkça izole edilir." },
              { id: 1606, question: "6. Deri florasında bol bulunan ve akne vulgarisin patogenezinde rol oynayan anaerob (veya aerotoleran) bakteri hangisidir?", options: ["Clostridium perfringens", "Bacteroides fragilis", "Propionibacterium acnes (Cutibacterium acnes)", "Actinomyces israelii", "Peptostreptococcus magnus"], correctAnswer: "Propionibacterium acnes (Cutibacterium acnes)", explanation: "P. acnes, deri florasının (özellikle kıl foliküllerinin) yaygın bir üyesidir ve ürettiği lipazlar ve inflamatuar mediyatörlerle akne oluşumuna katkıda bulunur." },
              { id: 1607, question: "7. Anaerobik enfeksiyonların çoğu zaman polimikrobiyal olmasının temel nedeni nedir?", options: ["Anaerobların tek başına virülansının düşük olması", "Enfeksiyonların genellikle endojen flora kaynaklı olması", "Fakültatif anaerobların ortamı anaeroblar için uygun hale getirmesi", "Antibiyotik direncinin yaygın olması", "Hepsi"], correctAnswer: "Hepsi", explanation: "Anaerobik enfeksiyonlar sıklıkla normal floranın bozulmasıyla (endojen) başlar. Fakültatif bakteriler ortamdaki oksijeni tüketerek anaerobların üremesini kolaylaştırır (sinerji). Tek başına anaeroblar daha az invaziv olabilir. Bu faktörlerin birleşimi polimikrobiyal enfeksiyonlara yol açar." },
              { id: 1608, question: "8. Bacteroides fragilis'in en önemli virülans faktörü hangisidir ve ne işe yarar?", options: ["Enterotoksin / Diyare yapar", "Kapsüler polisakkarit / Fagositozu önler ve abse oluşumunu destekler", "Nöraminidaz / Mukusu parçalar", "Fibrinolizin / Pıhtıyı eritir", "Hemaglutinin / Eritrositleri aglütine eder"], correctAnswer: "Kapsüler polisakkarit / Fagositozu önler ve abse oluşumunu destekler", explanation: "B. fragilis'in kapsülü, fagositoza karşı koruma sağlar ve konak immün hücresini uyararak abse oluşumunu indükler. Bu, intraabdominal enfeksiyonlardaki önemini açıklar." },
              { id: 1609, question: "9. Clostridium perfringens'in neden olduğu gazlı gangrende doku nekrozundan sorumlu ana toksin hangisidir?", options: ["Beta toksin", "Enterotoksin", "Alfa toksin (Fosfolipaz C / Lesitinaz)", "Tetanospazmin", "Botulinum toksini"], correctAnswer: "Alfa toksin (Fosfolipaz C / Lesitinaz)", explanation: "Alfa toksin, hücre membranlarındaki lesitini (fosfatidilkolin) parçalayarak masif hücre lizizine, doku nekrozuna ve gazlı gangrenin karakteristik bulgularına yol açar." },
              { id: 1610, question: "10. Clostridium tetani'nin ürettiği tetanospazmin hangi mekanizmayla spastik paraliziye neden olur?", options: ["Asetilkolin salınımını bloke ederek", "İnhibitör nörotransmitter (GABA, Glisin) salınımını engelleyerek", "Kas hücrelerini doğrudan parçalayarak", "Motor nöronları uyararak", "Dopamin reseptörlerini bloke ederek"], correctAnswer: "İnhibitör nörotransmitter (GABA, Glisin) salınımını engelleyerek", explanation: "Tetanospazmin, spinal korddaki Renshaw hücreleri gibi inhibitör internöronlardan GABA ve Glisin salınımını bloke eder, bu da motor nöronların sürekli ateşlemesine ve spastik paraliziye yol açar." },
              { id: 1611, question: "11. Anaerobik bir enfeksiyondan şüphelenmeyi gerektiren bulgulardan biri olmayan hangisidir?", options: ["Lezyondan kötü koku gelmesi", "Enfeksiyon yerinin mukozal yüzeye yakınlığı", "Gram boyamada bakteri görülüp aerop kültürde üreme olmaması", "Dokuda gaz varlığı (krepitasyon)", "Aminoglikozid tedavisine iyi yanıt alınması"], correctAnswer: "Aminoglikozid tedavisine iyi yanıt alınması", explanation: "Aminoglikozidler (Gentamisin, Amikasin vb.) genellikle anaerob bakterilere etkisizdir. Bu nedenle aminoglikozid tedavisine yanıt alınamaması, anaerobik bir enfeksiyonu düşündürebilir." },
              { id: 1612, question: "12. Hangi anaerobik bakteri grubu, özellikle pigmentli türleri, UV ışığı altında kırmızı floresans verebilir?", options: ["Bacteroides", "Clostridium", "Prevotella/Porphyromonas (pigmentli)", "Fusobacterium", "Peptostreptococcus"], correctAnswer: "Prevotella/Porphyromonas (pigmentli)", explanation: "Bazı pigmentli Prevotella ve Porphyromonas türleri, porfirin pigmentleri ürettikleri için UV ışığı altında kırmızı veya turuncu renkte floresans gösterebilirler." },
              { id: 1613, question: "13. Aktinomikoz lezyonlarından alınan drenaj materyalinde görülen makroskopik sarı partiküllere ne ad verilir?", options: ["Kazeöz nekroz", "Gumma", "Sülfür granülleri", "Psödomembran", "Mantar topu"], correctAnswer: "Sülfür granülleri", explanation: "Aktinomikozda, özellikle Actinomyces israelii enfeksiyonlarında, lezyondan drene olan pürülan materyal içinde çıplak gözle görülebilen, sert, sarı renkli sülfür granülleri (aslında bakteri kolonileri ve kalsiyum fosfat) tipiktir." },
              { id: 1614, question: "14. Aşağıdaki antibiyotiklerden hangisi genellikle anaerobik bakterilere karşı etkilidir?", options: ["Gentamisin", "Siprofloksasin", "Trimetoprim-Sulfametoksazol", "Metronidazol", "Aztreonam"], correctAnswer: "Metronidazol", explanation: "Metronidazol, özellikle Bacteroides, Clostridium, Fusobacterium gibi birçok zorunlu anaeroba karşı oldukça etkilidir. Klindamisin, karbapenemler, bazı beta-laktam/beta-laktamaz inhibitör kombinasyonları da etkilidir." },
              { id: 1615, question: "15. Toksik oksijen radikallerinden süperoksiti (O2⁻) daha az toksik olan H2O2'ye dönüştüren enzim hangisidir?", options: ["Katalaz", "Peroksidaz", "Süperoksit dismutaz (SOD)", "NADPH oksidaz", "Sitokrom oksidaz"], correctAnswer: "Süperoksit dismutaz (SOD)", explanation: "SOD, aerobik ve fakültatif anaerobik organizmalarda süperoksit radikalini hidrojen peroksit ve oksijene dönüştürerek hücreyi oksidatif hasardan korur. Zorunlu anaeroblarda genellikle bulunmaz." }
          ]
      }
     // Henüz eklenmemiş diğer quizler için buraya benzer yapılar eklenecek
     // 'quiz_11': { title: "Quiz 11 Başlık", questions: [ /* ... sorular ... */ ] },
     // ...
 };
            // --- Quiz State Variables ---
            let currentQuizId = null; // Track the ID of the currently active quiz
            let currentQuizData = null; // Holds title and questions for the current quiz
            let currentRound = 'INIT'; // 'INIT', 'TEST_1', 'LEARN_1_OFFER', 'LEARN_1', 'TEST_2', ... 'RESULTS', 'FINAL_REVIEW'
            let questionsForRound = [];
            let incorrectInRound1 = [];
            let incorrectInRound2 = [];
            let currentQuestionIndexInRound = 0;
            let userAnswers = {}; // { questionId: userAnswer, ... }

            let stats = {
                round1Correct: 0, round1Incorrect: 0,
                round2Correct: 0, round2Incorrect: 0,
                round3Correct: 0,
                round1Score: 0, round2Score: 0, round3Score: 0,
                round1TotalQuestions: 0, // Will be set based on selected quiz
                round2TotalQuestions: 0, round3TotalQuestions: 0,
                currentRoundCorrect: 0, currentRoundIncorrect: 0,
                currentRoundTotal: 0,
                statusMessage: "Başlatılıyor..."
            };

            // --- DOM Element References ---
            const statsCurrentRoundEl = document.getElementById('stats-current-round');
            const statsRoundProgressEl = document.getElementById('stats-round-progress');
            const statsRoundCorrectEl = document.getElementById('stats-round-correct');
            const statsRoundIncorrectEl = document.getElementById('stats-round-incorrect');
            const statsRound1ScoreEl = document.getElementById('stats-round1-score');
            const statsRound2ScoreEl = document.getElementById('stats-round2-score');
            const statsRound3ScoreEl = document.getElementById('stats-round3-score');
            const statsStatusMessageEl = document.getElementById('stats-status-message');
            const progressBarFillEl = document.getElementById('progress-bar-fill');

            const quizContainerEl = document.getElementById('quiz-container');
            const quizTitleEl = document.getElementById('quiz-title');
            const questionEl = document.getElementById('question');
            const optionsEl = document.getElementById('options');
            const submitBtn = document.getElementById('submit-btn');
            const feedbackEl = document.getElementById('feedback');

            const learningOfferContainerEl = document.getElementById('learning-offer-container');
            const offerTitleEl = document.getElementById('offer-title');
            const offerMessageEl = document.getElementById('offer-message');
            const startLearningBtn = document.getElementById('start-learning-btn');
            const startNextTestBtn = document.getElementById('start-next-test-btn');

            const learningRoundContainerEl = document.getElementById('learning-round-container');
            const learningTitleEl = document.getElementById('learning-title');
            const learningContentEl = document.getElementById('learning-content');
            const continueToNextTestBtn = document.getElementById('continue-to-next-test-btn');

            const resultContainerEl = document.getElementById('result-container');
            const scoreInfoEl = document.getElementById('score-info');
            const finalMessageEl = document.getElementById('final-message');
            const showFinalReviewBtn = document.getElementById('show-final-review-btn');

            const finalReviewContainerEl = document.getElementById('final-review-container');
            const finalReviewContentEl = document.getElementById('final-review-content');
            const themeToggleButton = document.getElementById('theme-toggle-btn');
            const homepageContentEl = document.getElementById('homepage-content');
            const statsContainerEl = document.getElementById('stats-container');
            const quizMainContentEl = document.querySelector('.quiz-main-content');


            // --- Helper Functions (Animation, Color, etc.) ---
            function getScoreColor(score) {
                const clampedScore = Math.max(0, Math.min(100, score));
                // Hue from red (0) to green (120)
                const hue = clampedScore * 1.2;
                // Make low scores less saturated/lighter, high scores more vibrant
                const saturation = 40 + clampedScore * 0.5; // 40% to 90%
                const lightness = 45 + clampedScore * 0.1;  // 45% to 55% (Adjust for dark mode contrast maybe?)
                return `hsl(${hue}, ${saturation}%, ${lightness}%)`;
                // Simpler version: return `hsl(${hue}, 85%, 40%)`;
            }

            function animateValue(element, start, end, duration) {
                if (!element) return;
                const startValue = (start === '-' || isNaN(parseFloat(start))) ? 0 : parseFloat(start);
                const endValue = Math.round(end);
                if (startValue === endValue && element.textContent === endValue + '%') return;
                let startTimestamp = null;
                const step = (timestamp) => {
                    if (!startTimestamp) startTimestamp = timestamp;
                    const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                    const currentValue = Math.floor(progress * (endValue - startValue) + startValue);
                    element.textContent = currentValue + '%';
                    element.style.color = getScoreColor(currentValue);
                    if (progress < 1) { window.requestAnimationFrame(step); }
                    else { element.textContent = endValue + '%'; element.style.color = getScoreColor(endValue); }
                };
                window.requestAnimationFrame(step);
            }

            function animateIntegerChange(element, endValue, duration = 300) {
                if (!element) return;
                const startValueText = element.textContent;
                const startValue = isNaN(parseInt(startValueText, 10)) ? 0 : parseInt(startValueText, 10);
                const finalEndValue = parseInt(endValue, 10);
                if (startValue === finalEndValue) return;
                let startTimestamp = null;
                const step = (timestamp) => {
                    if (!startTimestamp) startTimestamp = timestamp;
                    const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                    const currentValue = Math.floor(progress * (finalEndValue - startValue) + startValue);
                    element.textContent = currentValue;
                    if (progress < 1) { window.requestAnimationFrame(step); }
                    else { element.textContent = finalEndValue; }
                };
                window.requestAnimationFrame(step);
            }

             function animateProgressText(element, currentNumber, totalNumber, duration = 300) {
                if (!element || totalNumber <= 0) { if(element) element.textContent = "-"; return; }
                const match = element.textContent.match(/(\d+)\/(\d+)/);
                const startNumber = match ? parseInt(match[1], 10) : 0;
                const finalCurrentNumberToShow = Math.min(parseInt(currentNumber, 10), parseInt(totalNumber, 10));
                const finalTotalNumber = parseInt(totalNumber, 10);

                // Check if the text content already reflects the target state (including total)
                if (element.textContent === `${finalCurrentNumberToShow}/${finalTotalNumber}`) return;

                let startTimestamp = null;
                const step = (timestamp) => {
                    if (!startTimestamp) startTimestamp = timestamp;
                    const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                    const animatedCurrentValue = Math.floor(progress * (finalCurrentNumberToShow - startNumber) + startNumber);
                    element.textContent = `${animatedCurrentValue}/${finalTotalNumber}`;

                    if (progress < 1) {
                        window.requestAnimationFrame(step);
                    } else {
                        // Ensure final value is set correctly
                        element.textContent = `${finalCurrentNumberToShow}/${finalTotalNumber}`;
                    }
                };
                window.requestAnimationFrame(step);
            }


            function getStatusMessageClass(message) {
                if (!message) return "";
                if (message.includes("Mükemmel") || message.includes("Başarılı") || message.includes("Çok iyi")) return "success-message";
                if (message.includes("gayret") || message.includes("gerekli") || message.includes("Tamamlandı")) return "improvement-message";
                if (message.includes("Sonuç") || message.includes("İnceleme")) return "final-review-message";
                return ""; // Default class or no class
            }

            // --- UI Control Functions ---
            function showQuizContainer(containerId) {
                // Only controls containers *within* the quiz-main-content area
                const containers = [quizContainerEl, resultContainerEl, learningOfferContainerEl, learningRoundContainerEl, finalReviewContainerEl];
                containers.forEach(container => {
                    if(container) container.style.display = (container.id === containerId) ? 'block' : 'none';
                });
                // Don't scroll here, scroll when entering quiz view
            }

            function updateStatsDisplay(animate = false, animationDuration = 300) {
                let roundText = "-";
                switch (currentRound) {
                    case 'TEST_1': roundText = "1. Tur"; break;
                    case 'LEARN_1_OFFER': roundText = "1. Tur Sonu"; break;
                    case 'LEARN_1': roundText = "Öğrenme"; break;
                    case 'TEST_2': roundText = "2. Tur"; break;
                    case 'LEARN_2_OFFER': roundText = "2. Tur Sonu"; break;
                    case 'LEARN_2': roundText = "Öğrenme"; break;
                    case 'TEST_3': roundText = "Final Tur"; break;
                    case 'RESULTS': roundText = "Sonuç"; break;
                    case 'FINAL_REVIEW': roundText = "İnceleme"; break;
                    case 'INIT':
                    default: roundText = "Başlıyor";
                }
                if(statsCurrentRoundEl) statsCurrentRoundEl.textContent = roundText;

                // Progress Text & Bar Logic
                const currentDisplayNumber = currentQuestionIndexInRound + 1;
                const totalForRound = stats.currentRoundTotal;
                let progressText = "-";
                let progressPercent = 0;

                if (currentRound.startsWith('TEST_') && totalForRound > 0) {
                    progressText = `${Math.min(currentDisplayNumber, totalForRound)}/${totalForRound}`;
                    progressPercent = Math.min(100, (currentQuestionIndexInRound / totalForRound) * 100);

                    if (animate) {
                        animateProgressText(statsRoundProgressEl, currentDisplayNumber, totalForRound, animationDuration);
                    } else {
                        if(statsRoundProgressEl) statsRoundProgressEl.textContent = progressText;
                    }
                } else {
                   if(statsRoundProgressEl) statsRoundProgressEl.textContent = '-';
                }
                 if(progressBarFillEl) progressBarFillEl.style.width = `${progressPercent}%`;


                if (animate) {
                    animateIntegerChange(statsRoundCorrectEl, stats.currentRoundCorrect, animationDuration);
                    animateIntegerChange(statsRoundIncorrectEl, stats.currentRoundIncorrect, animationDuration);
                } else {
                    if(statsRoundCorrectEl) statsRoundCorrectEl.textContent = stats.currentRoundCorrect;
                    if(statsRoundIncorrectEl) statsRoundIncorrectEl.textContent = stats.currentRoundIncorrect;
                }

                const displayScore = (el, score, roundNum) => {
                     // Determine if the score for this specific round should be displayed
                     let scoreIsSet = false;
                     if (roundNum === 1 && (currentRound !== 'INIT' && currentRound !== 'TEST_1' || stats.round1Score > 0)) {
                         scoreIsSet = true;
                     } else if (roundNum === 2 && stats.round2TotalQuestions > 0 && (currentRound === 'TEST_3' || currentRound === 'LEARN_2_OFFER' || currentRound === 'LEARN_2' || currentRound === 'RESULTS' || currentRound === 'FINAL_REVIEW' || stats.round2Score > 0)) {
                         scoreIsSet = true;
                     } else if (roundNum === 3 && stats.round3TotalQuestions > 0 && (currentRound === 'RESULTS' || currentRound === 'FINAL_REVIEW' || stats.round3Score > 0)) {
                         scoreIsSet = true;
                     }


                    if (!animate) {
                        if (scoreIsSet) {
                           if(el) { el.textContent = Math.round(score) + '%'; el.style.color = getScoreColor(score); }
                        } else { if(el) { el.textContent = '-'; el.style.color = ''; } }
                    } else if (el && el.textContent === '-' && scoreIsSet && score === 0) {
                        // Animate from '-' to '0%' only if score is actually 0 and set
                        el.textContent = '0%'; el.style.color = getScoreColor(0);
                    } else if (el && scoreIsSet && stats[`round${roundNum}Score`] > 0) {
                        // Let animateValue handle animation from existing value or '-' to the new score
                        // Call animateValue only when the round finishes (in finishRound)
                         // If not animating right now, just display
                         if(el) { el.textContent = Math.round(score) + '%'; el.style.color = getScoreColor(score); }
                    } else if (!scoreIsSet && el) {
                        // If score is not yet set, ensure it shows '-'
                         el.textContent = '-'; el.style.color = '';
                    }
                };

                // Call displayScore for each round score element
                displayScore(statsRound1ScoreEl, stats.round1Score, 1);
                displayScore(statsRound2ScoreEl, stats.round2Score, 2);
                displayScore(statsRound3ScoreEl, stats.round3Score, 3);

                if(statsStatusMessageEl) {
                    statsStatusMessageEl.textContent = stats.statusMessage;
                    statsStatusMessageEl.className = getStatusMessageClass(stats.statusMessage);
                }
            }

            // --- Quiz Logic Functions ---
            function initializeQuiz(selectedQuizId, selectedQuizTitle, selectedQuestions) {
                console.log(`Initializing Quiz: ${selectedQuizId}`);
                currentQuizId = selectedQuizId; // Store the current quiz ID
                currentQuizData = quizData[selectedQuizId]; // Store current quiz data
                currentRound = 'TEST_1';
                questionsForRound = [...selectedQuestions]; // Use the passed-in questions
                incorrectInRound1 = [];
                incorrectInRound2 = [];
                currentQuestionIndexInRound = 0;
                userAnswers = {};
                stats = {
                    round1Correct: 0, round1Incorrect: 0, round2Correct: 0, round2Incorrect: 0, round3Correct: 0,
                    round1Score: 0, round2Score: 0, round3Score: 0,
                    round1TotalQuestions: questionsForRound.length, // Use actual length
                    round2TotalQuestions: 0, round3TotalQuestions: 0,
                    currentRoundCorrect: 0, currentRoundIncorrect: 0, currentRoundTotal: questionsForRound.length, // Use actual length
                    statusMessage: "1. Tur Devam Ediyor..."
                };
                if(feedbackEl) { feedbackEl.textContent = ''; feedbackEl.className = ''; feedbackEl.style.display = 'none'; }
                if(quizTitleEl) quizTitleEl.textContent = selectedQuizTitle; // Set the title

                // Reset score displays explicitly
                if(statsRound1ScoreEl) { statsRound1ScoreEl.textContent = '-'; statsRound1ScoreEl.style.color = ''; }
                if(statsRound2ScoreEl) { statsRound2ScoreEl.textContent = '-'; statsRound2ScoreEl.style.color = ''; }
                if(statsRound3ScoreEl) { statsRound3ScoreEl.textContent = '-'; statsRound3ScoreEl.style.color = ''; }
                if(progressBarFillEl) progressBarFillEl.style.width = '0%';

                updateStatsDisplay(false); // Update display without animation initially
                showQuizContainer('quiz-container'); // Show the question area
                loadQuestion();
            }

             function loadQuestion() {
                if(feedbackEl) feedbackEl.style.display = 'none';
                if(optionsEl) optionsEl.classList.remove('options-disabled');

                if (currentQuestionIndexInRound >= questionsForRound.length) {
                    // Ensure progress bar/text show completion before moving on
                    if(progressBarFillEl) progressBarFillEl.style.width = '100%';
                    if(stats.currentRoundTotal > 0 && statsRoundProgressEl) {
                         // Display the final count immediately when round ends
                        statsRoundProgressEl.textContent = `${stats.currentRoundTotal}/${stats.currentRoundTotal}`;
                    }
                    updateStatsDisplay(false); // Final update before finishing
                    setTimeout(finishRound, 50); // Short delay before processing results
                    return;
                }

                const currentQuestion = questionsForRound[currentQuestionIndexInRound];
                if(questionEl) questionEl.innerHTML = currentQuestion.question; // Use innerHTML if question has formatting
                if(optionsEl) optionsEl.innerHTML = '';

                currentQuestion.options.forEach((option, index) => {
                    const optionId = `option_${currentQuestion.id}_${index}`;
                    const label = document.createElement('label');
                    label.htmlFor = optionId;
                    label.classList.add('option-label');
                    const input = document.createElement('input');
                    input.type = 'radio';
                    input.id = optionId;
                    input.name = `option_${currentQuestion.id}`;
                    input.value = option;
                    const span = document.createElement('span');
                    span.textContent = option; // Use textContent for security
                    const correctIcon = document.createElement('span');
                    correctIcon.classList.add('feedback-icon', 'correct');
                    correctIcon.innerHTML = '&#10004;'; // Check mark
                    const incorrectIcon = document.createElement('span');
                    incorrectIcon.classList.add('feedback-icon', 'incorrect');
                    incorrectIcon.innerHTML = '&#10006;'; // X mark
                    label.appendChild(input);
                    label.appendChild(span);
                    label.appendChild(correctIcon);
                    label.appendChild(incorrectIcon);
                    if(optionsEl) optionsEl.appendChild(label);
                });

                if(submitBtn) submitBtn.disabled = false;
                updateStatsDisplay(true); // Animate stats for the new question
            }

            function checkAnswer() {
                const currentQuestion = questionsForRound[currentQuestionIndexInRound];
                const selectedOptionInput = optionsEl ? optionsEl.querySelector(`input[name="option_${currentQuestion.id}"]:checked`) : null;

                if (!selectedOptionInput) {
                    // Provide feedback without alert
                    if(feedbackEl) {
                        feedbackEl.textContent = 'Lütfen bir cevap seçin!';
                        feedbackEl.style.color = 'var(--warning)'; // Use warning color
                        feedbackEl.style.display = 'block';
                        setTimeout(() => { if(feedbackEl) feedbackEl.style.display = 'none'; }, 2000);
                    }
                    return;
                }

                if(submitBtn) submitBtn.disabled = true;
                if(optionsEl) optionsEl.classList.add('options-disabled');
                const userAnswer = selectedOptionInput.value;
                const correctAnswer = currentQuestion.correctAnswer;
                userAnswers[currentQuestion.id] = userAnswer; // Store user's answer for this question

                let wasCorrect = false;
                const optionLabels = optionsEl ? optionsEl.querySelectorAll('.option-label') : [];

                optionLabels.forEach(label => {
                    const input = label.querySelector('input');
                    if (!input) return;
                    if (input.value === correctAnswer) { label.classList.add('correct-option'); }
                    if (input.checked) {
                        label.classList.add('user-selected');
                        if (input.value !== correctAnswer) { label.classList.add('incorrect-option'); }
                        else { wasCorrect = true; }
                    }
                });

                if (wasCorrect) {
                    stats.currentRoundCorrect++;
                    if (currentRound === 'TEST_1') stats.round1Correct++;
                    else if (currentRound === 'TEST_2') stats.round2Correct++;
                    else if (currentRound === 'TEST_3') stats.round3Correct++;
                } else {
                    stats.currentRoundIncorrect++;
                    if (currentRound === 'TEST_1') { stats.round1Incorrect++; incorrectInRound1.push(currentQuestion); }
                    else if (currentRound === 'TEST_2') { stats.round2Incorrect++; incorrectInRound2.push(currentQuestion); }
                    // No need to track incorrect in TEST_3 for next round
                }

                // Animate the correct/incorrect counters for the current round
                animateIntegerChange(statsRoundCorrectEl, stats.currentRoundCorrect, 300);
                animateIntegerChange(statsRoundIncorrectEl, stats.currentRoundIncorrect, 300);

                currentQuestionIndexInRound++;

                // Update progress bar/text immediately after answering before the delay
                const progressPercent = Math.min(100, (stats.currentRoundTotal > 0 ? (currentQuestionIndexInRound / stats.currentRoundTotal) * 100 : 0));
                if(progressBarFillEl) progressBarFillEl.style.width = `${progressPercent}%`;
                 // Animate progress text here right after checkAnswer
                 animateProgressText(statsRoundProgressEl, currentQuestionIndexInRound, stats.currentRoundTotal, 300);

                // Load next question after a delay
                setTimeout(() => {
                    loadQuestion();
                }, 1800); // Delay to show feedback
            }

            function finishRound() {
                console.log(`Finishing round: ${currentRound}`);
                 const prevScore1Text = statsRound1ScoreEl ? statsRound1ScoreEl.textContent : '-';
                 const prevScore2Text = statsRound2ScoreEl ? statsRound2ScoreEl.textContent : '-';
                 const prevScore3Text = statsRound3ScoreEl ? statsRound3ScoreEl.textContent : '-';
                 const animationTime = 600;
                 const resultDelay = animationTime + 100; // Delay after score animation finishes

                switch (currentRound) {
                    case 'TEST_1':
                        stats.round1Score = stats.round1TotalQuestions > 0 ? Math.round((stats.round1Correct / stats.round1TotalQuestions) * 100) : 100;
                         animateValue(statsRound1ScoreEl, prevScore1Text, stats.round1Score, animationTime);
                        setTimeout(() => {
                             if (incorrectInRound1.length === 0) {
                                stats.statusMessage = "Sonuçlar Hazırlanıyor..."; updateStatsDisplay(false); currentRound = 'RESULTS'; showResults();
                             } else {
                                stats.statusMessage = "1. Tur Tamamlandı"; updateStatsDisplay(false); currentRound = 'LEARN_1_OFFER'; offerLearningRound(1);
                             }
                         }, resultDelay);
                        break;
                    case 'TEST_2':
                        stats.round2TotalQuestions = incorrectInRound1.length; // Total questions in this round
                        stats.round2Score = stats.round2TotalQuestions > 0 ? Math.round((stats.round2Correct / stats.round2TotalQuestions) * 100) : 100;
                         animateValue(statsRound2ScoreEl, prevScore2Text, stats.round2Score, animationTime);
                         setTimeout(() => {
                             if (incorrectInRound2.length === 0) {
                                 stats.statusMessage = "Sonuçlar Hazırlanıyor..."; updateStatsDisplay(false); currentRound = 'RESULTS'; showResults();
                             } else {
                                 stats.statusMessage = "2. Tur Tamamlandı"; updateStatsDisplay(false); currentRound = 'LEARN_2_OFFER'; offerLearningRound(2);
                             }
                         }, resultDelay);
                        break;
                    case 'TEST_3':
                        stats.round3TotalQuestions = incorrectInRound2.length; // Total questions in this round
                        stats.round3Score = stats.round3TotalQuestions > 0 ? Math.round((stats.round3Correct / stats.round3TotalQuestions) * 100) : 100;
                         animateValue(statsRound3ScoreEl, prevScore3Text, stats.round3Score, animationTime);
                         setTimeout(() => {
                             stats.statusMessage = "Sonuçlar Hazırlanıyor..."; updateStatsDisplay(false); currentRound = 'RESULTS'; showResults();
                         }, resultDelay);
                        break;
                    default:
                        console.error("finishRound called in unexpected state:", currentRound);
                        goHome(); // Fallback: go home
                }
                // Update display immediately to show final round progress text if needed
                 updateStatsDisplay(false);
            }

            function offerLearningRound(roundNumber) {
                const incorrectList = (roundNumber === 1) ? incorrectInRound1 : incorrectInRound2;
                const incorrectCount = incorrectList.length;
                if(offerTitleEl) offerTitleEl.textContent = `${roundNumber}. Tur Sonu Değerlendirme`;
                if(offerMessageEl) offerMessageEl.textContent = `Bu turda ${incorrectCount} soruyu yanlış yanıtladınız. İsterseniz bu sorular için bir öğretim turuna katılabilir veya doğrudan bu soruları tekrar çözmeye geçebilirsiniz.`;
                if(startLearningBtn) startLearningBtn.onclick = () => startLearningRound(roundNumber);
                if(startNextTestBtn) startNextTestBtn.onclick = () => startNextTestRound(roundNumber + 1);
                showQuizContainer('learning-offer-container');
                stats.statusMessage = `${roundNumber}. Tur Tamamlandı - Seçim Bekleniyor`;
                updateStatsDisplay(false); // Update non-animated stats
            }

            function startLearningRound(roundNumber) {
                const incorrectList = (roundNumber === 1) ? incorrectInRound1 : incorrectInRound2;
                if(learningTitleEl) learningTitleEl.textContent = `${roundNumber}. Öğrenme Turu (Yanlışlar)`;
                if(learningContentEl) learningContentEl.innerHTML = '';

                incorrectList.forEach(q => {
                    const itemDiv = document.createElement('div');
                    itemDiv.classList.add('learning-item');
                    const questionTitle = document.createElement('h4');
                     // Remove leading number if present
                    questionTitle.textContent = q.question.replace(/^\d+\.\s*/, '');
                    const answerLine = document.createElement('p');
                    answerLine.classList.add('answer-line');
                    answerLine.innerHTML = `Doğru Cevap: <span class="correct-answer">${q.correctAnswer}</span>`;
                    if(userAnswers[q.id] && userAnswers[q.id] !== q.correctAnswer){
                         answerLine.innerHTML += `<span class="user-answer-incorrect">(Sizin Cevabınız: ${userAnswers[q.id]})</span>`;
                    }

                    const explanationP = document.createElement('p');
                    explanationP.classList.add('explanation');
                    explanationP.style.display = 'none'; // Start hidden
                     if (q.explanation) { explanationP.textContent = q.explanation; }
                     else { explanationP.textContent = "Bu soru için ek açıklama bulunmamaktadır."; explanationP.style.fontStyle = 'italic'; }

                    const toggleButton = document.createElement('button');
                    toggleButton.textContent = "Açıklama Göster";
                    toggleButton.classList.add('explanation-toggle'); // Use specific class
                    toggleButton.onclick = () => {
                        const isHidden = explanationP.style.display === 'none';
                        explanationP.style.display = isHidden ? 'block' : 'none';
                        toggleButton.textContent = isHidden ? 'Açıklama Gizle' : 'Açıklama Göster';
                    };

                    answerLine.appendChild(toggleButton); // Add button next to answers
                    itemDiv.appendChild(questionTitle);
                    itemDiv.appendChild(answerLine);
                    itemDiv.appendChild(explanationP);
                    if(learningContentEl) learningContentEl.appendChild(itemDiv);
                });

                if(continueToNextTestBtn) continueToNextTestBtn.onclick = () => startNextTestRound(roundNumber + 1);
                currentRound = (roundNumber === 1) ? 'LEARN_1' : 'LEARN_2';
                stats.statusMessage = `${roundNumber}. Öğrenme Turu`;

                // Reset round-specific stats display for learning phase
                if(statsRoundProgressEl) statsRoundProgressEl.textContent = '-';
                if(progressBarFillEl) progressBarFillEl.style.width = '0%'; // Reset progress bar
                if(statsRoundCorrectEl) statsRoundCorrectEl.textContent = '-';
                if(statsRoundIncorrectEl) statsRoundIncorrectEl.textContent = '-';

                updateStatsDisplay(false);
                showQuizContainer('learning-round-container');
            }

            function startNextTestRound(roundNumber) {
                let title = "";
                if (roundNumber === 2) {
                    currentRound = 'TEST_2';
                    questionsForRound = [...incorrectInRound1]; // Get questions from previous incorrects
                    title = "2. Tur Test Soruları (Yanlışlar)";
                    stats.statusMessage = "2. Tur Devam Ediyor...";
                    stats.round2TotalQuestions = questionsForRound.length;
                } else if (roundNumber === 3) {
                    currentRound = 'TEST_3';
                    questionsForRound = [...incorrectInRound2]; // Get questions from previous incorrects
                    title = "Final Turu Test Soruları (Yanlışlar)";
                    stats.statusMessage = "Final Turu Devam Ediyor...";
                    stats.round3TotalQuestions = questionsForRound.length;
                } else {
                    console.error("Geçersiz sonraki tur numarası:", roundNumber);
                    currentRound = 'RESULTS'; showResults(); return; // Should not happen if logic is correct
                }

                // If no questions to ask in this round, skip to results/next stage
                if (questionsForRound.length === 0) {
                    console.log(`No questions for round ${roundNumber}, finishing round.`);
                    // Set scores to 100% for this empty round if appropriate? Or just skip.
                    if (roundNumber === 2) { stats.round2Score = 100; stats.round2TotalQuestions = 0;}
                    if (roundNumber === 3) { stats.round3Score = 100; stats.round3TotalQuestions = 0;}
                    finishRound(); // finishRound logic will handle moving to RESULTS or next offer
                    return;
                }


                if(quizTitleEl) quizTitleEl.textContent = title;
                currentQuestionIndexInRound = 0;
                stats.currentRoundCorrect = 0;
                stats.currentRoundIncorrect = 0;
                stats.currentRoundTotal = questionsForRound.length;

                // Reset score display for the upcoming round
                if (roundNumber === 2 && statsRound2ScoreEl) { statsRound2ScoreEl.textContent = '-'; statsRound2ScoreEl.style.color = ''; }
                if (roundNumber === 3 && statsRound3ScoreEl) { statsRound3ScoreEl.textContent = '-'; statsRound3ScoreEl.style.color = ''; }
                 if(progressBarFillEl) progressBarFillEl.style.width = '0%'; // Reset progress bar

                updateStatsDisplay(false); // Update display before showing question
                showQuizContainer('quiz-container');
                loadQuestion();
            }

            function showResults() {
                let message = "";
                let messageClass = "";

                if (stats.round1Score === 100) {
                    message = "Mükemmel! İlk turda tüm soruları doğru bildiniz. Tebrikler!"; messageClass = "success-message";
                } else if (stats.round2TotalQuestions > 0 && stats.round2Score === 100) { // Corrected logic: Check round 2 score if round 2 happened
                    message = `Çok iyi! İlk turdaki ${stats.round1Incorrect} yanlışınızı ikinci turda düzelttiniz. Başarılı!`; messageClass = "success-message";
                } else if (stats.round3TotalQuestions > 0 && stats.round3Score === 100) { // Corrected logic: Check round 3 score if round 3 happened
                     message = `Harika! Kalan ${stats.round2Incorrect} yanlışınızı final turunda düzelttiniz. Sonuç mükemmel!`;
                    messageClass = "success-message";
                } else if (stats.round3TotalQuestions > 0) { // Final round happened, but not 100%
                    const finalIncorrectCount = stats.round3TotalQuestions - stats.round3Correct;
                    if (finalIncorrectCount > 0) {
                        message = `Test tamamlandı. İlk tur skorunuz %${stats.round1Score}. İkinci turda bazı yanlışları düzelttiniz (%${stats.round2Score}), ancak final turunda hala ${finalIncorrectCount} yanlışınız kaldı. Gelişim için gayret gösterdiniz!`;
                        messageClass = "improvement-message";
                    } else {
                        // This case should technically be caught by the round3Score === 100 check above, but as a fallback:
                       message = `Harika! Kalan ${stats.round2Incorrect} yanlışınızı final turunda düzelttiniz. Sonuç mükemmel!`;
                       messageClass = "success-message";
                    }
                } else if (stats.round2TotalQuestions > 0) { // Round 2 happened, not 100%, no Round 3
                    const round2IncorrectCount = stats.round2TotalQuestions - stats.round2Correct;
                    message = `Test tamamlandı. İlk tur skorunuz %${stats.round1Score}. İkinci turda ${round2IncorrectCount} yanlışınız kaldı (%${stats.round2Score}). Daha fazla pratik faydalı olabilir.`;
                    messageClass = "improvement-message";
                } else { // Only round 1 happened, and it wasn't 100%
                    message = `Test tamamlandı. İlk turdaki skorunuz: %${stats.round1Score}. ${stats.round1Incorrect} yanlışınız var. Daha fazla pratik yapmanız önerilir.`;
                    messageClass = "improvement-message";
                }

                if(scoreInfoEl) {
                    scoreInfoEl.textContent = `İlk Tur Skoru: ${stats.round1Score}% (${stats.round1Correct}/${stats.round1TotalQuestions})`;
                    if (stats.round2TotalQuestions > 0) { scoreInfoEl.innerHTML += `<br>2. Tur Skoru (Yanlışlar Üzerinden): ${stats.round2Score}% (${stats.round2Correct}/${stats.round2TotalQuestions})`; }
                    if (stats.round3TotalQuestions > 0) { scoreInfoEl.innerHTML += `<br>Final Tur Skoru (Yanlışlar Üzerinden): ${stats.round3Score}% (${stats.round3Correct}/${stats.round3TotalQuestions})`; }
                }

                if(finalMessageEl) { finalMessageEl.textContent = message; finalMessageEl.className = messageClass; }
                stats.statusMessage = "Test Tamamlandı";
                currentRound = 'RESULTS';

                // Final update to stats bar for results view
                if(statsRoundProgressEl) statsRoundProgressEl.textContent = '-';
                if(progressBarFillEl) progressBarFillEl.style.width = '100%'; // Show complete
                if(statsRoundCorrectEl) statsRoundCorrectEl.textContent = '-';
                if(statsRoundIncorrectEl) statsRoundIncorrectEl.textContent = '-';
                updateStatsDisplay(false); // Update non-animated stats for results view

                showQuizContainer('result-container');
            }

            function showFinalReview() {
                 // Use currentQuizData which should hold the info for the quiz just completed
                 if(!finalReviewContentEl || !currentQuizData || !currentQuizData.questions) {
                     console.error("Final review cannot be shown: Missing elements or quiz data.");
                     goHome(); // Fallback
                     return;
                 }
                finalReviewContentEl.innerHTML = '';
                currentRound = 'FINAL_REVIEW';
                stats.statusMessage = "Genel İnceleme";

                 // Iterate over the questions of the *currently selected* quiz
                 currentQuizData.questions.forEach(q => {
                    const itemDiv = document.createElement('div');
                    itemDiv.classList.add('learning-item');
                    const questionTitle = document.createElement('h4');
                     // Remove leading number if present
                     questionTitle.textContent = q.question.replace(/^\d+\.\s*/, '');
                    const answerLine = document.createElement('p');
                    answerLine.classList.add('answer-line');
                    answerLine.innerHTML = `Doğru Cevap: <span class="correct-answer">${q.correctAnswer}</span>`;
                    if(userAnswers[q.id]){
                        if(userAnswers[q.id] !== q.correctAnswer) {
                            answerLine.innerHTML += `<span class="user-answer-incorrect">(Sizin Cevabınız: ${userAnswers[q.id]})</span>`;
                        }
                    }

                    const explanationP = document.createElement('p');
                    explanationP.classList.add('explanation');
                    if (q.explanation) {
                        explanationP.textContent = q.explanation;
                    } else {
                        explanationP.textContent = "Bu soru için ek açıklama bulunmamaktadır.";
                        explanationP.style.fontStyle = 'italic';
                    }
                    explanationP.style.display = 'block'; // Always show explanation in final review

                    itemDiv.appendChild(questionTitle);
                    itemDiv.appendChild(answerLine);
                    itemDiv.appendChild(explanationP);
                    finalReviewContentEl.appendChild(itemDiv);
                });

                // Reset stats bar for review view
                if(statsRoundProgressEl) statsRoundProgressEl.textContent = '-';
                if(progressBarFillEl) progressBarFillEl.style.width = '0%';
                if(statsRoundCorrectEl) statsRoundCorrectEl.textContent = '-';
                if(statsRoundIncorrectEl) statsRoundIncorrectEl.textContent = '-';
                updateStatsDisplay(false);
                showQuizContainer('final-review-container');
            }

            // --- Page Navigation and Theme ---
            function goHome() {
                console.log("Returning to homepage view...");
                // Hide Quiz specific elements
                if (statsContainerEl) statsContainerEl.style.display = 'none';
                if (quizMainContentEl) quizMainContentEl.style.display = 'none';
                // Show Homepage elements
                if (homepageContentEl) homepageContentEl.style.display = 'block';
                document.body.classList.remove('quiz-active');
                window.scrollTo(0, 0); // Scroll to top

                 // Reset quiz state variables so a new quiz starts fresh
                 currentQuizId = null;
                 currentQuizData = null;
                 currentRound = 'INIT';
                 questionsForRound = [];
                 incorrectInRound1 = [];
                 incorrectInRound2 = [];
                 currentQuestionIndexInRound = 0;
                 userAnswers = {};
                 stats = { /* Reset stats object */ }; // Simplified, ensure full reset if needed

                 // Reset stats display to initial state
                 updateStatsDisplay(false);
            }

            function startQuiz(quizId) {
                console.log(`Starting quiz: ${quizId}`);
                const selectedQuiz = quizData[quizId]; // Get data for the selected quiz

                if (!selectedQuiz || !selectedQuiz.questions || selectedQuiz.questions.length === 0) {
                    // Find the link element for this quiz to check if it's disabled
                    const quizLink = document.querySelector(`.card-link[onclick*="startQuiz('${quizId}')"]`);
                    if (quizLink && quizLink.classList.contains('disabled')) {
                         alert(`"${quizId}" başlıklı quiz henüz hazır değil.`);
                    } else {
                        alert(`Quiz "${quizId}" bulunamadı veya soruları eksik.`);
                        console.error(`Quiz data not found or empty for id: ${quizId}`);
                    }
                    return; // Stop if quiz data doesn't exist or is empty
                }

                // Hide Homepage elements
                if (homepageContentEl) homepageContentEl.style.display = 'none';
                // Show Quiz specific elements
                if (statsContainerEl) statsContainerEl.style.display = 'flex'; // Make sure it's visible
                if (quizMainContentEl) quizMainContentEl.style.display = 'block'; // Make sure it's visible
                document.body.classList.add('quiz-active');

                // Scroll to the top of the quiz area (below the fixed stats bar)
                window.scrollTo(0, 0);

                // Pass the specific data to initializeQuiz
                initializeQuiz(quizId, selectedQuiz.title, selectedQuiz.questions);
            }


            function applyTheme(theme) {
                if (theme === 'dark') {
                    document.body.classList.add('dark-mode');
                    if(themeToggleButton) themeToggleButton.textContent = '☀️';
                } else {
                    document.body.classList.remove('dark-mode');
                     if(themeToggleButton) themeToggleButton.textContent = '🌓';
                }
            }

            function toggleTheme() {
                const currentTheme = document.body.classList.contains('dark-mode') ? 'dark' : 'light';
                const newTheme = currentTheme === 'light' ? 'dark' : 'light';
                applyTheme(newTheme);
                try {
                    localStorage.setItem('quizTheme', newTheme); // Use a consistent key
                } catch (e) {
                    console.error("LocalStorage kullanılamıyor.", e);
                }
            }

            function initializeTheme() {
                let preferredTheme;
                try {
                    preferredTheme = localStorage.getItem('quizTheme'); // Use a consistent key
                } catch (e) {
                     console.error("LocalStorage okunamıyor.", e);
                }
                if (!preferredTheme) {
                     preferredTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
                }
                applyTheme(preferredTheme || 'light');
            }

            // --- Event Listeners ---
            if(submitBtn) submitBtn.addEventListener('click', checkAnswer);
            if(showFinalReviewBtn) showFinalReviewBtn.addEventListener('click', showFinalReview);
            if(themeToggleButton) themeToggleButton.addEventListener('click', toggleTheme);

             // Smooth Scrolling for Nav Links (Copied from homepage logic)
             document.querySelectorAll('#main-header nav a[href^="#"]').forEach(anchor => {
                 anchor.addEventListener('click', function (e) {
                     // If quiz is active, first go home
                     if (document.body.classList.contains('quiz-active')) {
                         goHome();
                         // Allow the default behavior to proceed after a very short delay
                         // to ensure the homepage content is displayed before scrolling
                         setTimeout(() => {
                             smoothScrollToTarget(this.getAttribute('href'));
                         }, 50);
                     } else {
                          smoothScrollToTarget(this.getAttribute('href'));
                     }
                     e.preventDefault(); // Prevent default jump regardless
                 });
             });

             function smoothScrollToTarget(targetId) {
                 const isHeroLink = targetId === '#hero';

                 document.querySelectorAll('#main-header nav a').forEach(link => link.classList.remove('active'));
                 const activeLink = document.querySelector(`#main-header nav a[href="${targetId}"]`);
                 if(activeLink) activeLink.classList.add('active');

                 if (isHeroLink) {
                     window.scrollTo({ top: 0, behavior: "smooth" });
                 } else {
                     const targetElement = document.querySelector(targetId);
                     if(targetElement) {
                         // Recalculate header offset as it might change (though unlikely in this setup)
                         const headerElement = document.getElementById('main-header');
                         const headerOffset = headerElement && getComputedStyle(headerElement).position === 'sticky' ? headerElement.offsetHeight : 0; // Only offset if sticky
                         const elementPosition = targetElement.getBoundingClientRect().top;
                         // Use pageYOffset for cross-browser compatibility instead of scrollY
                         const offsetPosition = elementPosition + window.pageYOffset - headerOffset - 20; // Extra padding

                         window.scrollTo({
                             top: offsetPosition,
                             behavior: "smooth"
                         });
                     }
                 }
             }


            // --- Initial Setup ---
            document.addEventListener('DOMContentLoaded', () => {
                initializeTheme();
                // Don't initialize quiz automatically, wait for user click
                const copyrightYearEl = document.getElementById('copyright-year');
                if(copyrightYearEl) copyrightYearEl.textContent = new Date().getFullYear();

                // Set initial active nav link based on current view (usually home)
                const homeNavLink = document.getElementById('nav-home');
                if(homeNavLink) homeNavLink.classList.add('active');

                // Initially hide quiz elements and show homepage content
                goHome(); // Ensures correct initial visibility state
            });

        </script>
    </body>
    </html>
